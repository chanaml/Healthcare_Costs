{"version":3,"file":"_drawColorScale.js","sources":["../../src/_drawColorScale.js"],"sourcesContent":["import {elem} from \"d3plus-common\";\n\n/**\n    @function _drawColorScale\n    @desc Renders the color scale if this._colorScale is not falsy.\n    @param {Array} data The filtered data array to be displayed.\n    @private\n*/\nexport default function(data = []) {\n\n  const transform = {\n    opacity: this._colorScalePosition ? 1 : 0,\n    transform: `translate(${this._margin.left}, ${this._margin.top})`\n  };\n\n  const showColorScale = this._colorScale && data && data.length > 1;\n\n  const scaleGroup = elem(\"g.d3plus-viz-colorScale\", {\n    condition: showColorScale && !this._colorScaleConfig.select,\n    enter: transform,\n    parent: this._select,\n    transition: this._transition,\n    update: transform\n  }).node();\n\n  if (this._colorScale && data) {\n\n    const scaleData = data.filter((d, i) => {\n      const c = this._colorScale(d, i);\n      return c !== undefined && c !== null;\n    });\n\n    const position = this._colorScalePosition || \"bottom\";\n    const wide = [\"top\", \"bottom\"].includes(position);\n\n    this._colorScaleClass\n      .align({bottom: \"end\", left: \"start\", right: \"end\", top: \"start\"}[position])\n      .duration(this._duration)\n      .data(scaleData)\n      .height(this._height - this._margin.bottom - this._margin.top)\n      .orient(position)\n      .select(scaleGroup)\n      .value(this._colorScale)\n      .width(this._width - this._margin.left - this._margin.right)\n      .config(this._colorScaleConfig)\n      .render();\n\n    if (showColorScale) {\n\n      const scaleBounds = this._colorScaleClass.outerBounds();\n      if (this._colorScalePosition && !this._colorScaleConfig.select && scaleBounds.height) {\n        if (wide) this._margin[position] += scaleBounds.height + this._legendClass.padding() * 2;\n        else this._margin[position] += scaleBounds.width + this._legendClass.padding() * 2;\n      }\n\n    }\n\n  }\n\n}\n"],"names":["const","this"],"mappings":"AAAA,QAAQ,IAAI,OAAO,eAAe,CAAC;;;;;;;;AAQnC,eAAe,SAAS,IAAS,EAAE;;6BAAP,GAAG;AAAK;;EAElCA,GAAK,CAAC,SAAS,GAAG;IAChB,OAAO,EAAE,IAAI,CAAC,mBAAmB,GAAG,CAAC,GAAG,CAAC;IACzC,SAAS,EAAE,iBAAa,IAAI,CAAC,OAAO,CAAC,KAAI,WAAK,IAAI,CAAC,OAAO,CAAC,IAAG,OAAG;GAClE,CAAC;;EAEFA,GAAK,CAAC,cAAc,GAAG,IAAI,CAAC,WAAW,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;;EAEnEA,GAAK,CAAC,UAAU,GAAG,IAAI,CAAC,yBAAyB,EAAE;IACjD,SAAS,EAAE,cAAc,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM;IAC3D,KAAK,EAAE,SAAS;IAChB,MAAM,EAAE,IAAI,CAAC,OAAO;IACpB,UAAU,EAAE,IAAI,CAAC,WAAW;IAC5B,MAAM,EAAE,SAAS;GAClB,CAAC,CAAC,IAAI,EAAE,CAAC;;EAEV,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,EAAE;;IAE5BA,GAAK,CAAC,SAAS,GAAG,IAAI,CAAC,MAAM,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;MACtCA,GAAK,CAAC,CAAC,GAAGC,MAAI,CAAC,WAAW,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACjC,OAAO,CAAC,KAAK,SAAS,IAAI,CAAC,KAAK,IAAI,CAAC;KACtC,CAAC,CAAC;;IAEHD,GAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAmB,IAAI,QAAQ,CAAC;IACtDA,GAAK,CAAC,IAAI,GAAG,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;;IAElD,IAAI,CAAC,gBAAgB;OAClB,KAAK,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC,QAAQ,CAAC,CAAC;OAC3E,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;OACxB,IAAI,CAAC,SAAS,CAAC;OACf,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;OAC7D,MAAM,CAAC,QAAQ,CAAC;OAChB,MAAM,CAAC,UAAU,CAAC;OAClB,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC;OACvB,KAAK,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;OAC3D,MAAM,CAAC,IAAI,CAAC,iBAAiB,CAAC;OAC9B,MAAM,EAAE,CAAC;;IAEZ,IAAI,cAAc,EAAE;;MAElBA,GAAK,CAAC,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,CAAC;MACxD,IAAI,IAAI,CAAC,mBAAmB,IAAI,CAAC,IAAI,CAAC,iBAAiB,CAAC,MAAM,IAAI,WAAW,CAAC,MAAM,EAAE;QACpF,IAAI,IAAI,IAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,GAAC;eACpF,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,IAAI,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,GAAC;OACpF;;KAEF;;GAEF;;CAEF;"}