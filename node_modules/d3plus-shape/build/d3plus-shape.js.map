{"version":3,"file":"d3plus-shape.js","sources":["../src/Image.js","../src/geom/pointDistanceSquared.js","../src/geom/pointDistance.js","../src/Shape/Shape.js","../src/geom/lineIntersection.js","../src/geom/segmentBoxContains.js","../src/geom/segmentsIntersect.js","../src/geom/polygonInside.js","../src/geom/polygonRayCast.js","../src/geom/pointRotate.js","../src/geom/polygonRotate.js","../src/geom/simplify.js","../src/geom/largestRect.js","../src/Shape/Area.js","../src/Shape/Bar.js","../src/Shape/Circle.js","../src/Shape/Line.js","../src/geom/shapeEdgePoint.js","../src/geom/path2polygon.js","../src/Shape/Path.js","../src/Shape/Rect.js"],"sourcesContent":["import {select} from \"d3-selection\";\nimport {transition} from \"d3-transition\";\n\nimport {accessor, constant} from \"d3plus-common\";\n\n/**\n    @class Image\n    @desc Creates SVG images based on an array of data.\n    @example <caption>a sample row of data</caption>\nvar data = {\"url\": \"file.png\", \"width\": \"100\", \"height\": \"50\"};\n@example <caption>passed to the generator</caption>\nnew Image().data([data]).render();\n@example <caption>creates the following</caption>\n<image class=\"d3plus-Image\" opacity=\"1\" href=\"file.png\" width=\"100\" height=\"50\" x=\"0\" y=\"0\"></image>\n@example <caption>this is shorthand for the following</caption>\nimage().data([data])();\n@example <caption>which also allows a post-draw callback function</caption>\nimage().data([data])(function() { alert(\"draw complete!\"); })\n*/\nexport default class Image {\n\n  /**\n      @memberof Image\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n    this._duration = 600;\n    this._height = accessor(\"height\");\n    this._id = accessor(\"id\");\n    this._pointerEvents = constant(\"auto\");\n    this._select;\n    this._url = accessor(\"url\");\n    this._width = accessor(\"width\");\n    this._x = accessor(\"x\", 0);\n    this._y = accessor(\"y\", 0);\n  }\n\n  /**\n      @memberof Image\n      @desc Renders the current Image to the page. If a *callback* is specified, it will be called once the images are done drawing.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    if (this._select === void 0) this.select(select(\"body\").append(\"svg\").style(\"width\", `${window.innerWidth}px`).style(\"height\", `${window.innerHeight}px`).style(\"display\", \"block\").node());\n\n    const images = this._select.selectAll(\".d3plus-Image\").data(this._data, this._id);\n\n    const enter = images.enter().append(\"image\")\n      .attr(\"class\", \"d3plus-Image\")\n      .attr(\"opacity\", 0)\n      .attr(\"width\", 0)\n      .attr(\"height\", 0)\n      .attr(\"x\", (d, i) => this._x(d, i) + this._width(d, i) / 2)\n      .attr(\"y\", (d, i) => this._y(d, i) + this._height(d, i) / 2);\n\n    const t = transition().duration(this._duration),\n          that = this,\n          update = enter.merge(images);\n\n    update\n      .attr(\"xlink:href\", this._url)\n      .style(\"pointer-events\", this._pointerEvents)\n      .transition(t)\n      .attr(\"opacity\", 1)\n      .attr(\"width\", (d, i) => this._width(d, i))\n      .attr(\"height\", (d, i) => this._height(d, i))\n      .attr(\"x\", (d, i) => this._x(d, i))\n      .attr(\"y\", (d, i) => this._y(d, i))\n      .each(function(d, i) {\n        const image = select(this), link = that._url(d, i);\n        const fullAddress = link.indexOf(\"http://\") === 0 || link.indexOf(\"https://\") === 0;\n        if (!fullAddress || link.indexOf(window.location.hostname) === 0) {\n          const img = new Image();\n          img.src = link;\n          img.crossOrigin = \"Anonymous\";\n          img.onload = function() {\n            const canvas = document.createElement(\"canvas\");\n            canvas.width = this.width;\n            canvas.height = this.height;\n            const context = canvas.getContext(\"2d\");\n            context.drawImage(this, 0, 0);\n            image.attr(\"xlink:href\", canvas.toDataURL(\"image/png\"));\n          };\n        }\n      });\n\n    images.exit().transition(t)\n      .attr(\"width\", (d, i) => this._width(d, i))\n      .attr(\"height\", (d, i) => this._height(d, i))\n      .attr(\"x\", (d, i) => this._x(d, i))\n      .attr(\"y\", (d, i) => this._y(d, i))\n      .attr(\"opacity\", 0).remove();\n\n    if (callback) setTimeout(callback, this._duration + 100);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Image\n      @desc If *data* is specified, sets the data array to the specified array and returns the current class instance. If *data* is not specified, returns the current data array. An <image> tag will be drawn for each object in the array.\n      @param {Array} [*data* = []]\n      @chainable\n  */\n  data(_) {\n    return arguments.length ? (this._data = _, this) : this._data;\n  }\n\n  /**\n      @memberof Image\n      @desc If *ms* is specified, sets the animation duration to the specified number and returns the current class instance. If *ms* is not specified, returns the current animation duration.\n      @param {Number} [*ms* = 600]\n      @chainable\n  */\n  duration(_) {\n    return arguments.length ? (this._duration = _, this) : this._duration;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the height accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.height;\n}\n  */\n  height(_) {\n    return arguments.length ? (this._height = typeof _ === \"function\" ? _ : constant(_), this) : this._height;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the id accessor to the specified function and returns the current class instance.\n      @param {Function} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.id;\n}\n  */\n  id(_) {\n    return arguments.length ? (this._id = _, this) : this._id;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the pointer-events accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = \"auto\"]\n      @chainable\n  */\n  pointerEvents(_) {\n    return arguments.length ? (this._pointerEvents = typeof _ === \"function\" ? _ : constant(_), this) : this._pointerEvents;\n  }\n\n  /**\n      @memberof Image\n      @desc If *selector* is specified, sets the SVG container element to the specified d3 selector or DOM element and returns the current class instance. If *selector* is not specified, returns the current SVG container element.\n      @param {String|HTMLElement} [*selector* = d3.select(\"body\").append(\"svg\")]\n      @chainable\n  */\n  select(_) {\n    return arguments.length ? (this._select = select(_), this) : this._select;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the URL accessor to the specified function and returns the current class instance.\n      @param {Function} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.url;\n}\n  */\n  url(_) {\n    return arguments.length ? (this._url = _, this) : this._url;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the width accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.width;\n}\n  */\n  width(_) {\n    return arguments.length ? (this._width = typeof _ === \"function\" ? _ : constant(_), this) : this._width;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the x accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.x || 0;\n}\n  */\n  x(_) {\n    return arguments.length ? (this._x = typeof _ === \"function\" ? _ : constant(_), this) : this._x;\n  }\n\n  /**\n      @memberof Image\n      @desc If *value* is specified, sets the y accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.y || 0;\n}\n  */\n  y(_) {\n    return arguments.length ? (this._y = typeof _ === \"function\" ? _ : constant(_), this) : this._y;\n  }\n\n}\n","/**\n    @function pointDistanceSquared\n    @desc Returns the squared euclidean distance between two points.\n    @param {Array} p1 The first point, which should always be an `[x, y]` formatted Array.\n    @param {Array} p2 The second point, which should always be an `[x, y]` formatted Array.\n    @returns {Number}\n*/\nexport default (p1, p2) => {\n\n  const dx = p2[0] - p1[0],\n        dy = p2[1] - p1[1];\n\n  return dx * dx + dy * dy;\n\n};\n","import pointDistanceSquared from \"./pointDistanceSquared\";\n\n/**\n    @function pointDistance\n    @desc Calculates the pixel distance between two points.\n    @param {Array} p1 The first point, which should always be an `[x, y]` formatted Array.\n    @param {Array} p2 The second point, which should always be an `[x, y]` formatted Array.\n    @returns {Number}\n*/\nexport default (p1, p2) => Math.sqrt(pointDistanceSquared(p1, p2));\n","/**\n    @external BaseClass\n    @see https://github.com/d3plus/d3plus-common#BaseClass\n*/\n\nimport {min} from \"d3-array\";\nimport {color} from \"d3-color\";\nimport {mouse, select, selectAll} from \"d3-selection\";\nimport {transition} from \"d3-transition\";\n\nimport {accessor, assign, attrize, BaseClass, constant, elem} from \"d3plus-common\";\nimport {colorContrast} from \"d3plus-color\";\nimport {strip, TextBox} from \"d3plus-text\";\n\nimport Image from \"../Image\";\nimport pointDistance from \"../geom/pointDistance\";\n\n/**\n    @class Shape\n    @extends external:BaseClass\n    @desc An abstracted class for generating shapes.\n*/\nexport default class Shape extends BaseClass {\n\n  /**\n      @memberof Shape\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor(tagName = \"g\") {\n\n    super();\n\n    this._activeOpacity = 0.25;\n    this._activeStyle = {\n      \"stroke\": \"#444444\",\n      \"stroke-width\": (d, i) => {\n        const s = this._strokeWidth(d, i) || 1;\n        return s * 3;\n      }\n    };\n    this._backgroundImage = constant(false);\n    this._backgroundImageClass = new Image();\n    this._data = [];\n    this._duration = 600;\n    this._fill = constant(\"black\");\n    this._fillOpacity = constant(1);\n\n    this._hoverOpacity = 0.5;\n    this._id = (d, i) => d.id !== void 0 ? d.id : i;\n    this._label = constant(false);\n    this._labelClass = new TextBox();\n    this._labelConfig = {\n      fontColor: (d, i) => colorContrast(this._fill(d, i)),\n      fontSize: 12\n    };\n    this._labelPadding = constant(5);\n    this._name = \"Shape\";\n    this._opacity = constant(1);\n    this._rx = constant(0);\n    this._ry = constant(0);\n    this._scale = constant(1);\n    this._shapeRendering = constant(\"geometricPrecision\");\n    this._stroke = (d, i) => color(this._fill(d, i)).darker(1);\n    this._strokeDasharray = constant(\"0\");\n    this._strokeLinecap = constant(\"butt\");\n    this._strokeOpacity = constant(1);\n    this._strokeWidth = constant(0);\n    this._tagName = tagName;\n    this._textAnchor = constant(\"start\");\n    this._vectorEffect = constant(\"non-scaling-stroke\");\n    this._verticalAlign = constant(\"top\");\n\n    this._x = accessor(\"x\", 0);\n    this._y = accessor(\"y\", 0);\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes() {\n    return {};\n  }\n\n  /**\n      @memberof Shape\n      @desc Adds event listeners to each shape group or hit area.\n      @param {D3Selection} *update* The update cycle of the data binding.\n      @private\n  */\n  _applyEvents(handler) {\n\n    const events = Object.keys(this._on);\n    for (let e = 0; e < events.length; e++) {\n      handler.on(events[e], (d, i) => {\n        if (!this._on[events[e]]) return;\n        if (d.i !== void 0) i = d.i;\n        if (d.nested && d.values) {\n          const cursor = mouse(this._select.node()),\n                values = d.values.map(d => pointDistance(cursor, [this._x(d, i), this._y(d, i)]));\n          d = d.values[values.indexOf(min(values))];\n        }\n        this._on[events[e]].bind(this)(d, i);\n      });\n    }\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Provides the default styling to the active shape elements.\n      @param {HTMLElement} *elem*\n      @private\n  */\n  _applyActive(elem) {\n\n    const that = this;\n\n    if (elem.size() && elem.node().tagName === \"g\") elem = elem.selectAll(\"*\");\n\n    /**\n        @desc Determines whether a shape is a nested collection of data points, and uses the appropriate data and index for the given function context.\n        @param {Object} *d* data point\n        @param {Number} *i* index\n        @private\n    */\n    function styleLogic(d, i) {\n      return typeof this !== \"function\" ? this\n        : d.nested && d.key && d.values\n          ? this(d.values[0], that._data.indexOf(d.values[0]))\n          : this(d, i);\n    }\n\n    const activeStyle = {};\n    for (const key in this._activeStyle) {\n      if ({}.hasOwnProperty.call(this._activeStyle, key)) {\n        activeStyle[key] = styleLogic.bind(this._activeStyle[key]);\n      }\n    }\n\n    elem.transition().duration(0).call(attrize, activeStyle);\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Provides the default styling to the shape elements.\n      @param {HTMLElement} *elem*\n      @private\n  */\n  _applyStyle(elem) {\n\n    const that = this;\n\n    if (elem.size() && elem.node().tagName === \"g\") elem = elem.selectAll(\"*\");\n\n    /**\n        @desc Determines whether a shape is a nested collection of data points, and uses the appropriate data and index for the given function context.\n        @param {Object} *d* data point\n        @param {Number} *i* index\n        @private\n    */\n    function styleLogic(d, i) {\n      return typeof this !== \"function\" ? this\n        : d.nested && d.key && d.values\n          ? this(d.values[0], that._data.indexOf(d.values[0]))\n          : this(d, i);\n    }\n\n    elem\n      .attr(\"fill\", styleLogic.bind(this._fill))\n      .attr(\"fill-opacity\", styleLogic.bind(this._fillOpacity))\n      .attr(\"rx\", styleLogic.bind(this._rx))\n      .attr(\"ry\", styleLogic.bind(this._ry))\n      .attr(\"stroke\", styleLogic.bind(this._stroke))\n      .attr(\"stroke-dasharray\", styleLogic.bind(this._strokeDasharray))\n      .attr(\"stroke-linecap\", styleLogic.bind(this._strokeLinecap))\n      .attr(\"stroke-opacity\", styleLogic.bind(this._strokeOpacity))\n      .attr(\"stroke-width\", styleLogic.bind(this._strokeWidth))\n      .attr(\"vector-effect\", styleLogic.bind(this._vectorEffect));\n  }\n\n  /**\n      @memberof Shape\n      @desc Calculates the transform for the group elements.\n      @param {HTMLElement} *elem*\n      @private\n  */\n  _applyTransform(elem) {\n\n    elem\n      .attr(\"transform\", (d, i) => `\n        translate(${d.__d3plusShape__\n    ? d.translate ? d.translate\n    : `${this._x(d.data, d.i)},${this._y(d.data, d.i)}`\n    : `${this._x(d, i)},${this._y(d, i)}`})\n        scale(${d.__d3plusShape__ ? d.scale || this._scale(d.data, d.i)\n  : this._scale(d, i)})`);\n  }\n\n  /**\n      @memberof Shape\n      @desc Checks for nested data and uses the appropriate variables for accessor functions.\n      @param {HTMLElement} *elem*\n      @private\n  */\n  _nestWrapper(method) {\n    return (d, i) => method(d.__d3plusShape__ ? d.data : d, d.__d3plusShape__ ? d.i : i);\n  }\n\n  /**\n      @memberof Shape\n      @desc Modifies existing shapes to show active status.\n      @private\n  */\n  _renderActive() {\n\n    const that = this;\n\n    this._group.selectAll(\".d3plus-Shape, .d3plus-Image, .d3plus-textBox\")\n      .each(function(d, i) {\n\n        if (!d) d = {};\n        if (!d.parentNode) d.parentNode = this.parentNode;\n        const parent = d.parentNode;\n\n        if (select(this).classed(\"d3plus-textBox\")) d = d.data;\n        if (d.__d3plusShape__ || d.__d3plus__) {\n          while (d && (d.__d3plusShape__ || d.__d3plus__)) {\n            i = d.i;\n            d = d.data;\n          }\n        }\n        else i = that._data.indexOf(d);\n\n        const group = !that._active || typeof that._active !== \"function\" || !that._active(d, i) ? parent : that._activeGroup.node();\n        if (group !== this.parentNode) {\n          group.appendChild(this);\n          if (this.className.baseVal.includes(\"d3plus-Shape\")) {\n            if (parent === group) select(this).call(that._applyStyle.bind(that));\n            else select(this).call(that._applyActive.bind(that));\n          }\n        }\n\n      });\n\n    this._renderImage();\n    this._renderLabels();\n\n    this._group.selectAll(`g.d3plus-${this._name}-shape, g.d3plus-${this._name}-image, g.d3plus-${this._name}-text`)\n      .attr(\"opacity\", this._hover ? this._hoverOpacity : this._active ? this._activeOpacity : 1);\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Modifies existing shapes to show hover status.\n      @private\n  */\n  _renderHover() {\n\n    const that = this;\n\n    this._group.selectAll(`g.d3plus-${this._name}-shape, g.d3plus-${this._name}-image, g.d3plus-${this._name}-text, g.d3plus-${this._name}-hover`)\n      .selectAll(\".d3plus-Shape, .d3plus-Image, .d3plus-textBox\")\n      .each(function(d, i) {\n\n        if (!d) d = {};\n        if (!d.parentNode) d.parentNode = this.parentNode;\n        const parent = d.parentNode;\n\n        if (select(this).classed(\"d3plus-textBox\")) d = d.data;\n        if (d.__d3plusShape__ || d.__d3plus__) {\n          while (d && (d.__d3plusShape__ || d.__d3plus__)) {\n            i = d.i;\n            d = d.data;\n          }\n        }\n        else i = that._data.indexOf(d);\n\n        const group = !that._hover || typeof that._hover !== \"function\" || !that._hover(d, i) ? parent : that._hoverGroup.node();\n        if (group !== this.parentNode) group.appendChild(this);\n\n      });\n\n    this._renderImage();\n    this._renderLabels();\n\n    this._group.selectAll(`g.d3plus-${this._name}-shape, g.d3plus-${this._name}-image, g.d3plus-${this._name}-text`)\n      .attr(\"opacity\", this._hover ? this._hoverOpacity : this._active ? this._activeOpacity : 1);\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Adds background image to each shape group.\n      @private\n  */\n  _renderImage() {\n\n    const imageData = [];\n\n    this._update.merge(this._enter).data()\n      .forEach((datum, i) => {\n\n        const aes = this._aes(datum, i);\n\n        if (aes.r || aes.width && aes.height) {\n\n          let d = datum;\n          if (datum.nested && datum.key && datum.values) {\n            d = datum.values[0];\n            i = this._data.indexOf(d);\n          }\n\n          const height = aes.r ? aes.r * 2 : aes.height,\n                url = this._backgroundImage(d, i),\n                width = aes.r ? aes.r * 2 : aes.width;\n\n          if (url) {\n\n            let x = d.__d3plusShape__ ? d.translate ? d.translate[0]\n                  : this._x(d.data, d.i) : this._x(d, i),\n                y = d.__d3plusShape__ ? d.translate ? d.translate[1]\n                  : this._y(d.data, d.i) : this._y(d, i);\n\n            if (aes.x) x += aes.x;\n            if (aes.y) y += aes.y;\n\n            if (d.__d3plusShape__) {\n              d = d.data;\n              i = d.i;\n            }\n\n            imageData.push({\n              __d3plus__: true,\n              data: d,\n              height,\n              i,\n              id: this._id(d, i),\n              url,\n              width,\n              x: x + -width / 2,\n              y: y + -height / 2\n            });\n\n          }\n\n        }\n\n      });\n\n    this._backgroundImageClass\n      .data(imageData)\n      .duration(this._duration)\n      .pointerEvents(\"none\")\n      .select(elem(`g.d3plus-${this._name}-image`, {parent: this._group, update: {opacity: this._active ? this._activeOpacity : 1}}).node())\n      .render();\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Adds labels to each shape group.\n      @private\n  */\n  _renderLabels() {\n\n    const labelData = [];\n\n    this._update.merge(this._enter).data()\n      .forEach((datum, i) => {\n\n        let d = datum;\n        if (datum.nested && datum.key && datum.values) {\n          d = datum.values[0];\n          i = this._data.indexOf(d);\n        }\n\n        let labels = this._label(d, i);\n\n        if (this._labelBounds && labels !== false && labels !== undefined && labels !== null) {\n\n          const bounds = this._labelBounds(d, i, this._aes(datum, i));\n\n          if (bounds) {\n\n            if (labels.constructor !== Array) labels = [labels];\n\n            const x = d.__d3plusShape__ ? d.translate ? d.translate[0]\n                    : this._x(d.data, d.i) : this._x(d, i),\n                  y = d.__d3plusShape__ ? d.translate ? d.translate[1]\n                    : this._y(d.data, d.i) : this._y(d, i);\n\n            if (d.__d3plusShape__) {\n              d = d.data;\n              i = d.i;\n            }\n\n            const padding = this._labelPadding(d, i);\n\n            for (let l = 0; l < labels.length; l++) {\n\n              const b = bounds.constructor === Array ? bounds[l] : Object.assign({}, bounds),\n                    p = padding.constructor === Array ? padding[l] : padding;\n\n              labelData.push({\n                __d3plus__: true,\n                data: d,\n                height: b.height - p * 2,\n                l,\n                id: `${this._id(d, i)}_${l}`,\n                r: bounds.angle !== undefined ? bounds.angle : 0,\n                text: labels[l],\n                width: b.width - p * 2,\n                x: x + b.x + p,\n                y: y + b.y + p\n              });\n\n            }\n\n          }\n\n        }\n\n      });\n\n    this._labelClass\n      .data(labelData)\n      .duration(this._duration)\n      .pointerEvents(\"none\")\n      .rotate(d => d.data.r)\n      .select(elem(`g.d3plus-${this._name}-text`, {parent: this._group, update: {opacity: this._active ? this._activeOpacity : 1}}).node())\n      .config(this._labelConfig)\n      .render();\n\n  }\n\n  /**\n      @memberof Shape\n      @desc Renders the current Shape to the page. If a *callback* is specified, it will be called once the shapes are done drawing.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    if (this._select === void 0) {\n      this.select(select(\"body\").append(\"svg\")\n        .style(\"width\", `${window.innerWidth}px`)\n        .style(\"height\", `${window.innerHeight}px`)\n        .style(\"display\", \"block\").node());\n    }\n\n    this._transition = transition().duration(this._duration);\n\n    let data = this._data, key = this._id;\n    if (this._dataFilter) {\n      data = this._dataFilter(data);\n      if (data.key) key = data.key;\n    }\n\n    if (this._sort) data = data.sort((a, b) => this._sort(a.__d3plusShape__ ? a.data : a, b.__d3plusShape__ ? b.data : b));\n\n    selectAll(`g.d3plus-${this._name}-hover > *, g.d3plus-${this._name}-active > *`).each(function(d) {\n      if (d && d.parentNode) d.parentNode.appendChild(this);\n      else this.parentNode.removeChild(this);\n    });\n\n    // Makes the update state of the group selection accessible.\n    this._group = elem(`g.d3plus-${this._name}-group`, {parent: this._select});\n    const update = this._update = elem(`g.d3plus-${this._name}-shape`, {parent: this._group, update: {opacity: this._active ? this._activeOpacity : 1}})\n      .selectAll(`.d3plus-${this._name}`)\n      .data(data, key);\n\n    // Orders and transforms the updating Shapes.\n    update.order().transition(this._transition)\n      .call(this._applyTransform.bind(this));\n\n    // Makes the enter state of the group selection accessible.\n    const enter = this._enter = update.enter().append(this._tagName)\n      .attr(\"class\", (d, i) => `d3plus-Shape d3plus-${this._name} d3plus-id-${strip(this._nestWrapper(this._id)(d, i))}`)\n      .call(this._applyTransform.bind(this))\n      .attr(\"opacity\", this._nestWrapper(this._opacity));\n\n    const enterUpdate = enter.merge(update);\n\n    enterUpdate\n      .attr(\"shape-rendering\", this._nestWrapper(this._shapeRendering))\n      .attr(\"pointer-events\", \"none\")\n      .transition(this._transition)\n      .attr(\"opacity\", this._nestWrapper(this._opacity))\n      .transition()\n      .attr(\"pointer-events\", \"all\");\n\n    // Makes the exit state of the group selection accessible.\n    const exit = this._exit = update.exit();\n    exit.transition().delay(this._duration).remove();\n\n    this._renderImage();\n    this._renderLabels();\n\n    this._hoverGroup = elem(`g.d3plus-${this._name}-hover`, {parent: this._group});\n    this._activeGroup = elem(`g.d3plus-${this._name}-active`, {parent: this._group});\n\n    const that = this;\n\n    const hitAreas = this._group.selectAll(\".d3plus-HitArea\")\n      .data(this._hitArea ? data : [], key);\n\n    hitAreas.order().transition(this._transition)\n      .call(this._applyTransform.bind(this));\n\n    const hitEnter = hitAreas.enter().append(\"rect\")\n      .attr(\"class\", (d, i) => `d3plus-HitArea d3plus-id-${strip(this._nestWrapper(this._id)(d, i))}`)\n      .attr(\"fill\", \"transparent\")\n      .call(this._applyTransform.bind(this));\n\n    const hitUpdates = hitAreas.merge(hitEnter)\n      .each(function(d) {\n        const h = that._hitArea(d, that._data.indexOf(d), that._aes(d, that._data.indexOf(d)));\n        return h ? select(this).call(attrize, h) : select(this).remove();\n      });\n\n    hitAreas.exit().remove();\n\n    this._applyEvents(this._hitArea ? hitUpdates : enterUpdate);\n\n    setTimeout(() => {\n      if (this._active) this._renderActive();\n      else if (this._hover) this._renderHover();\n      if (callback) callback();\n    }, this._duration + 100);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the highlight accessor to the specified function and returns the current class instance.\n      @param {Function} [*value*]\n      @chainable\n  */\n  active(_) {\n\n    if (!arguments.length || _ === undefined) return this._active;\n    this._active = _;\n    if (this._group) {\n      this._renderImage();\n      this._renderLabels();\n      this._renderActive();\n    }\n    return this;\n\n  }\n\n  /**\n      @memberof Shape\n      @desc When shapes are active, this is the opacity of any shape that is not active.\n      @param {Number} *value* = 0.25\n      @chainable\n  */\n  activeOpacity(_) {\n    return arguments.length ? (this._activeOpacity = _, this) : this._activeOpacity;\n  }\n\n  /**\n      @memberof Shape\n      @desc The style to apply to active shapes.\n      @param {Object} *value*\n      @chainable\n  */\n  activeStyle(_) {\n    return arguments.length ? (this._activeStyle = assign({}, this._activeStyle, _), this) : this._activeStyle;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the background-image accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = false]\n      @chainable\n  */\n  backgroundImage(_) {\n    return arguments.length\n      ? (this._backgroundImage = typeof _ === \"function\" ? _ : constant(_), this)\n      : this._backgroundImage;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *data* is specified, sets the data array to the specified array and returns the current class instance. If *data* is not specified, returns the current data array. A shape will be drawn for each object in the array.\n      @param {Array} [*data* = []]\n      @chainable\n  */\n  data(_) {\n    return arguments.length\n      ? (this._data = _, this)\n      : this._data;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *ms* is specified, sets the animation duration to the specified number and returns the current class instance. If *ms* is not specified, returns the current animation duration.\n      @param {Number} [*ms* = 600]\n      @chainable\n  */\n  duration(_) {\n    return arguments.length\n      ? (this._duration = _, this)\n      : this._duration;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the fill accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = \"black\"]\n      @chainable\n  */\n  fill(_) {\n    return arguments.length\n      ? (this._fill = typeof _ === \"function\" ? _ : constant(_), this)\n      : this._fill;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"fill-opacity\" attribute for the shapes.\n      @param {Function|Number} [*value* = 1]\n      @chainable\n  */\n  fillOpacity(_) {\n    return arguments.length\n      ? (this._fillOpacity = typeof _ === \"function\" ? _ : constant(_), this)\n      : this._fillOpacity;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the highlight accessor to the specified function and returns the current class instance.\n      @param {Function} [*value*]\n      @chainable\n  */\n  hover(_) {\n\n    if (!arguments.length || _ === void 0) return this._hover;\n    this._hover = _;\n    if (this._group) {\n      this._renderImage();\n      this._renderLabels();\n      this._renderHover();\n    }\n    return this;\n\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the hover opacity to the specified function and returns the current class instance.\n      @param {Number} [*value* = 0.5]\n      @chainable\n  */\n  hoverOpacity(_) {\n    return arguments.length ? (this._hoverOpacity = _, this) : this._hoverOpacity;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *bounds* is specified, sets the mouse hit area to the specified function and returns the current class instance. If *bounds* is not specified, returns the current mouse hit area accessor.\n      @param {Function} [*bounds*] The given function is passed the data point, index, and internally defined properties of the shape and should return an object containing the following values: `width`, `height`, `x`, `y`.\n      @chainable\n      @example\nfunction(d, i, shape) {\n  return {\n    \"width\": shape.width,\n    \"height\": shape.height,\n    \"x\": -shape.width / 2,\n    \"y\": -shape.height / 2\n  };\n}\n  */\n  hitArea(_) {\n    return arguments.length ? (this._hitArea = typeof _ === \"function\" ? _ : constant(_), this) : this._hitArea;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the id accessor to the specified function and returns the current class instance.\n      @param {Function} [*value*]\n      @chainable\n  */\n  id(_) {\n    return arguments.length ? (this._id = _, this) : this._id;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the label accessor to the specified function or string and returns the current class instance.\n      @param {Function|String|Array} [*value*]\n      @chainable\n  */\n  label(_) {\n    return arguments.length ? (this._label = typeof _ === \"function\" ? _ : constant(_), this) : this._label;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *bounds* is specified, sets the label bounds to the specified function and returns the current class instance. If *bounds* is not specified, returns the current inner bounds accessor.\n      @param {Function} [*bounds*] The given function is passed the data point, index, and internally defined properties of the shape and should return an object containing the following values: `width`, `height`, `x`, `y`. If an array is returned from the function, each value will be used in conjunction with each label.\n      @chainable\n      @example\nfunction(d, i, shape) {\n  return {\n    \"width\": shape.width,\n    \"height\": shape.height,\n    \"x\": -shape.width / 2,\n    \"y\": -shape.height / 2\n  };\n}\n  */\n  labelBounds(_) {\n    return arguments.length ? (this._labelBounds = typeof _ === \"function\" ? _ : constant(_), this) : this._labelBounds;\n  }\n\n  /**\n      @memberof Shape\n      @desc A pass-through to the config method of the TextBox class used to create a shape's labels.\n      @param {Object} [*value*]\n      @chainable\n  */\n  labelConfig(_) {\n    return arguments.length ? (this._labelConfig = assign(this._labelConfig, _), this) : this._labelConfig;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the label padding to the specified number and returns the current class instance.\n      @param {Function|Number|Array} [*value* = 10]\n      @chainable\n  */\n  labelPadding(_) {\n    return arguments.length ? (this._labelPadding = typeof _ === \"function\" ? _ : constant(_), this) : this._labelPadding;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the opacity accessor to the specified function or number and returns the current class instance.\n      @param {Number} [*value* = 1]\n      @chainable\n  */\n  opacity(_) {\n    return arguments.length ? (this._opacity = typeof _ === \"function\" ? _ : constant(_), this) : this._opacity;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"rx\" attribute for the shapes.\n      @param {Function|Number} [*value* = 0]\n      @chainable\n  */\n  rx(_) {\n    return arguments.length ? (this._rx = typeof _ === \"function\" ? _ : constant(_), this) : this._rx;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"rx\" attribute for the shapes.\n      @param {Function|Number} [*value* = 0]\n      @chainable\n  */\n  ry(_) {\n    return arguments.length ? (this._ry = typeof _ === \"function\" ? _ : constant(_), this) : this._ry;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the scale accessor to the specified function or string and returns the current class instance.\n      @param {Function|Number} [*value* = 1]\n      @chainable\n  */\n  scale(_) {\n    return arguments.length ? (this._scale = typeof _ === \"function\" ? _ : constant(_), this) : this._scale;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *selector* is specified, sets the SVG container element to the specified d3 selector or DOM element and returns the current class instance. If *selector* is not specified, returns the current SVG container element.\n      @param {String|HTMLElement} [*selector* = d3.select(\"body\").append(\"svg\")]\n      @chainable\n  */\n  select(_) {\n    return arguments.length ? (this._select = select(_), this) : this._select;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the shape-rendering accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = \"geometricPrecision\"]\n      @chainable\n      @example\nfunction(d) {\n  return d.x;\n}\n  */\n  shapeRendering(_) {\n    return arguments.length ? (this._shapeRendering = typeof _ === \"function\" ? _ : constant(_), this) : this._shapeRendering;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the sort comparator to the specified function and returns the current class instance.\n      @param {false|Function} [*value* = []]\n      @chainable\n  */\n  sort(_) {\n    return arguments.length ? (this._sort = _, this) : this._sort;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the stroke accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = \"black\"]\n      @chainable\n  */\n  stroke(_) {\n    return arguments.length ? (this._stroke = typeof _ === \"function\" ? _ : constant(_), this) : this._stroke;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"stroke-dasharray\" attribute for the shapes.\n      @param {Function|String} [*value* = \"1\"]\n      @chainable\n  */\n  strokeDasharray(_) {\n    return arguments.length ? (this._strokeDasharray = typeof _ === \"function\" ? _ : constant(_), this) : this._strokeDasharray;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"stroke-linecap\" attribute for the shapes. Accepted values are `\"butt\"`, `\"round\"`, and `\"square\"`.\n      @param {Function|String} [*value* = \"butt\"]\n      @chainable\n  */\n  strokeLinecap(_) {\n    return arguments.length ? (this._strokeLinecap = typeof _ === \"function\" ? _ : constant(_), this) : this._strokeLinecap;\n  }\n\n  /**\n      @memberof Shape\n      @desc Defines the \"stroke-opacity\" attribute for the shapes.\n      @param {Function|Number} [*value* = 1]\n      @chainable\n  */\n  strokeOpacity(_) {\n    return arguments.length ? (this._strokeOpacity = typeof _ === \"function\" ? _ : constant(_), this) : this._strokeOpacity;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the stroke-width accessor to the specified function or string and returns the current class instance.\n      @param {Function|Number} [*value* = 0]\n      @chainable\n  */\n  strokeWidth(_) {\n    return arguments.length ? (this._strokeWidth = typeof _ === \"function\" ? _ : constant(_), this) : this._strokeWidth;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the text-anchor accessor to the specified function or string and returns the current class instance.\n      @param {Function|String|Array} [*value* = \"start\"]\n      @chainable\n  */\n  textAnchor(_) {\n    return arguments.length ? (this._textAnchor = typeof _ === \"function\" ? _ : constant(_), this) : this._textAnchor;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the vector-effect accessor to the specified function or string and returns the current class instance.\n      @param {Function|String} [*value* = \"non-scaling-stroke\"]\n      @chainable\n  */\n  vectorEffect(_) {\n    return arguments.length ? (this._vectorEffect = typeof _ === \"function\" ? _ : constant(_), this) : this._vectorEffect;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the vertical alignment accessor to the specified function or string and returns the current class instance.\n      @param {Function|String|Array} [*value* = \"start\"]\n      @chainable\n  */\n  verticalAlign(_) {\n    return arguments.length ? (this._verticalAlign = typeof _ === \"function\" ? _ : constant(_), this) : this._verticalAlign;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the x accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.x;\n}\n  */\n  x(_) {\n    return arguments.length ? (this._x = typeof _ === \"function\" ? _ : constant(_), this) : this._x;\n  }\n\n  /**\n      @memberof Shape\n      @desc If *value* is specified, sets the y accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.y;\n}\n  */\n  y(_) {\n    return arguments.length ? (this._y = typeof _ === \"function\" ? _ : constant(_), this) : this._y;\n  }\n\n}\n","/**\n    @function lineIntersection\n    @desc Finds the intersection point (if there is one) of the lines p1q1 and p2q2.\n    @param {Array} p1 The first point of the first line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} q1 The second point of the first line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} p2 The first point of the second line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} q2 The second point of the second line segment, which should always be an `[x, y]` formatted Array.\n    @returns {Boolean}\n*/\nexport default function(p1, q1, p2, q2) {\n\n  // allow for some margins due to numerical errors\n  const eps = 1e-9;\n\n  // find the intersection point between the two infinite lines\n  const dx1 = p1[0] - q1[0],\n        dx2 = p2[0] - q2[0],\n        dy1 = p1[1] - q1[1],\n        dy2 = p2[1] - q2[1];\n\n  const denom = dx1 * dy2 - dy1 * dx2;\n\n  if (Math.abs(denom) < eps) return null;\n\n  const cross1 = p1[0] * q1[1] - p1[1] * q1[0],\n        cross2 = p2[0] * q2[1] - p2[1] * q2[0];\n\n  const px = (cross1 * dx2 - cross2 * dx1) / denom,\n        py = (cross1 * dy2 - cross2 * dy1) / denom;\n\n  return [px, py];\n\n}\n","/**\n    @function segmentBoxContains\n    @desc Checks whether a point is inside the bounding box of a line segment.\n    @param {Array} s1 The first point of the line segment to be used for the bounding box, which should always be an `[x, y]` formatted Array.\n    @param {Array} s2 The second point of the line segment to be used for the bounding box, which should always be an `[x, y]` formatted Array.\n    @param {Array} p The point to be checked, which should always be an `[x, y]` formatted Array.\n    @returns {Boolean}\n*/\nexport default function(s1, s2, p) {\n\n  const eps = 1e-9, [px, py] = p;\n\n  return !(px < Math.min(s1[0], s2[0]) - eps || px > Math.max(s1[0], s2[0]) + eps ||\n           py < Math.min(s1[1], s2[1]) - eps || py > Math.max(s1[1], s2[1]) + eps);\n\n}\n","import lineIntersection from \"./lineIntersection\";\nimport segmentBoxContains from \"./segmentBoxContains\";\n\n/**\n    @function segmentsIntersect\n    @desc Checks whether the line segments p1q1 && p2q2 intersect.\n    @param {Array} p1 The first point of the first line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} q1 The second point of the first line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} p2 The first point of the second line segment, which should always be an `[x, y]` formatted Array.\n    @param {Array} q2 The second point of the second line segment, which should always be an `[x, y]` formatted Array.\n    @returns {Boolean}\n*/\nexport default function(p1, q1, p2, q2) {\n\n  const p = lineIntersection(p1, q1, p2, q2);\n  if (!p) return false;\n  return segmentBoxContains(p1, q1, p) && segmentBoxContains(p2, q2, p);\n\n}\n","import {polygonContains} from \"d3-polygon\";\n\nimport segmentsIntersect from \"./segmentsIntersect\";\n\n/**\n    @function polygonInside\n    @desc Checks if one polygon is inside another polygon.\n    @param {Array} polyA An Array of `[x, y]` points to be used as the inner polygon, checking if it is inside polyA.\n    @param {Array} polyB An Array of `[x, y]` points to be used as the containing polygon.\n    @returns {Boolean}\n*/\nexport default function(polyA, polyB) {\n\n  let iA = -1;\n  const nA = polyA.length;\n  const nB = polyB.length;\n  let bA = polyA[nA - 1];\n\n  while (++iA < nA) {\n\n    const aA = bA;\n    bA = polyA[iA];\n\n    let iB = -1;\n    let bB = polyB[nB - 1];\n    while (++iB < nB) {\n      const aB = bB;\n      bB = polyB[iB];\n      if (segmentsIntersect(aA, bA, aB, bB)) return false;\n    }\n  }\n\n  return polygonContains(polyB, polyA[0]);\n\n}\n","import lineIntersection from \"./lineIntersection\";\nimport segmentBoxContains from \"./segmentBoxContains\";\nimport pointDistanceSquared from \"./pointDistanceSquared\";\n\n/**\n    @function polygonRayCast\n    @desc Gives the two closest intersection points between a ray cast from a point inside a polygon. The two points should lie on opposite sides of the origin.\n    @param {Array} poly The polygon to test against, which should be an `[x, y]` formatted Array.\n    @param {Array} origin The origin point of the ray to be cast, which should be an `[x, y]` formatted Array.\n    @param {Number} [alpha = 0] The angle in radians of the ray.\n    @returns {Array} An array containing two values, the closest point on the left and the closest point on the right. If either point cannot be found, that value will be `null`.\n*/\nexport default function(poly, origin, alpha = 0) {\n\n  const eps = 1e-9;\n  origin = [origin[0] + eps * Math.cos(alpha), origin[1] + eps * Math.sin(alpha)];\n  const [x0, y0] = origin;\n  const shiftedOrigin = [x0 + Math.cos(alpha), y0 + Math.sin(alpha)];\n\n  let idx = 0;\n  if (Math.abs(shiftedOrigin[0] - x0) < eps) idx = 1;\n  let i = -1;\n  const n = poly.length;\n  let b = poly[n - 1];\n  let minSqDistLeft = Number.MAX_VALUE;\n  let minSqDistRight = Number.MAX_VALUE;\n  let closestPointLeft = null;\n  let closestPointRight = null;\n  while (++i < n) {\n    const a = b;\n    b = poly[i];\n    const p = lineIntersection(origin, shiftedOrigin, a, b);\n    if (p && segmentBoxContains(a, b, p)) {\n      const sqDist = pointDistanceSquared(origin, p);\n      if (p[idx] < origin[idx]) {\n        if (sqDist < minSqDistLeft) {\n          minSqDistLeft = sqDist;\n          closestPointLeft = p;\n        }\n      }\n      else if (p[idx] > origin[idx]) {\n        if (sqDist < minSqDistRight) {\n          minSqDistRight = sqDist;\n          closestPointRight = p;\n        }\n      }\n    }\n  }\n\n  return [closestPointLeft, closestPointRight];\n\n}\n","/**\n    @function pointRotate\n    @desc Rotates a point around a given origin.\n    @param {Array} p The point to be rotated, which should always be an `[x, y]` formatted Array.\n    @param {Number} alpha The angle in radians to rotate.\n    @param {Array} [origin = [0, 0]] The origin point of the rotation, which should always be an `[x, y]` formatted Array.\n    @returns {Boolean}\n*/\nexport default function(p, alpha, origin = [0, 0]) {\n\n  const cosAlpha = Math.cos(alpha),\n        sinAlpha = Math.sin(alpha),\n        xshifted = p[0] - origin[0],\n        yshifted = p[1] - origin[1];\n\n  return [\n    cosAlpha * xshifted - sinAlpha * yshifted + origin[0],\n    sinAlpha * xshifted + cosAlpha * yshifted + origin[1]\n  ];\n\n}\n","import pointRotate from \"./pointRotate\";\n\n/**\n    @function polygonRotate\n    @desc Rotates a point around a given origin.\n    @param {Array} poly The polygon to be rotated, which should be an Array of `[x, y]` values.\n    @param {Number} alpha The angle in radians to rotate.\n    @param {Array} [origin = [0, 0]] The origin point of the rotation, which should be an `[x, y]` formatted Array.\n    @returns {Boolean}\n*/\nexport default (poly, alpha, origin = [0, 0]) => poly.map(p => pointRotate(p, alpha, origin));\n","import pointDistanceSquared from \"./pointDistanceSquared\";\n\n/**\n    @desc square distance from a point to a segment\n    @param {Array} point\n    @param {Array} segmentAnchor1\n    @param {Array} segmentAnchor2\n    @private\n*/\nfunction getSqSegDist(p, p1, p2) {\n\n  let x = p1[0],\n      y = p1[1];\n\n  let dx = p2[0] - x,\n      dy = p2[1] - y;\n\n  if (dx !== 0 || dy !== 0) {\n\n    const t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\n\n    if (t > 1) {\n      x = p2[0];\n      y = p2[1];\n\n    }\n    else if (t > 0) {\n      x += dx * t;\n      y += dy * t;\n    }\n\n  }\n\n  dx = p[0] - x;\n  dy = p[1] - y;\n\n  return dx * dx + dy * dy;\n\n}\n\n/**\n    @desc basic distance-based simplification\n    @param {Array} polygon\n    @param {Number} sqTolerance\n    @private\n*/\nfunction simplifyRadialDist(poly, sqTolerance) {\n\n  let point,\n      prevPoint = poly[0];\n\n  const newPoints = [prevPoint];\n\n  for (let i = 1, len = poly.length; i < len; i++) {\n    point = poly[i];\n\n    if (pointDistanceSquared(point, prevPoint) > sqTolerance) {\n      newPoints.push(point);\n      prevPoint = point;\n    }\n  }\n\n  if (prevPoint !== point) newPoints.push(point);\n\n  return newPoints;\n}\n\n/**\n    @param {Array} polygon\n    @param {Number} first\n    @param {Number} last\n    @param {Number} sqTolerance\n    @param {Array} simplified\n    @private\n*/\nfunction simplifyDPStep(poly, first, last, sqTolerance, simplified) {\n\n  let index, maxSqDist = sqTolerance;\n\n  for (let i = first + 1; i < last; i++) {\n    const sqDist = getSqSegDist(poly[i], poly[first], poly[last]);\n\n    if (sqDist > maxSqDist) {\n      index = i;\n      maxSqDist = sqDist;\n    }\n  }\n\n  if (maxSqDist > sqTolerance) {\n    if (index - first > 1) simplifyDPStep(poly, first, index, sqTolerance, simplified);\n    simplified.push(poly[index]);\n    if (last - index > 1) simplifyDPStep(poly, index, last, sqTolerance, simplified);\n  }\n}\n\n/**\n    @desc simplification using Ramer-Douglas-Peucker algorithm\n    @param {Array} polygon\n    @param {Number} sqTolerance\n    @private\n*/\nfunction simplifyDouglasPeucker(poly, sqTolerance) {\n  const last = poly.length - 1;\n\n  const simplified = [poly[0]];\n  simplifyDPStep(poly, 0, last, sqTolerance, simplified);\n  simplified.push(poly[last]);\n\n  return simplified;\n}\n\n/**\n    @function largestRect\n    @desc Simplifies the points of a polygon using both the Ramer-Douglas-Peucker algorithm and basic distance-based simplification. Adapted to an ES6 module from the excellent [Simplify.js](http://mourner.github.io/simplify-js/).\n    @author Vladimir Agafonkin\n    @param {Array} poly An Array of points that represent a polygon.\n    @param {Number} [tolerance = 1] Affects the amount of simplification (in the same metric as the point coordinates).\n    @param {Boolean} [highestQuality = false] Excludes distance-based preprocessing step which leads to highest quality simplification but runs ~10-20 times slower.\n\n*/\nexport default (poly, tolerance = 1, highestQuality = false) => {\n\n  if (poly.length <= 2) return poly;\n\n  const sqTolerance = tolerance * tolerance;\n\n  poly = highestQuality ? poly : simplifyRadialDist(poly, sqTolerance);\n  poly = simplifyDouglasPeucker(poly, sqTolerance);\n\n  return poly;\n\n};\n","import {extent, merge, range} from \"d3-array\";\nimport {polygonArea, polygonCentroid, polygonContains} from \"d3-polygon\";\n\nimport polygonInside from \"./polygonInside\";\nimport polygonRayCast from \"./polygonRayCast\";\nimport polygonRotate from \"./polygonRotate\";\nimport simplify from \"./simplify\";\nimport pointDistanceSquared from \"./pointDistanceSquared\";\n\n// Algorithm constants\nconst aspectRatioStep = 0.5; // step size for the aspect ratio\nconst angleStep = 5; // step size for angles (in degrees); has linear impact on running time\n\nconst polyCache = {};\n\n/**\n    @typedef {Object} LargestRect\n    @desc The returned Object of the largestRect function.\n    @property {Number} width The width of the rectangle\n    @property {Number} height The height of the rectangle\n    @property {Number} cx The x coordinate of the rectangle's center\n    @property {Number} cy The y coordinate of the rectangle's center\n    @property {Number} angle The rotation angle of the rectangle in degrees. The anchor of rotation is the center point.\n    @property {Number} area The area of the largest rectangle.\n    @property {Array} points An array of x/y coordinates for each point in the rectangle, useful for rendering paths.\n*/\n\n/**\n    @function largestRect\n    @author Daniel Smilkov [dsmilkov@gmail.com]\n    @desc An angle of zero means that the longer side of the polygon (the width) will be aligned with the x axis. An angle of 90 and/or -90 means that the longer side of the polygon (the width) will be aligned with the y axis. The value can be a number between -90 and 90 specifying the angle of rotation of the polygon, a string which is parsed to a number, or an array of numbers specifying the possible rotations of the polygon.\n    @param {Array} poly An Array of points that represent a polygon.\n    @param {Object} [options] An Object that allows for overriding various parameters of the algorithm.\n    @param {Number|String|Array} [options.angle = d3.range(-90, 95, 5)] The allowed rotations of the final rectangle.\n    @param {Number|String|Array} [options.aspectRatio] The ratio between the width and height of the rectangle. The value can be a number, a string which is parsed to a number, or an array of numbers specifying the possible aspect ratios of the final rectangle.\n    @param {Number} [options.maxAspectRatio = 15] The maximum aspect ratio (width/height) allowed for the rectangle. This property should only be used if the aspectRatio is not provided.\n    @param {Number} [options.minAspectRatio = 1] The minimum aspect ratio (width/height) allowed for the rectangle. This property should only be used if the aspectRatio is not provided.\n    @param {Number} [options.nTries = 20] The number of randomly drawn points inside the polygon which the algorithm explores as possible center points of the maximal rectangle.\n    @param {Number} [options.minHeight = 0] The minimum height of the rectangle.\n    @param {Number} [options.minWidth = 0] The minimum width of the rectangle.\n    @param {Number} [options.tolerance = 0.02] The simplification tolerance factor, between 0 and 1. A larger tolerance corresponds to more extensive simplification.\n    @param {Array} [options.origin] The center point of the rectangle. If specified, the rectangle will be fixed at that point, otherwise the algorithm optimizes across all possible points. The given value can be either a two dimensional array specifying the x and y coordinate of the origin or an array of two dimensional points specifying multiple possible center points of the rectangle.\n    @param {Boolean} [options.cache] Whether or not to cache the result, which would be used in subsequent calculations to preserve consistency and speed up calculation time.\n    @return {LargestRect}\n*/\nexport default function(poly, options = {}) {\n\n  if (poly.length < 3) {\n    if (options.verbose) console.error(\"polygon has to have at least 3 points\", poly);\n    return null;\n  }\n\n  // For visualization debugging purposes\n  const events = [];\n\n  // User's input normalization\n  options = Object.assign({\n    angle: range(-90, 90 + angleStep, angleStep),\n    cache: true,\n    maxAspectRatio: 15,\n    minAspectRatio: 1,\n    minHeight: 0,\n    minWidth: 0,\n    nTries: 20,\n    tolerance: 0.02,\n    verbose: false\n  }, options);\n\n  const angles = options.angle instanceof Array ? options.angle\n    : typeof options.angle === \"number\" ? [options.angle]\n    : typeof options.angle === \"string\" && !isNaN(options.angle) ? [Number(options.angle)]\n    : [];\n\n  const aspectRatios = options.aspectRatio instanceof Array ? options.aspectRatio\n    : typeof options.aspectRatio === \"number\" ? [options.aspectRatio]\n    : typeof options.aspectRatio === \"string\" && !isNaN(options.aspectRatio) ? [Number(options.aspectRatio)]\n    : [];\n\n  const origins = options.origin && options.origin instanceof Array\n    ? options.origin[0] instanceof Array ? options.origin\n    : [options.origin] : [];\n\n  let cacheString;\n  if (options.cache) {\n    cacheString = merge(poly).join(\",\");\n    cacheString += `-${options.minAspectRatio}`;\n    cacheString += `-${options.maxAspectRatio}`;\n    cacheString += `-${options.minHeight}`;\n    cacheString += `-${options.minWidth}`;\n    cacheString += `-${angles.join(\",\")}`;\n    cacheString += `-${origins.join(\",\")}`;\n    if (polyCache[cacheString]) return polyCache[cacheString];\n  }\n\n  const area = Math.abs(polygonArea(poly)); // take absolute value of the signed area\n  if (area === 0) {\n    if (options.verbose) console.error(\"polygon has 0 area\", poly);\n    return null;\n  }\n  // get the width of the bounding box of the original polygon to determine tolerance\n  let [minx, maxx] = extent(poly, d => d[0]);\n  let [miny, maxy] = extent(poly, d => d[1]);\n\n  // simplify polygon\n  const tolerance = Math.min(maxx - minx, maxy - miny) * options.tolerance;\n\n  if (tolerance > 0) poly = simplify(poly, tolerance);\n  if (options.events) events.push({type: \"simplify\", poly});\n\n  // get the width of the bounding box of the simplified polygon\n  [minx, maxx] = extent(poly, d => d[0]);\n  [miny, maxy] = extent(poly, d => d[1]);\n  const [boxWidth, boxHeight] = [maxx - minx, maxy - miny];\n\n  // discretize the binary search for optimal width to a resolution of this times the polygon width\n  const widthStep = Math.min(boxWidth, boxHeight) / 50;\n\n  // populate possible center points with random points inside the polygon\n  if (!origins.length) {\n    // get the centroid of the polygon\n    const centroid = polygonCentroid(poly);\n    if (isNaN(centroid[0])) {\n      if (options.verbose) console.error(\"cannot find centroid\", poly);\n      return null;\n    }\n    if (polygonContains(poly, centroid)) origins.push(centroid);\n    // get few more points inside the polygon\n    while (origins.length < options.nTries) {\n      const rndX = Math.random() * boxWidth + minx;\n      const rndY = Math.random() * boxHeight + miny;\n      const rndPoint = [rndX, rndY];\n      if (polygonContains(poly, rndPoint)) origins.push(rndPoint);\n    }\n  }\n  if (options.events) events.push({type: \"origins\", points: origins});\n  let maxArea = 0;\n  let maxRect = null;\n\n  for (let ai = 0; ai < angles.length; ai++) {\n    const angle = angles[ai];\n    const angleRad = -angle * Math.PI / 180;\n    if (options.events) events.push({type: \"angle\", angle});\n    for (let i = 0; i < origins.length; i++) {\n      const origOrigin = origins[i];\n      // generate improved origins\n      const [p1W, p2W] = polygonRayCast(poly, origOrigin, angleRad);\n      const [p1H, p2H] = polygonRayCast(poly, origOrigin, angleRad + Math.PI / 2);\n      const modifOrigins = [];\n      if (p1W && p2W) modifOrigins.push([(p1W[0] + p2W[0]) / 2, (p1W[1] + p2W[1]) / 2]); // average along with width axis\n      if (p1H && p2H) modifOrigins.push([(p1H[0] + p2H[0]) / 2, (p1H[1] + p2H[1]) / 2]); // average along with height axis\n\n      if (options.events) events.push({type: \"modifOrigin\", idx: i, p1W, p2W, p1H, p2H, modifOrigins});\n\n      for (let i = 0; i < modifOrigins.length; i++) {\n\n        const origin = modifOrigins[i];\n\n        if (options.events) events.push({type: \"origin\", cx: origin[0], cy: origin[1]});\n\n        const [p1W, p2W] = polygonRayCast(poly, origin, angleRad);\n        if (p1W === null || p2W === null) continue;\n        const minSqDistW = Math.min(pointDistanceSquared(origin, p1W), pointDistanceSquared(origin, p2W));\n        const maxWidth = 2 * Math.sqrt(minSqDistW);\n\n        const [p1H, p2H] = polygonRayCast(poly, origin, angleRad + Math.PI / 2);\n        if (p1H === null || p2H === null) continue;\n        const minSqDistH = Math.min(pointDistanceSquared(origin, p1H), pointDistanceSquared(origin, p2H));\n        const maxHeight = 2 * Math.sqrt(minSqDistH);\n\n        if (maxWidth * maxHeight < maxArea) continue;\n\n        let aRatios = aspectRatios;\n        if (!aRatios.length) {\n          const minAspectRatio = Math.max(options.minAspectRatio, options.minWidth / maxHeight, maxArea / (maxHeight * maxHeight));\n          const maxAspectRatio = Math.min(options.maxAspectRatio, maxWidth / options.minHeight, maxWidth * maxWidth / maxArea);\n          aRatios = range(minAspectRatio, maxAspectRatio + aspectRatioStep, aspectRatioStep);\n        }\n\n        for (let a = 0; a < aRatios.length; a++) {\n\n          const aRatio = aRatios[a];\n\n          // do a binary search to find the max width that works\n          let left = Math.max(options.minWidth, Math.sqrt(maxArea * aRatio));\n          let right = Math.min(maxWidth, maxHeight * aRatio);\n          if (right * maxHeight < maxArea) continue;\n\n          if (options.events && right - left >= widthStep) events.push({type: \"aRatio\", aRatio});\n\n          while (right - left >= widthStep) {\n            const width = (left + right) / 2;\n            const height = width / aRatio;\n            const [cx, cy] = origin;\n            let rectPoly = [\n              [cx - width / 2, cy - height / 2],\n              [cx + width / 2, cy - height / 2],\n              [cx + width / 2, cy + height / 2],\n              [cx - width / 2, cy + height / 2]\n            ];\n            rectPoly = polygonRotate(rectPoly, angleRad, origin);\n            const insidePoly = polygonInside(rectPoly, poly);\n            if (insidePoly) {\n              // we know that the area is already greater than the maxArea found so far\n              maxArea = width * height;\n              rectPoly.push(rectPoly[0]);\n              maxRect = {area: maxArea, cx, cy, width, height, angle: -angle, points: rectPoly};\n              left = width; // increase the width in the binary search\n            }\n            else {\n              right = width; // decrease the width in the binary search\n            }\n            if (options.events) events.push({type: \"rectangle\", areaFraction: width * height / area, cx, cy, width, height, angle, insidePoly});\n\n          }\n\n        }\n\n      }\n\n    }\n\n  }\n\n  if (options.cache) {\n    polyCache[cacheString] = maxRect;\n  }\n\n  return options.events ? Object.assign(maxRect || {}, {events}) : maxRect;\n\n}\n","import {extent} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport {interpolatePath} from \"d3-interpolate-path\";\nimport {select} from \"d3-selection\";\nimport * as paths from \"d3-shape\";\n\nimport {accessor, constant, merge} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\nimport largestRect from \"../geom/largestRect\";\n\n/**\n    @class Area\n    @extends Shape\n    @desc Creates SVG areas based on an array of data.\n*/\nexport default class Area extends Shape {\n\n  /**\n      @memberof Area\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._curve = \"linear\";\n    this._defined = () => true;\n    this._labelBounds = (d, i, aes) => {\n      const r = largestRect(aes.points);\n      if (!r) return null;\n      return {angle: r.angle, width: r.width, height: r.height, x: r.cx - r.width / 2 - this._x(d, i), y: r.cy - r.height / 2 - this._y(d, i)};\n    };\n    this._labelConfig = Object.assign(this._labelConfig, {\n      textAnchor: \"middle\",\n      verticalAlign: \"middle\"\n    });\n    this._name = \"Area\";\n    this._x = accessor(\"x\");\n    this._x0 = accessor(\"x\");\n    this._x1 = null;\n    this._y = constant(0);\n    this._y0 = constant(0);\n    this._y1 = accessor(\"y\");\n\n  }\n\n  /**\n      @memberof Area\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d) {\n    const values = d.values.slice().sort((a, b) => this._y1 ? this._x(a) - this._x(b) : this._y(a) - this._y(b));\n    const points1 = values.map((v, z) => [this._x0(v, z), this._y0(v, z)]);\n    const points2 = values.reverse().map((v, z) => this._y1 ? [this._x(v, z), this._y1(v, z)] : [this._x1(v, z), this._y(v, z)]);\n    let points = points1.concat(points2);\n    if (points1[0][1] > points2[0][1]) points = points.reverse();\n    points.push(points[0]);\n    return {points};\n  }\n\n  /**\n      @memberof Area\n      @desc Filters/manipulates the data array before binding each point to an SVG group.\n      @param {Array} [*data* = the data array to be filtered]\n      @private\n  */\n  _dataFilter(data) {\n\n    const areas = nest().key(this._id).entries(data).map(d => {\n\n      d.data = merge(d.values);\n      d.i = data.indexOf(d.values[0]);\n\n      const x = extent(d.values.map(this._x)\n        .concat(d.values.map(this._x0))\n        .concat(this._x1 ? d.values.map(this._x1) : [])\n      );\n      d.xR = x;\n      d.width = x[1] - x[0];\n      d.x = x[0] + d.width / 2;\n\n      const y = extent(d.values.map(this._y)\n        .concat(d.values.map(this._y0))\n        .concat(this._y1 ? d.values.map(this._y1) : [])\n      );\n      d.yR = y;\n      d.height = y[1] - y[0];\n      d.y = y[0] + d.height / 2;\n\n      d.nested = true;\n      d.translate = [d.x, d.y];\n      d.__d3plusShape__ = true;\n\n      return d;\n    });\n\n    areas.key = d => d.key;\n    return areas;\n\n  }\n\n  /**\n      @memberof Area\n      @desc Draws the area polygons.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    const path = this._path = paths.area()\n      .defined(this._defined)\n      .curve(paths[`curve${this._curve.charAt(0).toUpperCase()}${this._curve.slice(1)}`])\n      .x(this._x).x0(this._x0).x1(this._x1)\n      .y(this._y).y0(this._y0).y1(this._y1);\n\n    const exitPath = paths.area()\n      .defined(d => d)\n      .curve(paths[`curve${this._curve.charAt(0).toUpperCase()}${this._curve.slice(1)}`])\n      .x(this._x).x0(this._x0).x1(this._x1)\n      .y(this._y).y0(this._y0).y1(this._y1);\n\n    this._enter.append(\"path\")\n      .attr(\"transform\", d => `translate(${-d.xR[0] - d.width / 2}, ${-d.yR[0] - d.height / 2})`)\n      .attr(\"d\", d => path(d.values))\n      .call(this._applyStyle.bind(this));\n\n    this._update.select(\"path\").transition(this._transition)\n      .attr(\"transform\", d => `translate(${-d.xR[0] - d.width / 2}, ${-d.yR[0] - d.height / 2})`)\n      .attrTween(\"d\", function(d) {\n        return interpolatePath(select(this).attr(\"d\"), path(d.values));\n      })\n      .call(this._applyStyle.bind(this));\n\n    this._exit.select(\"path\").transition(this._transition)\n      .attrTween(\"d\", function(d) {\n        return interpolatePath(select(this).attr(\"d\"), exitPath(d.values));\n      });\n\n    return this;\n\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the area curve to the specified string and returns the current class instance. If *value* is not specified, returns the current area curve.\n      @param {String} [*value* = \"linear\"]\n      @chainable\n  */\n  curve(_) {\n    return arguments.length ? (this._curve = _, this) : this._curve;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the defined accessor to the specified function and returns the current class instance. If *value* is not specified, returns the current defined accessor.\n      @param {Function} [*value*]\n      @chainable\n  */\n  defined(_) {\n    return arguments.length ? (this._defined = _, this) : this._defined;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the x accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current x accessor.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  x(_) {\n    if (!arguments.length) return this._x;\n    this._x = typeof _ === \"function\" ? _ : constant(_);\n    this._x0 = this._x;\n    return this;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the x0 accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current x0 accessor.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  x0(_) {\n    if (!arguments.length) return this._x0;\n    this._x0 = typeof _ === \"function\" ? _ : constant(_);\n    this._x = this._x0;\n    return this;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the x1 accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current x1 accessor.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  x1(_) {\n    return arguments.length ? (this._x1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._x1;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the y accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current y accessor.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  y(_) {\n    if (!arguments.length) return this._y;\n    this._y = typeof _ === \"function\" ? _ : constant(_);\n    this._y0 = this._y;\n    return this;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the y0 accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current y0 accessor.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  y0(_) {\n    if (!arguments.length) return this._y0;\n    this._y0 = typeof _ === \"function\" ? _ : constant(_);\n    this._y = this._y0;\n    return this;\n  }\n\n  /**\n      @memberof Area\n      @desc If *value* is specified, sets the y1 accessor to the specified function or number and returns the current class instance. If *value* is not specified, returns the current y1 accessor.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  y1(_) {\n    return arguments.length ? (this._y1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._y1;\n  }\n\n}\n","import {accessor, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Bar\n    @extends Shape\n    @desc Creates SVG areas based on an array of data.\n*/\nexport default class Bar extends Shape {\n\n  /**\n      @memberof Bar\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n\n    super(\"rect\");\n\n    this._name = \"Bar\";\n    this._height = constant(10);\n    this._labelBounds = (d, i, s) => ({\n      width: s.width,\n      height: s.height,\n      x: this._x1 !== null ? this._getX(d, i) : -s.width / 2,\n      y: this._x1 === null ? this._getY(d, i) : -s.height / 2\n    });\n    this._width = constant(10);\n    this._x = accessor(\"x\");\n    this._x0 = accessor(\"x\");\n    this._x1 = null;\n    this._y = constant(0);\n    this._y0 = constant(0);\n    this._y1 = accessor(\"y\");\n\n  }\n\n  /**\n      @memberof Bar\n      @desc Draws the bars.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"width\", (d, i) => this._x1 === null ? this._getWidth(d, i) : 0)\n      .attr(\"height\", (d, i) => this._x1 !== null ? this._getHeight(d, i) : 0)\n      .attr(\"x\", (d, i) => this._x1 === null ? -this._getWidth(d, i) / 2 : 0)\n      .attr(\"y\", (d, i) => this._x1 !== null ? -this._getHeight(d, i) / 2 : 0)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .call(this._applyPosition.bind(this));\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .call(this._applyPosition.bind(this));\n\n    this._exit.transition(this._transition)\n      .attr(\"width\", (d, i) => this._x1 === null ? this._getWidth(d, i) : 0)\n      .attr(\"height\", (d, i) => this._x1 !== null ? this._getHeight(d, i) : 0)\n      .attr(\"x\", (d, i) => this._x1 === null ? -this._getWidth(d, i) / 2 : 0)\n      .attr(\"y\", (d, i) => this._x1 !== null ? -this._getHeight(d, i) / 2 : 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Bar\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {height: this._getHeight(d, i), width: this._getWidth(d, i)};\n  }\n\n  /**\n      @memberof Bar\n      @desc Provides the default positioning to the <rect> elements.\n      @param {D3Selection} *elem*\n      @private\n  */\n  _applyPosition(elem) {\n    elem\n      .attr(\"width\", (d, i) => this._getWidth(d, i))\n      .attr(\"height\", (d, i) => this._getHeight(d, i))\n      .attr(\"x\", (d, i) => this._x1 !== null ? this._getX(d, i) : -this._getWidth(d, i) / 2)\n      .attr(\"y\", (d, i) => this._x1 === null ? this._getY(d, i) : -this._getHeight(d, i) / 2);\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the height of the <rect> by assessing the x and y properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getHeight(d, i) {\n    if (this._x1 !== null) return this._height(d, i);\n    return Math.abs(this._y1(d, i) - this._y(d, i));\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the width of the <rect> by assessing the x and y properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getWidth(d, i) {\n    if (this._x1 === null) return this._width(d, i);\n    return Math.abs(this._x1(d, i) - this._x(d, i));\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the x of the <rect> by assessing the x and width properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getX(d, i) {\n    const w = this._x1 === null ? this._x(d, i) : this._x1(d, i) - this._x(d, i);\n    if (w < 0) return w;\n    else return 0;\n  }\n\n  /**\n      @memberof Bar\n      @desc Calculates the y of the <rect> by assessing the y and height properties.\n      @param {Object} *d*\n      @param {Number} *i*\n      @private\n  */\n  _getY(d, i) {\n    const h = this._x1 !== null ? this._y(d, i) : this._y1(d, i) - this._y(d, i);\n    if (h < 0) return h;\n    else return 0;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the height accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.height;\n}\n  */\n  height(_) {\n    return arguments.length ? (this._height = typeof _ === \"function\" ? _ : constant(_), this) : this._height;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the width accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.width;\n}\n  */\n  width(_) {\n    return arguments.length ? (this._width = typeof _ === \"function\" ? _ : constant(_), this) : this._width;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the x0 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  x0(_) {\n    if (!arguments.length) return this._x0;\n    this._x0 = typeof _ === \"function\" ? _ : constant(_);\n    this._x = this._x0;\n    return this;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the x1 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  x1(_) {\n    return arguments.length ? (this._x1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._x1;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the y0 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n  */\n  y0(_) {\n    if (!arguments.length) return this._y0;\n    this._y0 = typeof _ === \"function\" ? _ : constant(_);\n    this._y = this._y0;\n    return this;\n  }\n\n  /**\n      @memberof Bar\n      @desc If *value* is specified, sets the y1 accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number|null} [*value*]\n      @chainable\n  */\n  y1(_) {\n    return arguments.length ? (this._y1 = typeof _ === \"function\" || _ === null ? _ : constant(_), this) : this._y1;\n  }\n\n}\n","import {accessor, assign, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Circle\n    @extends Shape\n    @desc Creates SVG circles based on an array of data.\n*/\nexport default class Circle extends Shape {\n\n  /**\n      @memberof Circle\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n    super(\"circle\");\n    this._labelBounds = (d, i, s) =>\n      ({width: s.r * 1.5, height: s.r * 1.5, x: -s.r * 0.75, y: -s.r * 0.75});\n    this._labelConfig = assign(this._labelConfig, {\n      textAnchor: \"middle\",\n      verticalAlign: \"middle\"\n    });\n    this._name = \"Circle\";\n    this._r = accessor(\"r\");\n  }\n\n  /**\n      @memberof Circle\n      @desc Provides the default positioning to the <rect> elements.\n      @private\n  */\n  _applyPosition(elem) {\n    elem\n      .attr(\"r\", (d, i) => this._r(d, i))\n      .attr(\"x\", (d, i) => -this._r(d, i) / 2)\n      .attr(\"y\", (d, i) => -this._r(d, i) / 2);\n  }\n\n  /**\n      @memberof Circle\n      @desc Draws the circles.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"r\", 0).attr(\"x\", 0).attr(\"y\", 0)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .call(this._applyPosition.bind(this));\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .call(this._applyPosition.bind(this));\n\n    this._exit.transition(this._transition)\n      .attr(\"r\", 0).attr(\"x\", 0).attr(\"y\", 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Circle\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {r: this._r(d, i)};\n  }\n\n  /**\n      @memberof Circle\n      @desc If *value* is specified, sets the radius accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.r;\n}\n  */\n  r(_) {\n    return arguments.length ? (this._r = typeof _ === \"function\" ? _ : constant(_), this) : this._r;\n  }\n\n}\n","import {extent} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport {interpolatePath} from \"d3-interpolate-path\";\nimport {select} from \"d3-selection\";\nimport * as paths from \"d3-shape\";\n\nimport {constant, merge} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Line\n    @extends Shape\n    @desc Creates SVG lines based on an array of data.\n*/\nexport default class Line extends Shape {\n\n  /**\n      @memberof Line\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._curve = \"linear\";\n    this._defined = d => d;\n    this._fill = constant(\"none\");\n    this._name = \"Line\";\n    this._path = paths.line();\n    this._stroke = constant(\"black\");\n    this._strokeWidth = constant(1);\n\n  }\n\n  /**\n      @memberof Line\n      @desc Filters/manipulates the data array before binding each point to an SVG group.\n      @param {Array} [*data* = the data array to be filtered]\n      @private\n  */\n  _dataFilter(data) {\n\n    const lines = nest().key(this._id).entries(data).map(d => {\n\n      d.data = merge(d.values);\n      d.i = data.indexOf(d.values[0]);\n\n      const x = extent(d.values, this._x);\n      d.xR = x;\n      d.width = x[1] - x[0];\n      d.x = x[0] + d.width / 2;\n\n      const y = extent(d.values, this._y);\n      d.yR = y;\n      d.height = y[1] - y[0];\n      d.y = y[0] + d.height / 2;\n\n      d.nested = true;\n      d.translate = [d.x, d.y];\n      d.__d3plusShape__ = true;\n\n      return d;\n    });\n\n    lines.key = d => d.key;\n    return lines;\n\n  }\n\n  /**\n      @memberof Line\n      @desc Draws the lines.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    const that = this;\n\n    this._path\n      .curve(paths[`curve${this._curve.charAt(0).toUpperCase()}${this._curve.slice(1)}`])\n      .defined(this._defined)\n      .x(this._x)\n      .y(this._y);\n\n    this._enter.append(\"path\")\n      .attr(\"transform\", d => `translate(${-d.xR[0] - d.width / 2}, ${-d.yR[0] - d.height / 2})`)\n      .attr(\"d\", d => this._path(d.values))\n      .call(this._applyStyle.bind(this));\n\n    this._update.select(\"path\").transition(this._transition)\n      .attr(\"transform\", d => `translate(${-d.xR[0] - d.width / 2}, ${-d.yR[0] - d.height / 2})`)\n      .attrTween(\"d\", function(d) {\n        return interpolatePath(select(this).attr(\"d\"), that._path(d.values));\n      })\n      .call(this._applyStyle.bind(this));\n\n    return this;\n\n  }\n\n  /**\n      @memberof Line\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {points: d.values.map(p => [this._x(p, i), this._y(p, i)])};\n  }\n\n  /**\n      @memberof Line\n      @desc If *value* is specified, sets the line curve to the specified string and returns the current class instance. If *value* is not specified, returns the current line curve.\n      @param {String} [*value* = \"linear\"]\n      @chainable\n  */\n  curve(_) {\n    return arguments.length ? (this._curve = _, this) : this._curve;\n  }\n\n  /**\n      @memberof Line\n      @desc If *value* is specified, sets the defined accessor to the specified function and returns the current class instance. If *value* is not specified, returns the current defined accessor.\n      @param {Function} [*value*]\n      @chainable\n  */\n  defined(_) {\n    return arguments.length ? (this._defined = _, this) : this._defined;\n  }\n\n}\n","const pi = Math.PI;\n\n/**\n    @function shapeEdgePoint\n    @desc Calculates the x/y position of a point at the edge of a shape, from the center of the shape, given a specified pixel distance and radian angle.\n    @param {Number} angle The angle, in radians, of the offset point.\n    @param {Number} distance The pixel distance away from the origin.\n    @returns {String} [shape = \"circle\"] The type of shape, which can be either \"circle\" or \"square\".\n*/\nexport default (angle, distance, shape = \"circle\") => {\n\n  if (angle < 0) angle = pi * 2 + angle;\n\n  if (shape === \"square\") {\n\n    const diagonal = 45 * (pi / 180);\n    let x = 0, y = 0;\n\n    if (angle < pi / 2) {\n      const tan = Math.tan(angle);\n      x += angle < diagonal ? distance : distance / tan;\n      y += angle < diagonal ? tan * distance : distance;\n    }\n    else if (angle <= pi) {\n      const tan = Math.tan(pi - angle);\n      x -= angle < pi - diagonal ? distance / tan : distance;\n      y += angle < pi - diagonal ? distance : tan * distance;\n    }\n    else if (angle < diagonal + pi) {\n      x -= distance;\n      y -= Math.tan(angle - pi) * distance;\n    }\n    else if (angle < 3 * pi / 2) {\n      x -= distance / Math.tan(angle - pi);\n      y -= distance;\n    }\n    else if (angle < 2 * pi - diagonal) {\n      x += distance / Math.tan(2 * pi - angle);\n      y -= distance;\n    }\n    else {\n      x += distance;\n      y -= Math.tan(2 * pi - angle) * distance;\n    }\n\n    return [x, y];\n\n  }\n  else if (shape === \"circle\") {\n    return [distance * Math.cos(angle), distance * Math.sin(angle)];\n  }\n  else return null;\n\n};\n","import pointDistance from \"./pointDistance\";\nimport shapeEdgePoint from \"./shapeEdgePoint\";\n\nconst pi = Math.PI;\n\n/**\n    @function path2polygon\n    @desc Transforms a path string into an Array of points.\n    @param {String} path An SVG string path, commonly the \"d\" property of a <path> element.\n    @param {Number} [segmentLength = 20] The lenght of line segments when converting curves line segments. Higher values lower computation time, but will result in curves that are more rigid.\n    @returns {Array}\n*/\nexport default (path, segmentLength = 20) => {\n\n  const poly = [],\n        regex = /([MLA])([^MLAZ]+)/ig;\n\n  let match = regex.exec(path);\n  while (match !== null) {\n\n    if ([\"M\", \"L\"].includes(match[1])) poly.push(match[2].split(\",\").map(Number));\n    else if (match[1] === \"A\") {\n\n      const points = match[2].split(\",\").map(Number);\n\n      const last = points.slice(points.length - 2, points.length),\n            prev = poly[poly.length - 1],\n            radius = points[0],\n            width = pointDistance(prev, last);\n\n      let angle = Math.acos((radius * radius + radius * radius - width * width) / (2 * radius * radius));\n      if (points[2]) angle = pi * 2 - angle;\n\n      const step = angle / (angle / (pi * 2) * (radius * pi * 2) / segmentLength);\n      const start = Math.atan2(-prev[1], -prev[0]) - pi;\n      let i = step;\n      while (i < angle) {\n        poly.push(shapeEdgePoint(points[4] ? start + i : start - i, radius));\n        i += step;\n      }\n      poly.push(last);\n\n    }\n    match = regex.exec(path);\n\n  }\n\n  return poly;\n\n};\n","import {accessor, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\nimport largestRect from \"../geom/largestRect\";\nimport path2polygon from \"../geom/path2polygon\";\n\n/**\n    @class Path\n    @extends Shape\n    @desc Creates SVG Paths based on an array of data.\n*/\nexport default class Path extends Shape {\n\n  /**\n      @memberof Path\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n    super(\"path\");\n    this._d = accessor(\"path\");\n    this._labelBounds = (d, i, aes) => {\n      const r = largestRect(aes.points, {angle: this._labelConfig.rotate ? this._labelConfig.rotate(d, i) : 0});\n      return {angle: r.angle, width: r.width, height: r.height, x: r.cx - r.width / 2, y: r.cy - r.height / 2};\n    };\n    this._name = \"Path\";\n    this._labelConfig = Object.assign(this._labelConfig, {\n      textAnchor: \"middle\",\n      verticalAlign: \"middle\"\n    });\n  }\n\n  /**\n      @memberof Path\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {points: path2polygon(this._d(d, i))};\n  }\n\n  /**\n      @memberof Path\n      @desc Draws the paths.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"opacity\", 0)\n      .attr(\"d\", this._d)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .attr(\"opacity\", 1);\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .attr(\"opacity\", 1)\n      .attr(\"d\", this._d);\n\n    this._exit.transition(this._transition)\n      .attr(\"opacity\", 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Path\n      @desc If *value* is specified, sets the \"d\" attribute accessor to the specified function or number and returns the current class instance.\n      @param {Function|String} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.path;\n}\n  */\n  d(_) {\n    return arguments.length ? (this._d = typeof _ === \"function\" ? _ : constant(_), this) : this._d;\n  }\n\n}\n","import {accessor, constant} from \"d3plus-common\";\n\nimport Shape from \"./Shape\";\n\n/**\n    @class Rect\n    @extends Shape\n    @desc Creates SVG rectangles based on an array of data. See [this example](https://d3plus.org/examples/d3plus-shape/getting-started/) for help getting started using the rectangle generator.\n*/\nexport default class Rect extends Shape {\n\n  /**\n      @memberof Rect\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Shape.\n      @private\n  */\n  constructor() {\n    super(\"rect\");\n    this._height = accessor(\"height\");\n    this._labelBounds = (d, i, s) =>\n      ({width: s.width, height: s.height, x: -s.width / 2, y: -s.height / 2});\n    this._name = \"Rect\";\n    this._width = accessor(\"width\");\n  }\n\n  /**\n      @memberof Rect\n      @desc Draws the rectangles.\n      @param {Function} [*callback*]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    this._enter\n      .attr(\"width\", 0).attr(\"height\", 0)\n      .attr(\"x\", 0).attr(\"y\", 0)\n      .call(this._applyStyle.bind(this))\n      .transition(this._transition)\n      .call(this._applyPosition.bind(this));\n\n    this._update.transition(this._transition)\n      .call(this._applyStyle.bind(this))\n      .call(this._applyPosition.bind(this));\n\n    this._exit.transition(this._transition)\n      .attr(\"width\", 0).attr(\"height\", 0)\n      .attr(\"x\", 0).attr(\"y\", 0);\n\n    return this;\n\n  }\n\n  /**\n      @memberof Rect\n      @desc Given a specific data point and index, returns the aesthetic properties of the shape.\n      @param {Object} *data point*\n      @param {Number} *index*\n      @private\n  */\n  _aes(d, i) {\n    return {width: this._width(d, i), height: this._height(d, i)};\n  }\n\n  /**\n      @memberof Rect\n      @desc Provides the default positioning to the <rect> elements.\n      @param {D3Selection} *elem*\n      @private\n  */\n  _applyPosition(elem) {\n    elem\n      .attr(\"width\", (d, i) => this._width(d, i))\n      .attr(\"height\", (d, i) => this._height(d, i))\n      .attr(\"x\", (d, i) => -this._width(d, i) / 2)\n      .attr(\"y\", (d, i) => -this._height(d, i) / 2);\n  }\n\n  /**\n      @memberof Rect\n      @desc If *value* is specified, sets the height accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.height;\n}\n  */\n  height(_) {\n    return arguments.length ? (this._height = typeof _ === \"function\" ? _ : constant(_), this) : this._height;\n  }\n\n  /**\n      @memberof Rect\n      @desc If *value* is specified, sets the width accessor to the specified function or number and returns the current class instance.\n      @param {Function|Number} [*value*]\n      @chainable\n      @example\nfunction(d) {\n  return d.width;\n}\n  */\n  width(_) {\n    return arguments.length ? (this._width = typeof _ === \"function\" ? _ : constant(_), this) : this._width;\n  }\n\n}\n"],"names":["accessor","constant","select","this","transition","const","super","TextBox","colorContrast","color","mouse","min","let","e","elem","attrize","selectAll","strip","assign","BaseClass","polygonContains","range","merge","area","polygonArea","extent","polygonCentroid","i","p1W","p2W","p1H","p2H","nest","paths.area","interpolatePath","paths.line","pi","tan"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBA,IAAqB,KAAK,GAOxB,cAAW,GAAG;EACd,IAAM,CAAC,SAAS,GAAG,GAAG,CAAC;EACvB,IAAM,CAAC,OAAO,GAAGA,qBAAQ,CAAC,QAAQ,CAAC,CAAC;EACpC,IAAM,CAAC,GAAG,GAAGA,qBAAQ,CAAC,IAAI,CAAC,CAAC;EAC5B,IAAM,CAAC,cAAc,GAAGC,qBAAQ,CAAC,MAAM,CAAC,CAAC;EACzC,IAAM,CAAC,OAAO,CAAC;EACf,IAAM,CAAC,IAAI,GAAGD,qBAAQ,CAAC,KAAK,CAAC,CAAC;EAC9B,IAAM,CAAC,MAAM,GAAGA,qBAAQ,CAAC,OAAO,CAAC,CAAC;EAClC,IAAM,CAAC,EAAE,GAAGA,qBAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;EAC7B,IAAM,CAAC,EAAE,GAAGA,qBAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;EAC5B;;;;;;;;AAQH,gBAAE,0BAAO,QAAQ,EAAE;;;;EAEjB,IAAM,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,IAAE,IAAI,CAAC,MAAM,CAACE,kBAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,OAAO,IAAK,MAAM,CAAC,oBAAe,CAAC,KAAK,CAAC,QAAQ,IAAK,MAAM,CAAC,qBAAgB,CAAC,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,GAAC;;EAE9L,IAAQ,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;;EAEpF,IAAQ,KAAK,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC;KACzC,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC;KAC7B,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;KAClB,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC;KAChB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;KACjB,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGC,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;KAC1D,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC,CAAC;;EAEjE,IAAQ,CAAC,GAAGC,uBAAU,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;QAC3C,IAAM,GAAG,IAAI;QACb,MAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;EAErC,MAAQ;KACH,IAAI,CAAC,YAAY,EAAE,IAAI,CAAC,IAAI,CAAC;KAC7B,KAAK,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC;KAC5C,UAAU,CAAC,CAAC,CAAC;KACb,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;KAClB,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGD,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAC1C,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAC5C,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAClC,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAClC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE;MACrB,IAAQ,KAAK,GAAGD,kBAAM,CAAC,IAAI,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MACrD,IAAQ,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;MACtF,IAAM,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE;QAClE,IAAQ,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;QAC1B,GAAK,CAAC,GAAG,GAAG,IAAI,CAAC;QACjB,GAAK,CAAC,WAAW,GAAG,WAAW,CAAC;QAChC,GAAK,CAAC,MAAM,GAAG,WAAW;UACxB,IAAQ,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;UAClD,MAAQ,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;UAC5B,MAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;UAC9B,IAAQ,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;UAC1C,OAAS,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;UAChC,KAAO,CAAC,IAAI,CAAC,YAAY,EAAE,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC,CAAC;SACzD,CAAC;OACH;KACF,CAAC,CAAC;;EAEP,MAAQ,CAAC,IAAI,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;KACxB,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGC,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAC1C,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAC5C,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAClC,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;KAClC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC;;EAEjC,IAAM,QAAQ,IAAE,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,GAAC;;EAE3D,OAAS,IAAI,CAAC;;EAEb;;;;;;;;AAQH,gBAAE,sBAAK,CAAC,EAAE;EACR,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;EAC/D;;;;;;;;AAQH,gBAAE,8BAAS,CAAC,EAAE;EACZ,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC;EACvE;;;;;;;;;;;;AAYH,gBAAE,0BAAO,CAAC,EAAE;EACV,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGF,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;EAC3G;;;;;;;;;;;;AAYH,gBAAE,kBAAG,CAAC,EAAE;EACN,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;EAC3D;;;;;;;;AAQH,gBAAE,wCAAc,CAAC,EAAE;EACjB,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC;EACzH;;;;;;;;AAQH,gBAAE,4BAAO,CAAC,EAAE;EACV,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAGC,kBAAM,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;EAC3E;;;;;;;;;;;;AAYH,gBAAE,oBAAI,CAAC,EAAE;EACP,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC;EAC7D;;;;;;;;;;;;AAYH,gBAAE,wBAAM,CAAC,EAAE;EACT,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGD,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;EACzG;;;;;;;;;;;;AAYH,gBAAE,gBAAE,CAAC,EAAE;EACL,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;EACjG;;;;;;;;;;;;AAYH,gBAAE,gBAAE,CAAC,EAAE;EACL,OAAS,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;CACjG;;AChOH;;;;;;;AAOA,+BAAgB,EAAE,EAAE,EAAE,EAAE;;EAEtBI,IAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QAClB,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;EAEzB,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;;CAE1B;;;;;;;;;ACLD,wBAAgB,EAAE,EAAE,EAAE,EAAE,SAAG,IAAI,CAAC,IAAI,CAAC,oBAAoB,CAAC,EAAE,EAAE,EAAE,CAAC,IAAC;;ACTlE;;;;;AAKA;;;;;AAiBA,IAAqB,KAAK;EAOxB,cAAW,CAAC,OAAa,EAAE;;qCAAR,GAAG;;;IAEpBC,iBAAK,KAAC,CAAC,CAAC;;IAER,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC3B,IAAI,CAAC,YAAY,GAAG;MAClB,QAAQ,EAAE,SAAS;MACnB,cAAc,YAAG,CAAC,EAAE,CAAC,EAAE;QACrBD,IAAM,CAAC,GAAGF,MAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC;QACvC,OAAO,CAAC,GAAG,CAAC,CAAC;OACd;KACF,CAAC;IACF,IAAI,CAAC,gBAAgB,GAAGF,qBAAQ,CAAC,KAAK,CAAC,CAAC;IACxC,IAAI,CAAC,qBAAqB,GAAG,IAAI,KAAK,EAAE,CAAC;IACzC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;IAChB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;IACrB,IAAI,CAAC,KAAK,GAAGA,qBAAQ,CAAC,OAAO,CAAC,CAAC;IAC/B,IAAI,CAAC,YAAY,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;;IAEhC,IAAI,CAAC,aAAa,GAAG,GAAG,CAAC;IACzB,IAAI,CAAC,GAAG,aAAI,CAAC,EAAE,CAAC,EAAE,SAAG,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,GAAG,CAAC,CAAC,EAAE,GAAG,IAAC,CAAC;IAChD,IAAI,CAAC,MAAM,GAAGA,qBAAQ,CAAC,KAAK,CAAC,CAAC;IAC9B,IAAI,CAAC,WAAW,GAAG,IAAIM,kBAAO,EAAE,CAAC;IACjC,IAAI,CAAC,YAAY,GAAG;MAClB,SAAS,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGC,yBAAa,CAACL,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,IAAC;MACpD,QAAQ,EAAE,EAAE;KACb,CAAC;IACF,IAAI,CAAC,aAAa,GAAGF,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACjC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;IACrB,IAAI,CAAC,QAAQ,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IAC5B,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC,MAAM,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IAC1B,IAAI,CAAC,eAAe,GAAGA,qBAAQ,CAAC,oBAAoB,CAAC,CAAC;IACtD,IAAI,CAAC,OAAO,aAAI,CAAC,EAAE,CAAC,EAAE,SAAGQ,aAAK,CAACN,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,IAAC,CAAC;IAC3D,IAAI,CAAC,gBAAgB,GAAGF,qBAAQ,CAAC,GAAG,CAAC,CAAC;IACtC,IAAI,CAAC,cAAc,GAAGA,qBAAQ,CAAC,MAAM,CAAC,CAAC;IACvC,IAAI,CAAC,cAAc,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IAClC,IAAI,CAAC,YAAY,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IAChC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;IACxB,IAAI,CAAC,WAAW,GAAGA,qBAAQ,CAAC,OAAO,CAAC,CAAC;IACrC,IAAI,CAAC,aAAa,GAAGA,qBAAQ,CAAC,oBAAoB,CAAC,CAAC;IACpD,IAAI,CAAC,cAAc,GAAGA,qBAAQ,CAAC,KAAK,CAAC,CAAC;;IAEtC,IAAI,CAAC,EAAE,GAAGD,qBAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;IAC3B,IAAI,CAAC,EAAE,GAAGA,qBAAQ,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;;;;;;sCAE5B;;;;;;;;;kBASD,wBAAO;IACL,OAAO,EAAE,CAAC;IACX;;;;;;;;kBAQD,sCAAa,OAAO,EAAE;;;;IAEpBK,IAAM,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;8BACG;MACtC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,YAAG,CAAC,EAAE,CAAC,EAAE;QAC3B,IAAI,CAACF,MAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAE,SAAO;QACjC,IAAI,CAAC,CAAC,CAAC,KAAK,KAAK,CAAC,IAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;QAC5B,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,EAAE;UACxBE,IAAM,MAAM,GAAGK,iBAAK,CAACP,MAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;gBACnC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,WAAC,GAAE,SAAG,aAAa,CAAC,MAAM,EAAE,CAACA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAC,CAAC,CAAC;UACxF,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAACQ,WAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;SAC3C;QACDR,MAAI,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAACA,MAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;OACtC,CAAC,CAAC;;;IAVL,KAAKS,IAAIC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,YAWrC;;IAEF;;;;;;;;kBAQD,sCAAaC,OAAI,EAAE;;;;IAEjBT,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElB,IAAIS,OAAI,CAAC,IAAI,EAAE,IAAIA,OAAI,CAAC,IAAI,EAAE,CAAC,OAAO,KAAK,GAAG,IAAEA,OAAI,GAAGA,OAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAC;;;;;;;;IAQ3E,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE;MACxB,OAAO,OAAO,IAAI,KAAK,UAAU,GAAG,IAAI;UACpC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,MAAM;YAC3B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAClB;;IAEDT,IAAM,WAAW,GAAG,EAAE,CAAC;IACvB,KAAKA,IAAM,GAAG,IAAIF,MAAI,CAAC,YAAY,EAAE;MACnC,IAAI,EAAE,CAAC,cAAc,CAAC,IAAI,CAACA,MAAI,CAAC,YAAY,EAAE,GAAG,CAAC,EAAE;QAClD,WAAW,CAAC,GAAG,CAAC,GAAG,UAAU,CAAC,IAAI,CAACA,MAAI,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC;OAC5D;KACF;;IAEDW,OAAI,CAAC,UAAU,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAI,CAACC,oBAAO,EAAE,WAAW,CAAC,CAAC;;IAE1D;;;;;;;;kBAQD,oCAAYD,OAAI,EAAE;;IAEhBT,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElB,IAAIS,OAAI,CAAC,IAAI,EAAE,IAAIA,OAAI,CAAC,IAAI,EAAE,CAAC,OAAO,KAAK,GAAG,IAAEA,OAAI,GAAGA,OAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAC;;;;;;;;IAQ3E,SAAS,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE;MACxB,OAAO,OAAO,IAAI,KAAK,UAAU,GAAG,IAAI;UACpC,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,MAAM;YAC3B,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YAClD,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;KAClB;;IAEDA,OAAI;OACD,IAAI,CAAC,MAAM,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACzC,IAAI,CAAC,cAAc,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;OACxD,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;OACrC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;OACrC,IAAI,CAAC,QAAQ,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;OAC7C,IAAI,CAAC,kBAAkB,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;OAChE,IAAI,CAAC,gBAAgB,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;OAC5D,IAAI,CAAC,gBAAgB,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;OAC5D,IAAI,CAAC,cAAc,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;OACxD,IAAI,CAAC,eAAe,EAAE,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;IAC/D;;;;;;;;kBAQD,4CAAgBA,OAAI,EAAE;;;;IAEpBA,OAAI;OACD,IAAI,CAAC,WAAW,YAAG,CAAC,EAAE,CAAC,EAAE,oCACZ,CAAC,CAAC,eAAe;MAC/B,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS;QACtBX,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,YAAKA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;QAC9CA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,YAAKA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAE,0BACzB,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,KAAK,IAAIA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC;IACnEA,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAC,UAAG,CAAC,CAAC;IACvB;;;;;;;;kBAQD,sCAAa,MAAM,EAAE;IACnB,iBAAQ,CAAC,EAAE,CAAC,EAAE,SAAG,MAAM,CAAC,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,IAAC,CAAC;IACtF;;;;;;;kBAOD,0CAAgB;;IAEdE,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElB,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,+CAA+C,CAAC;OACnE,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE;;QAEnB,IAAI,CAAC,CAAC,IAAE,CAAC,GAAG,EAAE,GAAC;QACf,IAAI,CAAC,CAAC,CAAC,UAAU,IAAE,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAC;QAClDA,IAAM,MAAM,GAAG,CAAC,CAAC,UAAU,CAAC;;QAE5B,IAAIH,kBAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAE,CAAC,GAAG,CAAC,CAAC,IAAI,GAAC;QACvD,IAAI,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,UAAU,EAAE;UACrC,OAAO,CAAC,KAAK,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,UAAU,CAAC,EAAE;YAC/C,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACR,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;WACZ;SACF;eACI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,GAAC;;QAE/BG,IAAM,KAAK,GAAG,CAAC,IAAI,CAAC,OAAO,IAAI,OAAO,IAAI,CAAC,OAAO,KAAK,UAAU,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC;QAC7H,IAAI,KAAK,KAAK,IAAI,CAAC,UAAU,EAAE;UAC7B,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;UACxB,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;YACnD,IAAI,MAAM,KAAK,KAAK,IAAEH,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC;mBAChEA,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC;WACtD;SACF;;OAEF,CAAC,CAAC;;IAEL,IAAI,CAAC,YAAY,EAAE,CAAC;IACpB,IAAI,CAAC,aAAa,EAAE,CAAC;;IAErB,IAAI,CAAC,MAAM,CAAC,SAAS,iBAAa,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,YAAQ;OAC7G,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;;IAE/F;;;;;;;kBAOD,wCAAe;;IAEbG,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElB,IAAI,CAAC,MAAM,CAAC,SAAS,iBAAa,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,yBAAmB,IAAI,CAAC,MAAK,aAAS;OAC3I,SAAS,CAAC,+CAA+C,CAAC;OAC1D,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE;;QAEnB,IAAI,CAAC,CAAC,IAAE,CAAC,GAAG,EAAE,GAAC;QACf,IAAI,CAAC,CAAC,CAAC,UAAU,IAAE,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAC;QAClDA,IAAM,MAAM,GAAG,CAAC,CAAC,UAAU,CAAC;;QAE5B,IAAIH,kBAAM,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,gBAAgB,CAAC,IAAE,CAAC,GAAG,CAAC,CAAC,IAAI,GAAC;QACvD,IAAI,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,UAAU,EAAE;UACrC,OAAO,CAAC,KAAK,CAAC,CAAC,eAAe,IAAI,CAAC,CAAC,UAAU,CAAC,EAAE;YAC/C,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACR,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;WACZ;SACF;eACI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,GAAC;;QAE/BG,IAAM,KAAK,GAAG,CAAC,IAAI,CAAC,MAAM,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,UAAU,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;QACzH,IAAI,KAAK,KAAK,IAAI,CAAC,UAAU,IAAE,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,GAAC;;OAExD,CAAC,CAAC;;IAEL,IAAI,CAAC,YAAY,EAAE,CAAC;IACpB,IAAI,CAAC,aAAa,EAAE,CAAC;;IAErB,IAAI,CAAC,MAAM,CAAC,SAAS,iBAAa,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,0BAAoB,IAAI,CAAC,MAAK,YAAQ;OAC7G,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC;;IAE/F;;;;;;;kBAOD,wCAAe;;;;IAEbA,IAAM,SAAS,GAAG,EAAE,CAAC;;IAErB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;OACnC,OAAO,WAAE,KAAK,EAAE,CAAC,EAAE;;QAElBA,IAAM,GAAG,GAAGF,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;;QAEhC,IAAI,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,MAAM,EAAE;;UAEpCS,IAAI,CAAC,GAAG,KAAK,CAAC;UACd,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE;YAC7C,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACpB,CAAC,GAAGT,MAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;WAC3B;;UAEDE,IAAM,MAAM,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,MAAM;gBACvC,GAAG,GAAGF,MAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,CAAC;gBACjC,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;;UAE5C,IAAI,GAAG,EAAE;;YAEPS,IAAI,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBAChDT,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;gBACxC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;oBAChDA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;YAE7C,IAAI,GAAG,CAAC,CAAC,IAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAC;YACtB,IAAI,GAAG,CAAC,CAAC,IAAE,CAAC,IAAI,GAAG,CAAC,CAAC,GAAC;;YAEtB,IAAI,CAAC,CAAC,eAAe,EAAE;cACrB,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;cACX,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACT;;YAED,SAAS,CAAC,IAAI,CAAC;cACb,UAAU,EAAE,IAAI;cAChB,IAAI,EAAE,CAAC;sBACP,MAAM;iBACN,CAAC;cACD,EAAE,EAAEA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;mBAClB,GAAG;qBACH,KAAK;cACL,CAAC,EAAE,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC;cACjB,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC;aACnB,CAAC,CAAC;;WAEJ;;SAEF;;OAEF,CAAC,CAAC;;IAEL,IAAI,CAAC,qBAAqB;OACvB,IAAI,CAAC,SAAS,CAAC;OACf,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;OACxB,aAAa,CAAC,MAAM,CAAC;OACrB,MAAM,CAACW,iBAAI,iBAAa,IAAI,CAAC,MAAK,cAAU,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OACrI,MAAM,EAAE,CAAC;;IAEb;;;;;;;kBAOD,0CAAgB;;;;IAEdT,IAAM,SAAS,GAAG,EAAE,CAAC;;IAErB,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE;OACnC,OAAO,WAAE,KAAK,EAAE,CAAC,EAAE;;QAElBO,IAAI,CAAC,GAAG,KAAK,CAAC;QACd,IAAI,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE;UAC7C,CAAC,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;UACpB,CAAC,GAAGT,MAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;SAC3B;;QAEDS,IAAI,MAAM,GAAGT,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;QAE/B,IAAIA,MAAI,CAAC,YAAY,IAAI,MAAM,KAAK,KAAK,IAAI,MAAM,KAAK,SAAS,IAAI,MAAM,KAAK,IAAI,EAAE;;UAEpFE,IAAM,MAAM,GAAGF,MAAI,CAAC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAEA,MAAI,CAAC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC;;UAE5D,IAAI,MAAM,EAAE;;YAEV,IAAI,MAAM,CAAC,WAAW,KAAK,KAAK,IAAE,MAAM,GAAG,CAAC,MAAM,CAAC,GAAC;;YAEpDE,IAAM,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;sBAChDF,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;kBACxC,CAAC,GAAG,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC;sBAChDA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;YAE/C,IAAI,CAAC,CAAC,eAAe,EAAE;cACrB,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;cACX,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aACT;;YAEDE,IAAM,OAAO,GAAGF,MAAI,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;YAEzC,KAAKS,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;cAEtCP,IAAM,CAAC,GAAG,MAAM,CAAC,WAAW,KAAK,KAAK,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC;oBACxE,CAAC,GAAG,OAAO,CAAC,WAAW,KAAK,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC;;cAE/D,SAAS,CAAC,IAAI,CAAC;gBACb,UAAU,EAAE,IAAI;gBAChB,IAAI,EAAE,CAAC;gBACP,MAAM,EAAE,CAAC,CAAC,MAAM,GAAG,CAAC,GAAG,CAAC;mBACxB,CAAC;gBACD,EAAE,IAAKF,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,WAAK,CAAC,CAAE;gBAC5B,CAAC,EAAE,MAAM,CAAC,KAAK,KAAK,SAAS,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC;gBAChD,IAAI,EAAE,MAAM,CAAC,CAAC,CAAC;gBACf,KAAK,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,GAAG,CAAC;gBACtB,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;gBACd,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC;eACf,CAAC,CAAC;;aAEJ;;WAEF;;SAEF;;OAEF,CAAC,CAAC;;IAEL,IAAI,CAAC,WAAW;OACb,IAAI,CAAC,SAAS,CAAC;OACf,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;OACxB,aAAa,CAAC,MAAM,CAAC;OACrB,MAAM,WAAC,GAAE,SAAG,CAAC,CAAC,IAAI,CAAC,IAAC,CAAC;OACrB,MAAM,CAACW,iBAAI,iBAAa,IAAI,CAAC,MAAK,aAAS,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OACpI,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;OACzB,MAAM,EAAE,CAAC;;IAEb;;;;;;;;kBAQD,0BAAO,QAAQ,EAAE;;;;IAEf,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,EAAE;MAC3B,IAAI,CAAC,MAAM,CAACZ,kBAAM,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;SACrC,KAAK,CAAC,OAAO,IAAK,MAAM,CAAC,oBAAe;SACxC,KAAK,CAAC,QAAQ,IAAK,MAAM,CAAC,qBAAgB;SAC1C,KAAK,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;KACtC;;IAED,IAAI,CAAC,WAAW,GAAGE,uBAAU,EAAE,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;;IAEzDQ,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,EAAE,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;IACtC,IAAI,IAAI,CAAC,WAAW,EAAE;MACpB,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;MAC9B,IAAI,IAAI,CAAC,GAAG,IAAE,GAAG,GAAG,IAAI,CAAC,GAAG,GAAC;KAC9B;;IAED,IAAI,IAAI,CAAC,KAAK,IAAE,IAAI,GAAG,IAAI,CAAC,IAAI,WAAE,CAAC,EAAE,CAAC,EAAE,SAAGT,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,IAAC,CAAC,GAAC;;IAEvHa,qBAAS,iBAAa,IAAI,CAAC,MAAK,8BAAwB,IAAI,CAAC,MAAK,kBAAc,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;MAChG,IAAI,CAAC,IAAI,CAAC,CAAC,UAAU,IAAE,CAAC,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAC;aACjD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,GAAC;KACxC,CAAC,CAAC;;;IAGH,IAAI,CAAC,MAAM,GAAGF,iBAAI,iBAAa,IAAI,CAAC,MAAK,cAAU,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;IAC3ET,IAAM,MAAM,GAAG,IAAI,CAAC,OAAO,GAAGS,iBAAI,iBAAa,IAAI,CAAC,MAAK,cAAU,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,MAAM,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,CAAC,CAAC;OACjJ,SAAS,gBAAY,IAAI,CAAC,KAAK,GAAG;OAClC,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;;;IAGnB,MAAM,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACxC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;;IAGzCT,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC;OAC7D,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,oCAA0BF,MAAI,CAAC,MAAK,oBAAcc,gBAAK,CAACd,MAAI,CAAC,YAAY,CAACA,MAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAE,CAAC;OAClH,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACrC,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;;IAErDE,IAAM,WAAW,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;;IAExC,WAAW;OACR,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;OAChE,IAAI,CAAC,gBAAgB,EAAE,MAAM,CAAC;OAC9B,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,SAAS,EAAE,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;OACjD,UAAU,EAAE;OACZ,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;;;IAGjCA,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC,IAAI,EAAE,CAAC;IACxC,IAAI,CAAC,UAAU,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,MAAM,EAAE,CAAC;;IAEjD,IAAI,CAAC,YAAY,EAAE,CAAC;IACpB,IAAI,CAAC,aAAa,EAAE,CAAC;;IAErB,IAAI,CAAC,WAAW,GAAGS,iBAAI,iBAAa,IAAI,CAAC,MAAK,cAAU,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;IAC/E,IAAI,CAAC,YAAY,GAAGA,iBAAI,iBAAa,IAAI,CAAC,MAAK,eAAW,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;;IAEjFT,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElBA,IAAM,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,CAAC;OACtD,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAE,EAAE,GAAG,CAAC,CAAC;;IAExC,QAAQ,CAAC,KAAK,EAAE,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC1C,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEzCA,IAAM,QAAQ,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;OAC7C,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,yCAA+BY,gBAAK,CAACd,MAAI,CAAC,YAAY,CAACA,MAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAE,CAAC;OAC/F,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC;OAC3B,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAEzCE,IAAM,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC;OACxC,IAAI,CAAC,SAAS,CAAC,EAAE;QAChBA,IAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACvF,OAAO,CAAC,GAAGH,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAACa,oBAAO,EAAE,CAAC,CAAC,GAAGb,kBAAM,CAAC,IAAI,CAAC,CAAC,MAAM,EAAE,CAAC;OAClE,CAAC,CAAC;;IAEL,QAAQ,CAAC,IAAI,EAAE,CAAC,MAAM,EAAE,CAAC;;IAEzB,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,GAAG,UAAU,GAAG,WAAW,CAAC,CAAC;;IAE5D,UAAU,aAAI;MACZ,IAAIC,MAAI,CAAC,OAAO,IAAEA,MAAI,CAAC,aAAa,EAAE,GAAC;WAClC,IAAIA,MAAI,CAAC,MAAM,IAAEA,MAAI,CAAC,YAAY,EAAE,GAAC;MAC1C,IAAI,QAAQ,IAAE,QAAQ,EAAE,GAAC;KAC1B,EAAE,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC;;IAEzB,OAAO,IAAI,CAAC;;IAEb;;;;;;;;kBAQD,0BAAO,CAAC,EAAE;;IAER,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,KAAK,SAAS,IAAE,OAAO,IAAI,CAAC,OAAO,GAAC;IAC9D,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;IACjB,IAAI,IAAI,CAAC,MAAM,EAAE;MACf,IAAI,CAAC,YAAY,EAAE,CAAC;MACpB,IAAI,CAAC,aAAa,EAAE,CAAC;MACrB,IAAI,CAAC,aAAa,EAAE,CAAC;KACtB;IACD,OAAO,IAAI,CAAC;;IAEb;;;;;;;;kBAQD,wCAAc,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC;IACjF;;;;;;;;kBAQD,oCAAY,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,GAAGe,mBAAM,CAAC,EAAE,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC;IAC5G;;;;;;;;kBAQD,4CAAgB,CAAC,EAAE;IACjB,OAAO,SAAS,CAAC,MAAM;SAClB,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGjB,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI;QACxE,IAAI,CAAC,gBAAgB,CAAC;IAC3B;;;;;;;;kBAQD,sBAAK,CAAC,EAAE;IACN,OAAO,SAAS,CAAC,MAAM;SAClB,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI;QACrB,IAAI,CAAC,KAAK,CAAC;IAChB;;;;;;;;kBAQD,8BAAS,CAAC,EAAE;IACV,OAAO,SAAS,CAAC,MAAM;SAClB,IAAI,CAAC,SAAS,GAAG,CAAC,EAAE,IAAI;QACzB,IAAI,CAAC,SAAS,CAAC;IACpB;;;;;;;;kBAQD,sBAAK,CAAC,EAAE;IACN,OAAO,SAAS,CAAC,MAAM;SAClB,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI;QAC7D,IAAI,CAAC,KAAK,CAAC;IAChB;;;;;;;;kBAQD,oCAAY,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM;SAClB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI;QACpE,IAAI,CAAC,YAAY,CAAC;IACvB;;;;;;;;kBAQD,wBAAM,CAAC,EAAE;;IAEP,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,CAAC,KAAK,KAAK,CAAC,IAAE,OAAO,IAAI,CAAC,MAAM,GAAC;IAC1D,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;IAChB,IAAI,IAAI,CAAC,MAAM,EAAE;MACf,IAAI,CAAC,YAAY,EAAE,CAAC;MACpB,IAAI,CAAC,aAAa,EAAE,CAAC;MACrB,IAAI,CAAC,YAAY,EAAE,CAAC;KACrB;IACD,OAAO,IAAI,CAAC;;IAEb;;;;;;;;kBAQD,sCAAa,CAAC,EAAE;IACd,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC;IAC/E;;;;;;;;;;;;;;;;;kBAiBD,4BAAQ,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;IAC7G;;;;;;;;kBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;IAC3D;;;;;;;;kBAQD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;IACzG;;;;;;;;;;;;;;;;;kBAiBD,oCAAY,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC;IACrH;;;;;;;;kBAQD,oCAAY,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,GAAGiB,mBAAM,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC;IACxG;;;;;;;;kBAQD,sCAAa,CAAC,EAAE;IACd,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGjB,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC;IACvH;;;;;;;;kBAQD,4BAAQ,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;IAC7G;;;;;;;;kBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;IACnG;;;;;;;;kBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;IACnG;;;;;;;;kBAQD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;IACzG;;;;;;;;kBAQD,4BAAO,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAGC,kBAAM,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;IAC3E;;;;;;;;;;;;kBAYD,0CAAe,CAAC,EAAE;IAChB,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGD,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,eAAe,CAAC;IAC3H;;;;;;;;kBAQD,sBAAK,CAAC,EAAE;IACN,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC;IAC/D;;;;;;;;kBAQD,0BAAO,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;IAC3G;;;;;;;;kBAQD,4CAAgB,CAAC,EAAE;IACjB,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,gBAAgB,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,gBAAgB,CAAC;IAC7H;;;;;;;;kBAQD,wCAAc,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC;IACzH;;;;;;;;kBAQD,wCAAc,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC;IACzH;;;;;;;;kBAQD,oCAAY,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,YAAY,CAAC;IACrH;;;;;;;;kBAQD,kCAAW,CAAC,EAAE;IACZ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,WAAW,CAAC;IACnH;;;;;;;;kBAQD,sCAAa,CAAC,EAAE;IACd,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,aAAa,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,aAAa,CAAC;IACvH;;;;;;;;kBAQD,wCAAc,CAAC,EAAE;IACf,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,cAAc,CAAC;IACzH;;;;;;;;;;;;kBAYD,gBAAE,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;IACjG;;;;;;;;;;;;kBAYD,gBAAE,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;GACjG;;;EA14BgCkB;;ACtBnC;;;;;;;;;AASA,AAAe,0BAAS,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;;;EAGtCd,IAAM,GAAG,GAAG,IAAI,CAAC;;;EAGjBA,IAAM,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACnB,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACnB,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACnB,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;EAE1BA,IAAM,KAAK,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;;EAEpC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,IAAE,OAAO,IAAI,GAAC;;EAEvCA,IAAM,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;QACtC,MAAM,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;EAE7CA,IAAM,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,IAAI,KAAK;QAC1C,EAAE,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC;;EAEjD,OAAO,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;;CAEjB;;AChCD;;;;;;;;AAQA,AAAe,4BAAS,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE;;EAEjCA,IAAM,GAAG,GAAG,IAAI;MAAG;MAAI,EAAE,QAAM;;EAE/B,OAAO,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG;WACtE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC;;CAElF;;;;;;;;;;;ACHD,AAAe,2BAAS,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;;EAEtCA,IAAM,CAAC,GAAG,gBAAgB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;EAC3C,IAAI,CAAC,CAAC,IAAE,OAAO,KAAK,GAAC;EACrB,OAAO,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,IAAI,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;;CAEvE;;;;;;;;;ACPD,AAAe,uBAAS,KAAK,EAAE,KAAK,EAAE;;EAEpCO,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;EACZP,IAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;EACxBA,IAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC;EACxBO,IAAI,EAAE,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;;EAEvB,OAAO,EAAE,EAAE,GAAG,EAAE,EAAE;;IAEhBP,IAAM,EAAE,GAAG,EAAE,CAAC;IACd,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC;;IAEfO,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;IACZA,IAAI,EAAE,GAAG,KAAK,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACvB,OAAO,EAAE,EAAE,GAAG,EAAE,EAAE;MAChBP,IAAM,EAAE,GAAG,EAAE,CAAC;MACd,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC;MACf,IAAI,iBAAiB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,IAAE,OAAO,KAAK,GAAC;KACrD;GACF;;EAED,OAAOe,yBAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;;CAEzC;;;;;;;;;;ACtBD,AAAe,wBAAS,IAAI,EAAE,MAAM,EAAE,KAAS,EAAE;+BAAN,GAAG;;;EAE5Cf,IAAM,GAAG,GAAG,IAAI,CAAC;EACjB,MAAM,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;EAChF,IAAO;MAAI,EAAE,aAAW;EACxBA,IAAM,aAAa,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;;EAEnEO,IAAI,GAAG,GAAG,CAAC,CAAC;EACZ,IAAI,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,GAAG,IAAE,GAAG,GAAG,CAAC,GAAC;EACnDA,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;EACXP,IAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;EACtBO,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;EACpBA,IAAI,aAAa,GAAG,MAAM,CAAC,SAAS,CAAC;EACrCA,IAAI,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC;EACtCA,IAAI,gBAAgB,GAAG,IAAI,CAAC;EAC5BA,IAAI,iBAAiB,GAAG,IAAI,CAAC;EAC7B,OAAO,EAAE,CAAC,GAAG,CAAC,EAAE;IACdP,IAAM,CAAC,GAAG,CAAC,CAAC;IACZ,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IACZA,IAAM,CAAC,GAAG,gBAAgB,CAAC,MAAM,EAAE,aAAa,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACxD,IAAI,CAAC,IAAI,kBAAkB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE;MACpCA,IAAM,MAAM,GAAG,oBAAoB,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;MAC/C,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE;QACxB,IAAI,MAAM,GAAG,aAAa,EAAE;UAC1B,aAAa,GAAG,MAAM,CAAC;UACvB,gBAAgB,GAAG,CAAC,CAAC;SACtB;OACF;WACI,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE;QAC7B,IAAI,MAAM,GAAG,cAAc,EAAE;UAC3B,cAAc,GAAG,MAAM,CAAC;UACxB,iBAAiB,GAAG,CAAC,CAAC;SACvB;OACF;KACF;GACF;;EAED,OAAO,CAAC,gBAAgB,EAAE,iBAAiB,CAAC,CAAC;;CAE9C;;ACnDD;;;;;;;;AAQA,AAAe,qBAAS,CAAC,EAAE,KAAK,EAAE,MAAe,EAAE;iCAAX,GAAG,CAAC,CAAC,EAAE,CAAC;;;EAE9CA,IAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;QAC1B,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC;QAC1B,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC;QAC3B,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;;EAElC,OAAO;IACL,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC;IACrD,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,MAAM,CAAC,CAAC,CAAC;GACtD,CAAC;;CAEH;;;;;;;;;;ACVD,wBAAgB,IAAI,EAAE,KAAK,EAAE,MAAe,EAAE;mCAAX,GAAG,CAAC,CAAC,EAAE,CAAC;;WAAM,IAAI,CAAC,GAAG,WAAC,GAAE,SAAG,WAAW,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,IAAC;CAAC;;;;;;;;;ACD7F,SAAS,YAAY,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE;;EAE/BO,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;MACT,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;EAEdA,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;MACd,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;;EAEnB,IAAI,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,EAAE;;IAExBP,IAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,CAAC;;IAEpE,IAAI,CAAC,GAAG,CAAC,EAAE;MACT,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;MACV,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;;KAEX;SACI,IAAI,CAAC,GAAG,CAAC,EAAE;MACd,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;MACZ,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;KACb;;GAEF;;EAED,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACd,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;;EAEd,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC;;CAE1B;;;;;;;;AAQD,SAAS,kBAAkB,CAAC,IAAI,EAAE,WAAW,EAAE;;EAE7CO,IAAI,KAAK;MACL,SAAS,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;EAExBP,IAAM,SAAS,GAAG,CAAC,SAAS,CAAC,CAAC;;EAE9B,KAAKO,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;IAC/C,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;IAEhB,IAAI,oBAAoB,CAAC,KAAK,EAAE,SAAS,CAAC,GAAG,WAAW,EAAE;MACxD,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;MACtB,SAAS,GAAG,KAAK,CAAC;KACnB;GACF;;EAED,IAAI,SAAS,KAAK,KAAK,IAAE,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,GAAC;;EAE/C,OAAO,SAAS,CAAC;CAClB;;;;;;;;;;AAUD,SAAS,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,EAAE;;EAElEA,IAAI,KAAK,EAAE,SAAS,GAAG,WAAW,CAAC;;EAEnC,KAAKA,IAAI,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,EAAE;IACrCP,IAAM,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAE9D,IAAI,MAAM,GAAG,SAAS,EAAE;MACtB,KAAK,GAAG,CAAC,CAAC;MACV,SAAS,GAAG,MAAM,CAAC;KACpB;GACF;;EAED,IAAI,SAAS,GAAG,WAAW,EAAE;IAC3B,IAAI,KAAK,GAAG,KAAK,GAAG,CAAC,IAAE,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,CAAC,GAAC;IACnF,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAC7B,IAAI,IAAI,GAAG,KAAK,GAAG,CAAC,IAAE,cAAc,CAAC,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,CAAC,GAAC;GAClF;CACF;;;;;;;;AAQD,SAAS,sBAAsB,CAAC,IAAI,EAAE,WAAW,EAAE;EACjDA,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;;EAE7BA,IAAM,UAAU,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7B,cAAc,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,CAAC,CAAC;EACvD,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;EAE5B,OAAO,UAAU,CAAC;CACnB;;;;;;;;;;;AAWD,mBAAgB,IAAI,EAAE,SAAa,EAAE,cAAsB,EAAE;uCAA9B,GAAG;iDAAiB,GAAG;;;EAEpD,IAAI,IAAI,CAAC,MAAM,IAAI,CAAC,IAAE,OAAO,IAAI,GAAC;;EAElCA,IAAM,WAAW,GAAG,SAAS,GAAG,SAAS,CAAC;;EAE1C,IAAI,GAAG,cAAc,GAAG,IAAI,GAAG,kBAAkB,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;EACrE,IAAI,GAAG,sBAAsB,CAAC,IAAI,EAAE,WAAW,CAAC,CAAC;;EAEjD,OAAO,IAAI,CAAC;;CAEb;;;ACzHDA,IAAM,eAAe,GAAG,GAAG,CAAC;AAC5BA,IAAM,SAAS,GAAG,CAAC,CAAC;;AAEpBA,IAAM,SAAS,GAAG,EAAE,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCrB,AAAe,qBAAS,IAAI,EAAE,OAAY,EAAE;mCAAP,GAAG;;;EAEtC,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;IACnB,IAAI,OAAO,CAAC,OAAO,IAAE,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,IAAI,CAAC,GAAC;IAClF,OAAO,IAAI,CAAC;GACb;;;EAGDA,IAAM,MAAM,GAAG,EAAE,CAAC;;;EAGlB,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC;IACtB,KAAK,EAAEgB,aAAK,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,SAAS,EAAE,SAAS,CAAC;IAC5C,KAAK,EAAE,IAAI;IACX,cAAc,EAAE,EAAE;IAClB,cAAc,EAAE,CAAC;IACjB,SAAS,EAAE,CAAC;IACZ,QAAQ,EAAE,CAAC;IACX,MAAM,EAAE,EAAE;IACV,SAAS,EAAE,IAAI;IACf,OAAO,EAAE,KAAK;GACf,EAAE,OAAO,CAAC,CAAC;;EAEZhB,IAAM,MAAM,GAAG,OAAO,CAAC,KAAK,YAAY,KAAK,GAAG,OAAO,CAAC,KAAK;MACzD,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC;MACnD,OAAO,OAAO,CAAC,KAAK,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;MACpF,EAAE,CAAC;;EAEPA,IAAM,YAAY,GAAG,OAAO,CAAC,WAAW,YAAY,KAAK,GAAG,OAAO,CAAC,WAAW;MAC3E,OAAO,OAAO,CAAC,WAAW,KAAK,QAAQ,GAAG,CAAC,OAAO,CAAC,WAAW,CAAC;MAC/D,OAAO,OAAO,CAAC,WAAW,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;MACtG,EAAE,CAAC;;EAEPA,IAAM,OAAO,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,MAAM,YAAY,KAAK;MAC7D,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,YAAY,KAAK,GAAG,OAAO,CAAC,MAAM;MACnD,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;;EAE1BO,IAAI,WAAW,CAAC;EAChB,IAAI,OAAO,CAAC,KAAK,EAAE;IACjB,WAAW,GAAGU,aAAK,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IACpC,WAAW,IAAI,OAAI,OAAO,CAAC,cAAc,CAAE,CAAC;IAC5C,WAAW,IAAI,OAAI,OAAO,CAAC,cAAc,CAAE,CAAC;IAC5C,WAAW,IAAI,OAAI,OAAO,CAAC,SAAS,CAAE,CAAC;IACvC,WAAW,IAAI,OAAI,OAAO,CAAC,QAAQ,CAAE,CAAC;IACtC,WAAW,IAAI,OAAI,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAC;IACtC,WAAW,IAAI,OAAI,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CAAC;IACvC,IAAI,SAAS,CAAC,WAAW,CAAC,IAAE,OAAO,SAAS,CAAC,WAAW,CAAC,GAAC;GAC3D;;EAEDjB,IAAMkB,OAAI,GAAG,IAAI,CAAC,GAAG,CAACC,qBAAW,CAAC,IAAI,CAAC,CAAC,CAAC;EACzC,IAAID,OAAI,KAAK,CAAC,EAAE;IACd,IAAI,OAAO,CAAC,OAAO,IAAE,OAAO,CAAC,KAAK,CAAC,oBAAoB,EAAE,IAAI,CAAC,GAAC;IAC/D,OAAO,IAAI,CAAC;GACb;;EAED,OAAgB,GAAGE,cAAM,CAAC,IAAI,YAAE,GAAE,SAAG,CAAC,CAAC,CAAC,IAAC;MAApC;MAAM,IAAI,UAA4B;EAC3C,SAAgB,GAAGA,cAAM,CAAC,IAAI,YAAE,GAAE,SAAG,CAAC,CAAC,CAAC,IAAC;MAApC;MAAM,IAAI,YAA4B;;;EAG3CpB,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC;;EAEzE,IAAI,SAAS,GAAG,CAAC,IAAE,IAAI,GAAG,QAAQ,CAAC,IAAI,EAAE,SAAS,CAAC,GAAC;EACpD,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,UAAU,QAAE,IAAI,CAAC,CAAC,GAAC;;;;eAG3CoB,cAAM,CAAC,IAAI,YAAE,GAAE,SAAG,CAAC,CAAC,CAAC,IAAC,GAApC,qBAAM,IAAI,iBAA4B;;cACxBA,cAAM,CAAC,IAAI,YAAE,GAAE,SAAG,CAAC,CAAC,CAAC,IAAC,GAApC,oBAAM,IAAI,gBAA4B;EACvC,SAA2B,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI;MAAhD;MAAU,SAAS,YAA+B;;;EAGzDpB,IAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,CAAC,GAAG,EAAE,CAAC;;;EAGrD,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;;IAEnBA,IAAM,QAAQ,GAAGqB,yBAAe,CAAC,IAAI,CAAC,CAAC;IACvC,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,EAAE;MACtB,IAAI,OAAO,CAAC,OAAO,IAAE,OAAO,CAAC,KAAK,CAAC,sBAAsB,EAAE,IAAI,CAAC,GAAC;MACjE,OAAO,IAAI,CAAC;KACb;IACD,IAAIN,yBAAe,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAC;;IAE5D,OAAO,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,EAAE;MACtCf,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,QAAQ,GAAG,IAAI,CAAC;MAC7CA,IAAM,IAAI,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,SAAS,GAAG,IAAI,CAAC;MAC9CA,IAAM,QAAQ,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;MAC9B,IAAIe,yBAAe,CAAC,IAAI,EAAE,QAAQ,CAAC,IAAE,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAC;KAC7D;GACF;EACD,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,GAAC;EACpER,IAAI,OAAO,GAAG,CAAC,CAAC;EAChBA,IAAI,OAAO,GAAG,IAAI,CAAC;;EAEnB,KAAKA,IAAI,EAAE,GAAG,CAAC,EAAE,EAAE,GAAG,MAAM,CAAC,MAAM,EAAE,EAAE,EAAE,EAAE;IACzCP,IAAM,KAAK,GAAG,MAAM,CAAC,EAAE,CAAC,CAAC;IACzBA,IAAM,QAAQ,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;IACxC,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,OAAO,SAAE,KAAK,CAAC,CAAC,GAAC;IACxD,KAAKO,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;MACvCP,IAAM,UAAU,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;MAE9B,SAAgB,GAAG,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE,QAAQ;UAArD;UAAK,GAAG,YAA+C;MAC9D,SAAgB,GAAG,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE,QAAQ,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;UAAnE;UAAK,GAAG,YAA6D;MAC5EA,IAAM,YAAY,GAAG,EAAE,CAAC;MACxB,IAAI,GAAG,IAAI,GAAG,IAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAC;MAClF,IAAI,GAAG,IAAI,GAAG,IAAE,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,GAAC;;MAElF,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,OAAE,GAAG,OAAE,GAAG,OAAE,GAAG,OAAE,GAAG,gBAAE,YAAY,CAAC,CAAC,GAAC;;MAEjG,KAAKO,IAAIe,GAAC,GAAG,CAAC,EAAEA,GAAC,GAAG,YAAY,CAAC,MAAM,EAAEA,GAAC,EAAE,EAAE;;QAE5CtB,IAAM,MAAM,GAAG,YAAY,CAACsB,GAAC,CAAC,CAAC;;QAE/B,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,QAAQ,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,GAAC;;QAEhF,SAAgB,GAAG,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ;YAAjDC;YAAKC,iBAA8C;QAC1D,IAAID,KAAG,KAAK,IAAI,IAAIC,KAAG,KAAK,IAAI,IAAE,WAAS;QAC3CxB,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,MAAM,EAAEuB,KAAG,CAAC,EAAE,oBAAoB,CAAC,MAAM,EAAEC,KAAG,CAAC,CAAC,CAAC;QAClGxB,IAAM,QAAQ,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;QAE3C,SAAgB,GAAG,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE,QAAQ,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC;YAA/DyB;YAAKC,iBAA4D;QACxE,IAAID,KAAG,KAAK,IAAI,IAAIC,KAAG,KAAK,IAAI,IAAE,WAAS;QAC3C1B,IAAM,UAAU,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAoB,CAAC,MAAM,EAAEyB,KAAG,CAAC,EAAE,oBAAoB,CAAC,MAAM,EAAEC,KAAG,CAAC,CAAC,CAAC;QAClG1B,IAAM,SAAS,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;QAE5C,IAAI,QAAQ,GAAG,SAAS,GAAG,OAAO,IAAE,WAAS;;QAE7CO,IAAI,OAAO,GAAG,YAAY,CAAC;QAC3B,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;UACnBP,IAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,cAAc,EAAE,OAAO,CAAC,QAAQ,GAAG,SAAS,EAAE,OAAO,IAAI,SAAS,GAAG,SAAS,CAAC,CAAC,CAAC;UACzHA,IAAM,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,cAAc,EAAE,QAAQ,GAAG,OAAO,CAAC,SAAS,EAAE,QAAQ,GAAG,QAAQ,GAAG,OAAO,CAAC,CAAC;UACrH,OAAO,GAAGgB,aAAK,CAAC,cAAc,EAAE,cAAc,GAAG,eAAe,EAAE,eAAe,CAAC,CAAC;SACpF;;QAED,KAAKT,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;UAEvCP,IAAM,MAAM,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;;UAG1BO,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC;UACnEA,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,SAAS,GAAG,MAAM,CAAC,CAAC;UACnD,IAAI,KAAK,GAAG,SAAS,GAAG,OAAO,IAAE,WAAS;;UAE1C,IAAI,OAAO,CAAC,MAAM,IAAI,KAAK,GAAG,IAAI,IAAI,SAAS,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,QAAQ,UAAE,MAAM,CAAC,CAAC,GAAC;;UAEvF,OAAO,KAAK,GAAG,IAAI,IAAI,SAAS,EAAE;YAChCP,IAAM,KAAK,GAAG,CAAC,IAAI,GAAG,KAAK,IAAI,CAAC,CAAC;YACjCA,IAAM,MAAM,GAAG,KAAK,GAAG,MAAM,CAAC;YAC9B,IAAO;gBAAI,EAAE,aAAW;YACxBO,IAAI,QAAQ,GAAG;cACb,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;cACjC,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;cACjC,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;cACjC,CAAC,EAAE,GAAG,KAAK,GAAG,CAAC,EAAE,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;aAClC,CAAC;YACF,QAAQ,GAAG,aAAa,CAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;YACrDP,IAAM,UAAU,GAAG,aAAa,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAC;YACjD,IAAI,UAAU,EAAE;;cAEd,OAAO,GAAG,KAAK,GAAG,MAAM,CAAC;cACzB,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;cAC3B,OAAO,GAAG,CAAC,IAAI,EAAE,OAAO,MAAE,EAAE,MAAE,EAAE,SAAE,KAAK,UAAE,MAAM,EAAE,KAAK,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,QAAQ,CAAC,CAAC;cAClF,IAAI,GAAG,KAAK,CAAC;aACd;iBACI;cACH,KAAK,GAAG,KAAK,CAAC;aACf;YACD,IAAI,OAAO,CAAC,MAAM,IAAE,MAAM,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,WAAW,EAAE,YAAY,EAAE,KAAK,GAAG,MAAM,GAAGkB,OAAI,MAAE,EAAE,MAAE,EAAE,SAAE,KAAK,UAAE,MAAM,SAAE,KAAK,cAAE,UAAU,CAAC,CAAC,GAAC;;WAErI;;SAEF;;OAEF;;KAEF;;GAEF;;EAED,IAAI,OAAO,CAAC,KAAK,EAAE;IACjB,SAAS,CAAC,WAAW,CAAC,GAAG,OAAO,CAAC;GAClC;;EAED,OAAO,OAAO,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,OAAO,IAAI,EAAE,EAAE,SAAC,MAAM,CAAC,CAAC,GAAG,OAAO,CAAC;;CAE1E;;;;;;;ACrND,IAAqB,IAAI;EAOvB,aAAW,GAAG;;;;IAEZjB,aAAK,KAAC,CAAC,CAAC;;IAER,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;IACvB,IAAI,CAAC,QAAQ,eAAM,SAAG,OAAI,CAAC;IAC3B,IAAI,CAAC,YAAY,aAAI,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE;MAC9BD,IAAM,CAAC,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;MAClC,IAAI,CAAC,CAAC,IAAE,OAAO,IAAI,GAAC;MACpB,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,GAAGF,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC1I,CAAC;IACF,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE;MACnD,UAAU,EAAE,QAAQ;MACpB,aAAa,EAAE,QAAQ;KACxB,CAAC,CAAC;IACH,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;IACpB,IAAI,CAAC,EAAE,GAAGH,qBAAQ,CAAC,GAAG,CAAC,CAAC;IACxB,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,GAAG,CAAC,CAAC;IACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;IAChB,IAAI,CAAC,EAAE,GAAGC,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACtB,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC,GAAG,GAAGD,qBAAQ,CAAC,GAAG,CAAC,CAAC;;;;;;oCAE1B;;;;;;;;;iBASD,sBAAK,CAAC,EAAE;;;IACNK,IAAM,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,IAAI,WAAE,CAAC,EAAE,CAAC,EAAE,SAAGF,MAAI,CAAC,GAAG,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,IAAC,CAAC,CAAC;IAC7GE,IAAM,OAAO,GAAG,MAAM,CAAC,GAAG,WAAE,CAAC,EAAE,CAAC,EAAE,SAAG,CAACF,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,IAAC,CAAC,CAAC;IACvEE,IAAM,OAAO,GAAG,MAAM,CAAC,OAAO,EAAE,CAAC,GAAG,WAAE,CAAC,EAAE,CAAC,EAAE,SAAGF,MAAI,CAAC,GAAG,GAAG,CAACA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAACA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAC,CAAC,CAAC;IAC7HS,IAAI,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IACrC,IAAI,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAE,MAAM,GAAG,MAAM,CAAC,OAAO,EAAE,GAAC;IAC7D,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IACvB,OAAO,SAAC,MAAM,CAAC,CAAC;IACjB;;;;;;;;iBAQD,oCAAY,IAAI,EAAE;;;;IAEhBP,IAAM,KAAK,GAAG2B,iBAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,WAAC,GAAE;;MAErD,CAAC,CAAC,IAAI,GAAGV,kBAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEhCjB,IAAM,CAAC,GAAGoB,cAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAACtB,MAAI,CAAC,EAAE,CAAC;SACnC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAACA,MAAI,CAAC,GAAG,CAAC,CAAC;SAC9B,MAAM,CAACA,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAACA,MAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;OAChD,CAAC;MACF,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;MACT,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;;MAEzBE,IAAM,CAAC,GAAGoB,cAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAACtB,MAAI,CAAC,EAAE,CAAC;SACnC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAG,CAACA,MAAI,CAAC,GAAG,CAAC,CAAC;SAC9B,MAAM,CAACA,MAAI,CAAC,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAACA,MAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;OAChD,CAAC;MACF,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;MACT,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;;MAE1B,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;MAChB,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,eAAe,GAAG,IAAI,CAAC;;MAEzB,OAAO,CAAC,CAAC;KACV,CAAC,CAAC;;IAEH,KAAK,CAAC,GAAG,aAAG,GAAE,SAAG,CAAC,CAAC,MAAG,CAAC;IACvB,OAAO,KAAK,CAAC;;IAEd;;;;;;;;iBAQD,0BAAO,QAAQ,EAAE;;IAEfG,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvBD,IAAM,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG4B,UAAU,EAAE;OACnC,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;OACtB,KAAK,CAAC,KAAK,aAAS,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;OAClF,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC;OACpC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;IAExC5B,IAAM,QAAQ,GAAG4B,UAAU,EAAE;OAC1B,OAAO,WAAC,GAAE,SAAG,IAAC,CAAC;OACf,KAAK,CAAC,KAAK,aAAS,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;OAClF,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC;OACpC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;IAExC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;OACvB,IAAI,CAAC,WAAW,YAAE,GAAE,0BAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAC,WAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAC,UAAG,CAAC;OAC1F,IAAI,CAAC,GAAG,YAAE,GAAE,SAAG,IAAI,CAAC,CAAC,CAAC,MAAM,IAAC,CAAC;OAC9B,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAErC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACrD,IAAI,CAAC,WAAW,YAAE,GAAE,0BAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAC,WAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAC,UAAG,CAAC;OAC1F,SAAS,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE;QAC1B,OAAOC,iCAAe,CAAChC,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;OAChE,CAAC;OACD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAErC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACnD,SAAS,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE;QAC1B,OAAOgC,iCAAe,CAAChC,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;OACpE,CAAC,CAAC;;IAEL,OAAO,IAAI,CAAC;;IAEb;;;;;;;;iBAQD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;IACjE;;;;;;;;iBAQD,4BAAQ,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;IACrE;;;;;;;;iBAQD,gBAAE,CAAC,EAAE;IACH,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,EAAE,GAAC;IACtC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGD,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACpD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;iBAQD,kBAAG,CAAC,EAAE;IACJ,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,GAAG,GAAC;IACvC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;iBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;IACjH;;;;;;;;iBAQD,gBAAE,CAAC,EAAE;IACH,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,EAAE,GAAC;IACtC,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACpD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;iBAQD,kBAAG,CAAC,EAAE;IACJ,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,GAAG,GAAC;IACvC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;iBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;GACjH;;;EA/N+B;;;;;;;ACPlC,IAAqB,GAAG;EAOtB,YAAW,GAAG;;;;IAEZK,aAAK,OAAC,MAAM,CAAC,CAAC;;IAEd,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;IACnB,IAAI,CAAC,OAAO,GAAGL,qBAAQ,CAAC,EAAE,CAAC,CAAC;IAC5B,IAAI,CAAC,YAAY,aAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,UAAI;MAChC,KAAK,EAAE,CAAC,CAAC,KAAK;MACd,MAAM,EAAE,CAAC,CAAC,MAAM;MAChB,CAAC,EAAEE,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC;MACtD,CAAC,EAAEA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC;KACxD,IAAC,CAAC;IACH,IAAI,CAAC,MAAM,GAAGF,qBAAQ,CAAC,EAAE,CAAC,CAAC;IAC3B,IAAI,CAAC,EAAE,GAAGD,qBAAQ,CAAC,GAAG,CAAC,CAAC;IACxB,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,GAAG,CAAC,CAAC;IACzB,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC;IAChB,IAAI,CAAC,EAAE,GAAGC,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACtB,IAAI,CAAC,GAAG,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACvB,IAAI,CAAC,GAAG,GAAGD,qBAAQ,CAAC,GAAG,CAAC,CAAC;;;;;;kCAE1B;;;;;;;;gBAQD,0BAAO,QAAQ,EAAE;;;;IAEfM,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvB,IAAI,CAAC,MAAM;OACR,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGH,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACrE,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACvE,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAG,CAACA,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,IAAC,CAAC;OACtE,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAG,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,IAAC,CAAC;OACvE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACpC,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACrE,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACvE,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAG,CAACA,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,IAAC,CAAC;OACtE,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAG,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,GAAG,IAAC,CAAC,CAAC;;IAE3E,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;gBASD,sBAAK,CAAC,EAAE,CAAC,EAAE;IACT,OAAO,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACrE;;;;;;;;gBAQD,0CAAeW,OAAI,EAAE;;;IACnBA,OAAI;OACD,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGX,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAC7C,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAC/C,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAACA,MAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACrF,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,GAAG,KAAK,IAAI,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC,CAAC;IAC3F;;;;;;;;;gBASD,kCAAW,CAAC,EAAE,CAAC,EAAE;IACf,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,IAAE,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,GAAC;IACjD,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjD;;;;;;;;;gBASD,gCAAU,CAAC,EAAE,CAAC,EAAE;IACd,IAAI,IAAI,CAAC,GAAG,KAAK,IAAI,IAAE,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAC;IAChD,OAAO,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjD;;;;;;;;;gBASD,wBAAM,CAAC,EAAE,CAAC,EAAE;IACVE,IAAM,CAAC,GAAG,IAAI,CAAC,GAAG,KAAK,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7E,IAAI,CAAC,GAAG,CAAC,IAAE,OAAO,CAAC,GAAC;WACf,OAAO,CAAC,GAAC;IACf;;;;;;;;;gBASD,wBAAM,CAAC,EAAE,CAAC,EAAE;IACVA,IAAM,CAAC,GAAG,IAAI,CAAC,GAAG,KAAK,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7E,IAAI,CAAC,GAAG,CAAC,IAAE,OAAO,CAAC,GAAC;WACf,OAAO,CAAC,GAAC;IACf;;;;;;;;;;;;gBAYD,0BAAO,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGJ,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;IAC3G;;;;;;;;;;;;gBAYD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;IACzG;;;;;;;;gBAQD,kBAAG,CAAC,EAAE;IACJ,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,GAAG,GAAC;IACvC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;gBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;IACjH;;;;;;;;gBAQD,kBAAG,CAAC,EAAE;IACJ,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,GAAG,GAAC;IACvC,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC;IACnB,OAAO,IAAI,CAAC;IACb;;;;;;;;gBAQD,kBAAG,CAAC,EAAE;IACJ,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,KAAK,IAAI,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,GAAG,CAAC;GACjH;;;EAjN8B;;;;;;;ACAjC,IAAqB,MAAM;EAOzB,eAAW,GAAG;IACZK,aAAK,OAAC,QAAQ,CAAC,CAAC;IAChB,IAAI,CAAC,YAAY,aAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,UAC3B,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAC,CAAC;IAC1E,IAAI,CAAC,YAAY,GAAGY,mBAAM,CAAC,IAAI,CAAC,YAAY,EAAE;MAC5C,UAAU,EAAE,QAAQ;MACpB,aAAa,EAAE,QAAQ;KACxB,CAAC,CAAC;IACH,IAAI,CAAC,KAAK,GAAG,QAAQ,CAAC;IACtB,IAAI,CAAC,EAAE,GAAGlB,qBAAQ,CAAC,GAAG,CAAC,CAAC;;;;;wCACzB;;;;;;;mBAOD,0CAAec,OAAI,EAAE;;;IACnBA,OAAI;OACD,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGX,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAClC,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAG,CAACA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OACvC,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAG,CAACA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC,CAAC;IAC5C;;;;;;;;mBAQD,0BAAO,QAAQ,EAAE;;IAEfG,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvB,IAAI,CAAC,MAAM;OACR,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACpC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;;IAE1C,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;mBASD,sBAAK,CAAC,EAAE,CAAC,EAAE;IACT,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC3B;;;;;;;;;;;;mBAYD,gBAAE,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGL,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;GACjG;;;EAjFiC;;;;;;;ACMpC,IAAqB,IAAI;EAOvB,aAAW,GAAG;;IAEZK,aAAK,KAAC,CAAC,CAAC;;IAER,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;IACvB,IAAI,CAAC,QAAQ,aAAG,GAAE,SAAG,IAAC,CAAC;IACvB,IAAI,CAAC,KAAK,GAAGL,qBAAQ,CAAC,MAAM,CAAC,CAAC;IAC9B,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;IACpB,IAAI,CAAC,KAAK,GAAGkC,UAAU,EAAE,CAAC;IAC1B,IAAI,CAAC,OAAO,GAAGlC,qBAAQ,CAAC,OAAO,CAAC,CAAC;IACjC,IAAI,CAAC,YAAY,GAAGA,qBAAQ,CAAC,CAAC,CAAC,CAAC;;;;;;oCAEjC;;;;;;;;iBAQD,oCAAY,IAAI,EAAE;;;;IAEhBI,IAAM,KAAK,GAAG2B,iBAAI,EAAE,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,WAAC,GAAE;;MAErD,CAAC,CAAC,IAAI,GAAGV,kBAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;MACzB,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;;MAEhCjB,IAAM,CAAC,GAAGoB,cAAM,CAAC,CAAC,CAAC,MAAM,EAAEtB,MAAI,CAAC,EAAE,CAAC,CAAC;MACpC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;MACT,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACtB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC;;MAEzBE,IAAM,CAAC,GAAGoB,cAAM,CAAC,CAAC,CAAC,MAAM,EAAEtB,MAAI,CAAC,EAAE,CAAC,CAAC;MACpC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;MACT,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MACvB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC;;MAE1B,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;MAChB,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;MACzB,CAAC,CAAC,eAAe,GAAG,IAAI,CAAC;;MAEzB,OAAO,CAAC,CAAC;KACV,CAAC,CAAC;;IAEH,KAAK,CAAC,GAAG,aAAG,GAAE,SAAG,CAAC,CAAC,MAAG,CAAC;IACvB,OAAO,KAAK,CAAC;;IAEd;;;;;;;;iBAQD,0BAAO,QAAQ,EAAE;;;;IAEfG,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvBD,IAAM,IAAI,GAAG,IAAI,CAAC;;IAElB,IAAI,CAAC,KAAK;OACP,KAAK,CAAC,KAAK,aAAS,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC;OAClF,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC;OACtB,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;OACV,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;;IAEd,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC;OACvB,IAAI,CAAC,WAAW,YAAE,GAAE,0BAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAC,WAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAC,UAAG,CAAC;OAC1F,IAAI,CAAC,GAAG,YAAE,GAAE,SAAGF,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,IAAC,CAAC;OACpC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAErC,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACrD,IAAI,CAAC,WAAW,YAAE,GAAE,0BAAgB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,EAAC,WAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,EAAC,UAAG,CAAC;OAC1F,SAAS,CAAC,GAAG,EAAE,SAAS,CAAC,EAAE;QAC1B,OAAO+B,iCAAe,CAAChC,kBAAM,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;OACtE,CAAC;OACD,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAErC,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;iBASD,sBAAK,CAAC,EAAE,CAAC,EAAE;;;IACT,OAAO,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,GAAG,WAAC,GAAE,SAAG,CAACC,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAEA,MAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,IAAC,CAAC,CAAC,CAAC;IACpE;;;;;;;;iBAQD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;IACjE;;;;;;;;iBAQD,4BAAQ,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC;GACrE;;;EAvH+B;;ACflCE,IAAM+B,IAAE,GAAG,IAAI,CAAC,EAAE,CAAC;;;;;;;;;AASnB,yBAAgB,KAAK,EAAE,QAAQ,EAAE,KAAgB,EAAE;+BAAb,GAAG;;;EAEvC,IAAI,KAAK,GAAG,CAAC,IAAE,KAAK,GAAGA,IAAE,GAAG,CAAC,GAAG,KAAK,GAAC;;EAEtC,IAAI,KAAK,KAAK,QAAQ,EAAE;;IAEtB/B,IAAM,QAAQ,GAAG,EAAE,IAAI+B,IAAE,GAAG,GAAG,CAAC,CAAC;IACjCxB,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;;IAEjB,IAAI,KAAK,GAAGwB,IAAE,GAAG,CAAC,EAAE;MAClB/B,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;MAC5B,CAAC,IAAI,KAAK,GAAG,QAAQ,GAAG,QAAQ,GAAG,QAAQ,GAAG,GAAG,CAAC;MAClD,CAAC,IAAI,KAAK,GAAG,QAAQ,GAAG,GAAG,GAAG,QAAQ,GAAG,QAAQ,CAAC;KACnD;SACI,IAAI,KAAK,IAAI+B,IAAE,EAAE;MACpB/B,IAAMgC,KAAG,GAAG,IAAI,CAAC,GAAG,CAACD,IAAE,GAAG,KAAK,CAAC,CAAC;MACjC,CAAC,IAAI,KAAK,GAAGA,IAAE,GAAG,QAAQ,GAAG,QAAQ,GAAGC,KAAG,GAAG,QAAQ,CAAC;MACvD,CAAC,IAAI,KAAK,GAAGD,IAAE,GAAG,QAAQ,GAAG,QAAQ,GAAGC,KAAG,GAAG,QAAQ,CAAC;KACxD;SACI,IAAI,KAAK,GAAG,QAAQ,GAAGD,IAAE,EAAE;MAC9B,CAAC,IAAI,QAAQ,CAAC;MACd,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,GAAGA,IAAE,CAAC,GAAG,QAAQ,CAAC;KACtC;SACI,IAAI,KAAK,GAAG,CAAC,GAAGA,IAAE,GAAG,CAAC,EAAE;MAC3B,CAAC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,GAAGA,IAAE,CAAC,CAAC;MACrC,CAAC,IAAI,QAAQ,CAAC;KACf;SACI,IAAI,KAAK,GAAG,CAAC,GAAGA,IAAE,GAAG,QAAQ,EAAE;MAClC,CAAC,IAAI,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGA,IAAE,GAAG,KAAK,CAAC,CAAC;MACzC,CAAC,IAAI,QAAQ,CAAC;KACf;SACI;MACH,CAAC,IAAI,QAAQ,CAAC;MACd,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,GAAGA,IAAE,GAAG,KAAK,CAAC,GAAG,QAAQ,CAAC;KAC1C;;IAED,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;GAEf;OACI,IAAI,KAAK,KAAK,QAAQ,EAAE;IAC3B,OAAO,CAAC,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC;GACjE;SACI,OAAO,IAAI,GAAC;;CAElB;;AClDD/B,IAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC;;;;;;;;;AASnB,uBAAgB,IAAI,EAAE,aAAkB,EAAE;+CAAP,GAAG;;;EAEpCA,IAAM,IAAI,GAAG,EAAE;QACT,KAAK,GAAG,qBAAqB,CAAC;;EAEpCO,IAAI,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC7B,OAAO,KAAK,KAAK,IAAI,EAAE;;IAErB,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,GAAC;SACzE,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;;MAEzBP,IAAM,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;;MAE/CA,IAAM,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,CAAC;YACrD,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAC5B,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;YAClB,KAAK,GAAG,aAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;;MAExCO,IAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,GAAG,MAAM,GAAG,MAAM,GAAG,MAAM,GAAG,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC;MACnG,IAAI,MAAM,CAAC,CAAC,CAAC,IAAE,KAAK,GAAG,EAAE,GAAG,CAAC,GAAG,KAAK,GAAC;;MAEtCP,IAAM,IAAI,GAAG,KAAK,IAAI,KAAK,IAAI,EAAE,GAAG,CAAC,CAAC,IAAI,MAAM,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,aAAa,CAAC,CAAC;MAC5EA,IAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;MAClDO,IAAI,CAAC,GAAG,IAAI,CAAC;MACb,OAAO,CAAC,GAAG,KAAK,EAAE;QAChB,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;QACrE,CAAC,IAAI,IAAI,CAAC;OACX;MACD,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;KAEjB;IACD,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;GAE1B;;EAED,OAAO,IAAI,CAAC;;CAEb;;;;;;;ACtCD,IAAqB,IAAI;EAOvB,aAAW,GAAG;;;IACZN,aAAK,OAAC,MAAM,CAAC,CAAC;IACd,IAAI,CAAC,EAAE,GAAGN,qBAAQ,CAAC,MAAM,CAAC,CAAC;IAC3B,IAAI,CAAC,YAAY,aAAI,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE;MAC9BK,IAAM,CAAC,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,EAAE,CAAC,KAAK,EAAEF,MAAI,CAAC,YAAY,CAAC,MAAM,GAAGA,MAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAC1G,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;KAC1G,CAAC;IACF,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;IACpB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE;MACnD,UAAU,EAAE,QAAQ;MACpB,aAAa,EAAE,QAAQ;KACxB,CAAC,CAAC;;;;;oCACJ;;;;;;;;;iBASD,sBAAK,CAAC,EAAE,CAAC,EAAE;IACT,OAAO,CAAC,MAAM,EAAE,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C;;;;;;;;iBAQD,0BAAO,QAAQ,EAAE;;IAEfG,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvB,IAAI,CAAC,MAAM;OACR,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;OAClB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC;OAClB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;;IAEtB,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;OAClB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,EAAE,CAAC,CAAC;;IAEtB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACpC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;;IAEtB,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;;;;iBAYD,gBAAE,CAAC,EAAE;IACH,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGL,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,EAAE,CAAC;GACjG;;;EAzE+B;;;;;;;ACFlC,IAAqB,IAAI;EAOvB,aAAW,GAAG;IACZK,aAAK,OAAC,MAAM,CAAC,CAAC;IACd,IAAI,CAAC,OAAO,GAAGN,qBAAQ,CAAC,QAAQ,CAAC,CAAC;IAClC,IAAI,CAAC,YAAY,aAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,UAC3B,CAAC,KAAK,EAAE,CAAC,CAAC,KAAK,EAAE,MAAM,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,IAAC,CAAC;IAC1E,IAAI,CAAC,KAAK,GAAG,MAAM,CAAC;IACpB,IAAI,CAAC,MAAM,GAAGA,qBAAQ,CAAC,OAAO,CAAC,CAAC;;;;;oCACjC;;;;;;;;iBAQD,0BAAO,QAAQ,EAAE;;IAEfM,kBAAK,CAAC,WAAM,OAAC,QAAQ,CAAC,CAAC;;IAEvB,IAAI,CAAC,MAAM;OACR,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;OAClC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC;OACzB,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OAC5B,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACtC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;OACjC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;;IAExC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACpC,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;OAClC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC;;IAE7B,OAAO,IAAI,CAAC;;IAEb;;;;;;;;;iBASD,sBAAK,CAAC,EAAE,CAAC,EAAE;IACT,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC/D;;;;;;;;iBAQD,0CAAeQ,OAAI,EAAE;;;IACnBA,OAAI;OACD,IAAI,CAAC,OAAO,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGX,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAC1C,IAAI,CAAC,QAAQ,YAAG,CAAC,EAAE,CAAC,EAAE,SAAGA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,IAAC,CAAC;OAC5C,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAG,CAACA,MAAI,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC;OAC3C,IAAI,CAAC,GAAG,YAAG,CAAC,EAAE,CAAC,EAAE,SAAG,CAACA,MAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAC,CAAC,CAAC;IACjD;;;;;;;;;;;;iBAYD,0BAAO,CAAC,EAAE;IACR,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGF,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC;IAC3G;;;;;;;;;;;;iBAYD,wBAAM,CAAC,EAAE;IACP,OAAO,SAAS,CAAC,MAAM,IAAI,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,KAAK,UAAU,GAAG,CAAC,GAAGA,qBAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC;GACzG;;;EAhG+B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}