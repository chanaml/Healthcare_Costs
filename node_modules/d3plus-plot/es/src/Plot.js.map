{"version":3,"file":"Plot.js","sources":["../../src/Plot.js"],"sourcesContent":["import {extent, max, merge, min, range, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport * as scales from \"d3-scale\";\nimport * as d3Shape from \"d3-shape\";\n\nimport {AxisBottom, AxisLeft, AxisRight, AxisTop, date} from \"d3plus-axis\";\nimport {colorAssign} from \"d3plus-color\";\nimport {accessor, assign, configPrep, constant, elem} from \"d3plus-common\";\nimport * as shapes from \"d3plus-shape\";\nimport {Viz} from \"d3plus-viz\";\n\nimport {default as BarBuffer} from \"./buffers/Bar.js\";\nimport {default as CircleBuffer} from \"./buffers/Circle.js\";\nimport {default as RectBuffer} from \"./buffers/Rect.js\";\nimport {default as LineBuffer} from \"./buffers/Line.js\";\n\nfunction defaultSize(d) {\n  return this._sizeScaleD3(this._size ? this._size(d) : null);\n}\n\n/**\n    @class Plot\n    @extends Viz\n    @desc Creates an x/y plot based on an array of data.\n*/\nexport default class Plot extends Viz {\n\n  /**\n      @memberof Plot\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._annotations = [];\n    this._barPadding = 0;\n    this._buffer = {\n      Bar: BarBuffer,\n      Circle: CircleBuffer,\n      Line: LineBuffer,\n      Rect: RectBuffer\n    };\n    this._groupPadding = 5;\n    this._shape = constant(\"Circle\");\n    this._shapeConfig = assign(this._shapeConfig, {\n      Area: {\n        label: (d, i) => this._stacked ? this._drawLabel(d, i) : false,\n        labelConfig: {\n          fontResize: true\n        }\n      },\n      Bar: {\n        labelConfig: {\n          textAnchor: () => this._discrete === \"x\" ? \"middle\" : \"end\",\n          verticalAlign: () => this._discrete === \"x\" ? \"top\" : \"middle\"\n        }\n      },\n      Circle: {\n        r: defaultSize.bind(this)\n      },\n      Line: {\n        fill: constant(\"none\"),\n        label: false,\n        stroke: (d, i) => colorAssign(this._id(d, i)),\n        strokeWidth: constant(1)\n      },\n      Rect: {\n        height: d => defaultSize.bind(this)(d) * 2,\n        width: d => defaultSize.bind(this)(d) * 2\n      }\n    });\n    this._sizeMax = 20;\n    this._sizeMin = 5;\n    this._sizeScale = \"sqrt\";\n    this._stackOffset = d3Shape.stackOffsetDiverging;\n    this._stackOrder = d3Shape.stackOrderNone;\n    this._x = accessor(\"x\");\n    this._xAxis = new AxisBottom().align(\"end\");\n    this._x2Axis = new AxisTop().align(\"start\");\n    this._xTest = new AxisBottom().align(\"end\").gridSize(0);\n    this._xConfig = {\n      title: \"X Axis\"\n    };\n    this._x2Config = {\n      padding: 0\n    };\n    this._y = accessor(\"y\");\n    this._yAxis = new AxisLeft().align(\"start\");\n    this._y2Axis = new AxisRight().align(\"end\");\n    this._yTest = new AxisLeft().align(\"start\").gridSize(0);\n    this._yConfig = {\n      gridConfig: {\n        stroke: d => {\n          const domain = this._yAxis.domain();\n          return domain[domain.length - 1] === d.id ? \"transparent\" : \"#ccc\";\n        }\n      },\n      title: \"Y Axis\"\n    };\n    this._y2Config = {};\n\n  }\n\n  /**\n      Extends the draw behavior of the abstract Viz class.\n      @private\n  */\n  _draw(callback) {\n\n    super._draw(callback);\n\n    if (!this._filteredData.length) return this;\n\n    const stackGroup = (d, i) => this._stacked\n      ? `${this._groupBy.length > 1 ? this._ids(d, i).slice(0, -1).join(\"_\") : \"group\"}`\n      : `${this._ids(d, i).join(\"_\")}`;\n\n    let data = this._filteredData.map((d, i) => ({\n      __d3plus__: true,\n      data: d,\n      group: stackGroup(d, i),\n      i,\n      id: this._ids(d, i).slice(0, this._drawDepth + 1).join(\"_\"),\n      shape: this._shape(d, i),\n      x: this._x(d, i),\n      y: this._y(d, i)\n    }));\n\n    if (this._size) {\n      const rExtent = extent(data, d => this._size(d.data));\n      this._sizeScaleD3 = () => this._sizeMin;\n      this._sizeScaleD3 = scales[`scale${this._sizeScale.charAt(0).toUpperCase()}${this._sizeScale.slice(1)}`]()\n        .domain(rExtent)\n        .range([rExtent[0] === rExtent[1] ? this._sizeMax : min([this._sizeMax / 2, this._sizeMin]), this._sizeMax]);\n    }\n    else {\n      this._sizeScaleD3 = () => this._sizeMin;\n    }\n\n    const height = this._height - this._margin.top - this._margin.bottom,\n          opp = this._discrete ? this._discrete === \"x\" ? \"y\" : \"x\" : undefined,\n          parent = this._select,\n          transition = this._transition,\n          width = this._width - this._margin.left - this._margin.right;\n\n    const xTime = this._time && data[0].x === this._time(data[0].data, data[0].i),\n          yTime = this._time && data[0].y === this._time(data[0].data, data[0].i);\n\n    for (let i = 0; i < data.length; i++) {\n      const d = data[i];\n      if (xTime) d.x = date(d.x);\n      if (yTime) d.y = date(d.y);\n      d.discrete = d.shape === \"Bar\" ? `${d[this._discrete]}_${d.group}` : `${d[this._discrete]}`;\n    }\n\n    let discreteKeys, domains, stackData, stackKeys;\n    if (this._stacked) {\n\n      const groupValues = nest()\n        .key(d => d.group)\n        .entries(data)\n        .reduce((obj, d) => {\n          if (!obj[d.key]) obj[d.key] = 0;\n          obj[d.key] += sum(d.values, dd => dd[opp]);\n          return obj;\n        }, {});\n\n      data = data.sort((a, b) => {\n        const a1 = a[this._discrete], b1 = b[this._discrete];\n        if (a1 - b1 !== 0) return a1 - b1;\n        if (a.group !== b.group) return groupValues[b.group] - groupValues[a.group];\n        return b[opp] - a[opp];\n      });\n\n      discreteKeys = Array.from(new Set(data.map(d => d.discrete)));\n      stackKeys = Array.from(new Set(data.map(d => d.id)));\n\n      stackData = nest()\n        .key(d => d.discrete)\n        .entries(data)\n        .map(d => d.values);\n\n      stackData.forEach(g => {\n        const ids = Array.from(new Set(g.map(d => d.id)));\n        if (ids.length < stackKeys.length) {\n          stackKeys.forEach(k => {\n            if (!ids.includes(k)) {\n              const d = data.filter(d => d.id === k)[0];\n              if (d.shape === \"Area\") {\n                const group = stackGroup(d.data, d.i);\n                const fillerPoint = {\n                  __d3plus__: true,\n                  data: d.data,\n                  discrete: d.shape === \"Bar\" ? `${g[0][this._discrete]}_${group}` : `${g[0][this._discrete]}`,\n                  group,\n                  id: k,\n                  shape: d.shape,\n                  [this._discrete]: g[0][this._discrete],\n                  [opp]: 0\n                };\n                data.push(fillerPoint);\n              }\n            }\n          });\n        }\n      });\n\n      data.sort((a, b) => a[this._discrete] - b[this._discrete]);\n      const order = this._stackOrder;\n\n      if (order instanceof Array) stackKeys.sort((a, b) => order.indexOf(a) - order.indexOf(b));\n      else if (order === d3Shape.stackOrderNone) stackKeys.sort((a, b) => a.localeCompare(b));\n\n      stackData = d3Shape.stack()\n        .keys(stackKeys)\n        .offset(this._stackOffset)\n        .order(order instanceof Array ? d3Shape.stackOrderNone : order)\n        .value((group, key) => {\n          const d = group.filter(g => g.id === key);\n          return d.length ? d[0][opp] : 0;\n        })(stackData);\n\n      domains = {\n        [this._discrete]: extent(data, d => d[this._discrete]),\n        [opp]: [min(stackData.map(g => min(g.map(p => p[0])))), max(stackData.map(g => max(g.map(p => p[1]))))]\n      };\n\n    }\n    else domains = {x: extent(data, d => d.x), y: extent(data, d => d.y)};\n\n    let xDomain = this._xDomain ? this._xDomain.slice() : domains.x,\n        xScale = \"Linear\";\n\n    if (xDomain[0] === void 0) xDomain[0] = domains.x[0];\n    if (xDomain[1] === void 0) xDomain[1] = domains.x[1];\n\n    if (xTime) {\n      xDomain = xDomain.map(date);\n      xScale = \"Time\";\n    }\n    else if (this._discrete === \"x\") {\n      xDomain = Array.from(new Set(data.sort((a, b) => this._xSort ? this._xSort(a.data, b.data) : a.x - b.x).map(d => d.x)));\n      xScale = \"Ordinal\";\n    }\n\n    let yDomain = this._yDomain ? this._yDomain.slice() : domains.y,\n        yScale = \"Linear\";\n\n    if (yDomain[0] === void 0) yDomain[0] = domains.y[0];\n    if (yDomain[1] === void 0) yDomain[1] = domains.y[1];\n\n    if (yTime) {\n      yDomain = yDomain.map(date);\n      yScale = \"Time\";\n    }\n    else if (this._discrete === \"y\") {\n      yDomain = Array.from(new Set(data.sort((a, b) => this._ySort ? this._ySort(a.data, b.data) : a.y - b.y).map(d => d.y)));\n      yScale = \"Ordinal\";\n    }\n\n    domains = {x: xDomain, y: yDomain};\n\n    if (opp && this._baseline !== void 0) {\n      const b = this._baseline;\n      if (domains[opp][0] > b) domains[opp][0] = b;\n      else if (domains[opp][1] < b) domains[opp][1] = b;\n    }\n\n    let x = scales[`scale${xScale}`]().domain(domains.x).range(range(0, width + 1, width / (domains.x.length - 1))),\n        y = scales[`scale${yScale}`]().domain(domains.y.reverse()).range(range(0, height + 1, height / (domains.y.length - 1)));\n\n    const shapeData = nest().key(d => d.shape).entries(data);\n    if (this._xConfig.scale !== \"log\" && this._yConfig.scale !== \"log\") {\n      shapeData.forEach(d => {\n        if (this._buffer[d.key]) {\n          const res = this._buffer[d.key].bind(this)(d.values, x, y, this._shapeConfig[d.key]);\n          if (this._xConfig.scale !== \"log\") x = res[0];\n          if (this._yConfig.scale !== \"log\") y = res[1];\n        }\n      });\n    }\n    xDomain = x.domain();\n    yDomain = y.domain();\n\n    const testGroup = elem(\"g.d3plus-plot-test\", {enter: {opacity: 0}, parent: this._select}),\n          xTicks = this._discrete === \"x\" && !xTime ? domains.x : undefined,\n          yTicks = this._discrete === \"y\" && !yTime ? domains.y : undefined;\n\n    const yC = {\n      gridConfig: {stroke: !this._discrete || this._discrete === \"x\" ? this._yTest.gridConfig().stroke : \"transparent\"}\n    };\n\n    this._yTest\n      .domain(yDomain)\n      .height(height)\n      .scale(yScale.toLowerCase())\n      .select(testGroup.node())\n      .ticks(yTicks)\n      .width(width)\n      .config(yC)\n      .config(this._yConfig)\n      .render();\n\n    const yBounds = this._yTest.outerBounds();\n    const yWidth = yBounds.width ? yBounds.width + this._yTest.padding() : undefined;\n\n    const xC = {\n      gridConfig: {stroke: !this._discrete || this._discrete === \"y\" ? this._xTest.gridConfig().stroke : \"transparent\"}\n    };\n\n    this._xTest\n      .domain(xDomain)\n      .height(height)\n      .range([undefined, undefined])\n      .scale(xScale.toLowerCase())\n      .select(testGroup.node())\n      .ticks(xTicks)\n      .width(width)\n      .config(xC)\n      .config(this._xConfig)\n      .render();\n\n    const xOffset = max([yWidth, this._xTest._getRange()[0]]);\n\n    this._xTest\n      .range([xOffset, undefined])\n      .render();\n\n    const topOffset = this._yTest.shapeConfig().labelConfig.fontSize() / 2;\n    const transform = `translate(${this._margin.left}, ${this._margin.top + topOffset})`;\n\n    const xGroup = elem(\"g.d3plus-plot-x-axis\", {parent, transition, enter: {transform}, update: {transform}});\n\n    const xTrans = xOffset > yWidth ? xOffset - yWidth : 0;\n    const yTransform = `translate(${this._margin.left + xTrans}, ${this._margin.top + topOffset})`;\n    const yGroup = elem(\"g.d3plus-plot-y-axis\", {parent, transition, enter: {transform: yTransform}, update: {transform: yTransform}});\n\n    this._xAxis\n      .domain(xDomain)\n      .height(height)\n      .range([xOffset, undefined])\n      .scale(xScale.toLowerCase())\n      .select(xGroup.node())\n      .ticks(xTicks)\n      .width(width)\n      .config(xC)\n      .config(this._xConfig)\n      .render();\n\n    x = d => {\n      if (this._xConfig.scale === \"log\" && d === 0) d = xDomain[0] < 0 ? -1 : 1;\n      return this._xAxis._getPosition.bind(this._xAxis)(d);\n    };\n    const xRange = this._xAxis._getRange();\n\n    this._x2Axis\n      .config(xC)\n      .domain(xDomain)\n      .gridSize(0)\n      .height(height)\n      .labels([])\n      .range([xOffset, undefined])\n      .scale(xScale.toLowerCase())\n      .select(xGroup.node())\n      .ticks([])\n      .width(xRange[xRange.length - 1])\n      .title(false)\n      .tickSize(0)\n      .barConfig({\"stroke-width\": this._discrete ? 0 : this._xAxis.barConfig()[\"stroke-width\"]})\n      .config(this._x2Config)\n      .render();\n\n    this._yAxis\n      .domain(yDomain)\n      .height(height)\n      .range([this._xAxis.outerBounds().y, this._xTest.outerBounds().y])\n      .scale(yScale.toLowerCase())\n      .select(yGroup.node())\n      .ticks(yTicks)\n      .width(xRange[xRange.length - 1])\n      .config(yC)\n      .config(this._yConfig)\n      .render();\n\n    this._y2Axis\n      .config(yC)\n      .domain(yDomain)\n      .gridSize(0)\n      .height(height)\n      .labels([])\n      .range([this._xAxis.outerBounds().y, this._xTest.outerBounds().y])\n      .scale(yScale.toLowerCase())\n      .select(yGroup.node())\n      .ticks([])\n      .width(xRange[xRange.length - 1] + this._xAxis.padding())\n      .title(false)\n      .tickSize(0)\n      .barConfig({\"stroke-width\": this._discrete ? 0 : this._yAxis.barConfig()[\"stroke-width\"]})\n      .config(this._y2Config)\n      .render();\n\n    y = d => {\n      if (this._yConfig.scale === \"log\" && d === 0) d = yDomain[0] < 0 ? -1 : 1;\n      return this._yAxis._getPosition.bind(this._yAxis)(d);\n    };\n    const yRange = this._yAxis._getRange();\n\n    const annotationGroup = elem(\"g.d3plus-plot-annotations\", {parent, transition, enter: {transform}, update: {transform}}).node();\n    this._annotations.forEach(annotation => {\n      new shapes[annotation.shape]()\n        .config(annotation)\n        .config({\n          x: d => x(d.x),\n          x0: this._discrete === \"x\" ? d => x(d.x) : x(0),\n          x1: this._discrete === \"x\" ? null : d => x(d.x),\n          y: d => y(d.y),\n          y0: this._discrete === \"y\" ? d => y(d.y) : y(0) - yOffset,\n          y1: this._discrete === \"y\" ? null : d => y(d.y) - yOffset\n        })\n        .select(annotationGroup)\n        .render();\n    });\n\n    let yOffset = this._xAxis.barConfig()[\"stroke-width\"];\n    if (yOffset) yOffset /= 2;\n\n    const shapeConfig = {\n      duration: this._duration,\n      label: d => this._drawLabel(d.data, d.i),\n      select: elem(\"g.d3plus-plot-shapes\", {parent, transition, enter: {transform}, update: {transform}}).node(),\n      x: d => x(d.x),\n      x0: this._discrete === \"x\" ? d => x(d.x) : x(0),\n      x1: this._discrete === \"x\" ? null : d => x(d.x),\n      y: d => y(d.y),\n      y0: this._discrete === \"y\" ? d => y(d.y) : y(0) - yOffset,\n      y1: this._discrete === \"y\" ? null : d => y(d.y) - yOffset\n    };\n\n    if (this._stacked) {\n      const scale = opp === \"x\" ? x : y;\n      shapeConfig[`${opp}`] = shapeConfig[`${opp}0`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][0]) : scale(0);\n      };\n      shapeConfig[`${opp}1`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][1]) : scale(0);\n      };\n    }\n\n    const events = Object.keys(this._on);\n    shapeData.forEach(d => {\n\n      const s = new shapes[d.key]().config(shapeConfig).data(d.values);\n\n      if (d.key === \"Bar\") {\n\n        let space;\n        const scale = this._discrete === \"x\" ? x : y;\n        const vals = (this._discrete === \"x\" ? xDomain : yDomain).filter(d => typeof d !== \"string\" || d.indexOf(\"d3plus-buffer-\") < 0);\n        const range = this._discrete === \"x\" ? xRange : yRange;\n        if (vals.length > 1) space = scale(vals[1]) - scale(vals[0]);\n        else space = range[range.length - 1] - range[0];\n        space -= this._groupPadding;\n\n        let barSize = space;\n\n        const groups = nest()\n          .key(d => d[this._discrete])\n          .key(d => d.group)\n          .entries(d.values);\n\n        const ids = merge(groups.map(d => d.values.map(v => v.key)));\n        const uniqueIds = Array.from(new Set(ids));\n\n        if (max(groups.map(d => d.values.length)) === 1) {\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i));\n        }\n        else {\n\n          barSize = (barSize - this._barPadding * uniqueIds.length - 1) / uniqueIds.length;\n\n          const offset = space / 2 - barSize / 2;\n\n          const xMod = scales.scaleLinear()\n            .domain([0, uniqueIds.length - 1])\n            .range([-offset, offset]);\n\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i) + xMod(uniqueIds.indexOf(d.group)));\n\n        }\n\n        s.width(barSize);\n        s.height(barSize);\n\n      }\n\n      const classEvents = events.filter(e => e.includes(`.${d.key}`)),\n            globalEvents = events.filter(e => !e.includes(\".\")),\n            shapeEvents = events.filter(e => e.includes(\".shape\"));\n      for (let e = 0; e < globalEvents.length; e++) s.on(globalEvents[e], d => this._on[globalEvents[e]](d.data, d.i));\n      for (let e = 0; e < shapeEvents.length; e++) s.on(shapeEvents[e], d => this._on[shapeEvents[e]](d.data, d.i));\n      for (let e = 0; e < classEvents.length; e++) s.on(classEvents[e], d => this._on[classEvents[e]](d.data, d.i));\n\n      s.config(configPrep.bind(this)(this._shapeConfig, \"shape\", d.key)).render();\n      this._shapes.push(s);\n\n    });\n\n    return this;\n\n  }\n\n  /**\n      @memberof Plot\n      @desc Allows drawing custom shapes to be used as annotations in the provided x/y plot. This method accepts custom config objects for the [Shape](http://d3plus.org/docs/#Shape) class, either a single config object or an array of config objects. Each config object requires an additional parameter, the \"shape\", which denotes which [Shape](http://d3plus.org/docs/#Shape) sub-class to use ([Rect](http://d3plus.org/docs/#Rect), [Line](http://d3plus.org/docs/#Line), etc). Annotations will be drawn underneath the data to be displayed.\n      @param {Array|Object} *annotations* = []\n      @chainable\n  */\n  annotations(_) {\n    return arguments.length ? (this._annotations = _ instanceof Array ? _ : [_], this) : this._annotations;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between each bar in a group of bars.\n      @param {Number} *value* = 0\n      @chainable\n  */\n  barPadding(_) {\n    return arguments.length ? (this._barPadding = _, this) : this._barPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the baseline for the x/y plot. If *value* is not specified, returns the current baseline.\n      @param {Number} *value*\n      @chainable\n  */\n  baseline(_) {\n    return arguments.length ? (this._baseline = _, this) : this._baseline;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the discrete axis to the specified string. If *value* is not specified, returns the current discrete axis.\n      @param {String} *value*\n      @chainable\n  */\n  discrete(_) {\n    return arguments.length ? (this._discrete = _, this) : this._discrete;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between groups of bars.\n      @param {Number} [*value* = 5]\n      @chainable\n  */\n  groupPadding(_) {\n    return arguments.length ? (this._groupPadding = _, this) : this._groupPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size of bubbles to the given Number, data key, or function.\n      @param {Function|Number|String} *value* = 10\n      @chainable\n  */\n  size(_) {\n    return arguments.length ? (this._size = typeof _ === \"function\" || !_ ? _ : accessor(_), this) : this._size;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale maximum to the specified number.\n      @param {Number} *value* = 20\n      @chainable\n  */\n  sizeMax(_) {\n    return arguments.length ? (this._sizeMax = _, this) : this._sizeMax;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale minimum to the specified number.\n      @param {Number} *value* = 5\n      @chainable\n  */\n  sizeMin(_) {\n    return arguments.length ? (this._sizeMin = _, this) : this._sizeMin;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale to the specified string.\n      @param {String} *value* = \"sqrt\"\n      @chainable\n  */\n  sizeScale(_) {\n    return arguments.length ? (this._sizeScale = _, this) : this._sizeScale;\n  }\n\n  /**\n      @memberof Plot\n      @desc If *value* is specified, toggles shape stacking. If *value* is not specified, returns the current stack value.\n      @param {Boolean} *value* = false\n      @chainable\n  */\n  stacked(_) {\n    return arguments.length ? (this._stacked = _, this) : this._stacked;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack offset. If *value* is not specified, returns the current stack offset function.\n      @param {Function|String} *value* = \"descending\"\n      @chainable\n  */\n  stackOffset(_) {\n    return arguments.length ? (this._stackOffset = typeof _ === \"function\" ? _ : d3Shape[`stackOffset${_.charAt(0).toUpperCase() + _.slice(1)}`], this) : this._stackOffset;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack order. If *value* is not specified, returns the current stack order function.\n      @param {Function|String|Array} *value* = \"none\"\n      @chainable\n  */\n  stackOrder(_) {\n    return arguments.length ? (this._stackOrder = typeof _ === \"string\" ? d3Shape[`stackOrder${_.charAt(0).toUpperCase() + _.slice(1)}`] : _, this) : this._stackOrder;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x accessor to the specified function or number. If *value* is not specified, returns the current x accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  x(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._x = _;\n      else {\n        this._x = accessor(_);\n        if (!this._aggs[_] && this._discrete === \"x\") {\n          this._aggs[_] = a => {\n            const v = Array.from(new Set(a));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n      }\n      return this;\n    }\n    else return this._x;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the x-axis. If *value* is not specified, returns the current x-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  xConfig(_) {\n    return arguments.length ? (this._xConfig = assign(this._xConfig, _), this) : this._xConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the secondary x-axis. If *value* is not specified, returns the current secondary x-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  x2Config(_) {\n    return arguments.length ? (this._x2Config = assign(this._x2Config, _), this) : this._x2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x domain to the specified array. If *value* is not specified, returns the current x domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  xDomain(_) {\n    return arguments.length ? (this._xDomain = _, this) : this._xDomain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete x axes.\n      @param {Function} *value*\n      @chainable\n  */\n  xSort(_) {\n    return arguments.length ? (this._xSort = _, this) : this._xSort;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y accessor to the specified function or number. If *value* is not specified, returns the current y accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  y(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._y = _;\n      else {\n        this._y = accessor(_);\n        if (!this._aggs[_] && this._discrete === \"y\") {\n          this._aggs[_] = a => {\n            const v = Array.from(new Set(a));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n      }\n      return this;\n    }\n    else return this._y;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the y-axis. If *value* is not specified, returns the current y-axis configuration.\n\n*Note:* If a \"domain\" array is passed to the y-axis config, it will be reversed.\n      @param {Object} *value*\n      @chainable\n  */\n  yConfig(_) {\n    if (arguments.length) {\n      if (_.domain) _.domain = _.domain.slice().reverse();\n      this._yConfig = assign(this._yConfig, _);\n      return this;\n    }\n    return this._yConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the secondary y-axis. If *value* is not specified, returns the current secondary y-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  y2Config(_) {\n    return arguments.length ? (this._y2Config = assign(this._y2Config, _), this) : this._y2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y domain to the specified array. If *value* is not specified, returns the current y domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  yDomain(_) {\n    return arguments.length ? (this._yDomain = _, this) : this._yDomain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete y axes.\n      @param {Function} *value*\n      @chainable\n  */\n  ySort(_) {\n    return arguments.length ? (this._ySort = _, this) : this._ySort;\n  }\n\n}\n"],"names":["super","this","const","let","e"],"mappings":"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"}