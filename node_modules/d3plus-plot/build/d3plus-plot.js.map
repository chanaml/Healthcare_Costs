{"version":3,"file":"d3plus-plot.js","sources":["../src/buffers/ordinalBuffer.js","../src/buffers/Bar.js","../src/buffers/Circle.js","../src/buffers/Rect.js","../src/buffers/Line.js","../src/Plot.js","../src/AreaPlot.js","../src/BarChart.js","../src/LinePlot.js","../src/StackedArea.js"],"sourcesContent":["export default function(domain) {\n\n  if (domain.includes(\"d3plus-buffer-start\")) return domain;\n\n  const newDomain = [\"d3plus-buffer-start\"];\n  domain.forEach(b => {\n    newDomain.push(b);\n    newDomain.push(`d3plus-buffer-${b}`);\n  });\n\n  return newDomain;\n\n}\n","import {max, min, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\n\nimport {default as ordinalBuffer} from \"./ordinalBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer = 10]\n    @private\n*/\nexport default function(data, x, y, config, buffer = 10) {\n\n  const oppScale = this._discrete === \"x\" ? y : x;\n\n  const oppDomain = oppScale.domain().slice();\n\n  if (this._discrete === \"x\") oppDomain.reverse();\n\n  let negVals, posVals;\n  if (this._stacked) {\n    const groupedData = nest()\n      .key(d => d[this._discrete])\n      .entries(data)\n      .map(d => d.values.map(x => x[this._discrete === \"x\" ? \"y\" : \"x\"]));\n    posVals = groupedData.map(arr => sum(arr.filter(d => d > 0)));\n    negVals = groupedData.map(arr => sum(arr.filter(d => d < 0)));\n  }\n  else {\n    posVals = data.map(d => d[this._discrete === \"x\" ? \"y\" : \"x\"]);\n    negVals = posVals;\n  }\n  let bMax = oppScale(max(posVals));\n  if (bMax !== oppScale(0)) bMax += this._discrete === \"x\" ? -buffer : buffer;\n  bMax = oppScale.invert(bMax);\n\n  let bMin = oppScale(min(negVals));\n  if (bMin !== oppScale(0)) bMin += this._discrete === \"x\" ? buffer : -buffer;\n  bMin = oppScale.invert(bMin);\n\n  if (bMax > oppDomain[1]) oppDomain[1] = bMax;\n  if (bMin < oppDomain[0]) oppDomain[0] = bMin;\n\n  if (this._discrete === \"x\") oppDomain.reverse();\n\n  oppScale.domain(oppDomain);\n\n  const discreteScale = this._discrete === \"x\" ? x : y;\n  discreteScale.domain(ordinalBuffer(discreteScale.domain()));\n\n  return [x, y];\n\n}\n","import {default as ordinalBuffer} from \"./ordinalBuffer\";\n\n/**\n    Adds a buffer to either side of the non-discrete axis.\n    @param {Array} data\n    @param {D3Scale} x\n    @param {D3Scale} y\n    @param {Object} [config]\n    @param {Number} [buffer] Defaults to the radius of the largest Circle.\n    @private\n*/\nexport default function(data, x, y, config, buffer) {\n\n  let xD = x.domain().slice(),\n      yD = y.domain().slice();\n\n  const xR = x.range(),\n        yR = y.range();\n\n  if (!x.invert) xD = ordinalBuffer(xD);\n  if (!y.invert) yD = ordinalBuffer(yD);\n\n  data.forEach(d => {\n\n    const s = buffer ? buffer : config.r(d.data, d.i) * 2;\n\n    if (x.invert && x(d.x) - xR[0] < s) {\n      const v = x.invert(x(d.x) - s);\n      if (v < xD[0]) xD[0] = v;\n    }\n    if (x.invert && xR[1] - x(d.x) < s) {\n      const v = x.invert(x(d.x) + s);\n      if (v > xD[1]) xD[1] = v;\n    }\n\n    if (y.invert && y(d.y) - yR[0] < s) {\n      const v = y.invert(y(d.y) - s);\n      if (v > yD[0]) yD[0] = v;\n    }\n    if (y.invert && yR[1] - y(d.y) < s) {\n      const v = y.invert(y(d.y) + s);\n      if (v < yD[1]) yD[1] = v;\n    }\n\n  });\n\n  x.domain(xD).range(xR);\n  y.domain(yD).range(yR);\n\n  return [x, y];\n\n}\n","import {default as ordinalBuffer} from \"./ordinalBuffer\";\n\nexport default function(data, x, y, config) {\n\n  let xD = x.domain().slice(),\n      yD = y.domain().slice();\n\n  const xR = x.range(),\n        yR = y.range();\n\n  if (!x.invert) xD = ordinalBuffer(xD);\n  if (!y.invert) yD = ordinalBuffer(yD);\n\n  data.forEach(d => {\n\n    const h = config.height(d.data, d.i),\n          w = config.width(d.data, d.i);\n\n    if (x.invert && x(d.x) - xR[0] < w) {\n      const v = x.invert(x(d.x) - w);\n      if (v < xD[0]) xD[0] = v;\n    }\n    if (x.invert && xR[1] - x(d.x) < w) {\n      const v = x.invert(x(d.x) + w);\n      if (v > xD[1]) xD[1] = v;\n    }\n\n    if (y.invert && y(d.y) - yR[0] < h) {\n      const v = y.invert(y(d.y) - h);\n      if (v > yD[0]) yD[0] = v;\n    }\n    if (y.invert && yR[1] - y(d.y) < h) {\n      const v = y.invert(y(d.y) + h);\n      if (v < yD[1]) yD[1] = v;\n    }\n\n  });\n\n  x.domain(xD);\n  y.domain(yD);\n\n  return [x, y];\n\n}\n","import {max} from \"d3-array\";\n\nexport default function(data, x, y) {\n\n  const s = this._discrete === \"x\" ? y : x;\n\n  const d = s.domain().slice();\n\n  if (this._discrete === \"x\") d.reverse();\n\n  const vals = data.map(d => d[this._discrete === \"x\" ? \"y\" : \"x\"]);\n  const b = s.invert(s(max(vals)) + (this._discrete === \"x\" ? -10 : 10));\n\n  if (b > d[1]) d[1] = b;\n\n  if (this._discrete === \"x\") d.reverse();\n\n  s.domain(d);\n\n  return [x, y];\n\n}\n","import {extent, max, merge, min, range, sum} from \"d3-array\";\nimport {nest} from \"d3-collection\";\nimport * as scales from \"d3-scale\";\nimport * as d3Shape from \"d3-shape\";\n\nimport {AxisBottom, AxisLeft, AxisRight, AxisTop, date} from \"d3plus-axis\";\nimport {colorAssign} from \"d3plus-color\";\nimport {accessor, assign, configPrep, constant, elem} from \"d3plus-common\";\nimport * as shapes from \"d3plus-shape\";\nimport {Viz} from \"d3plus-viz\";\n\nimport {default as BarBuffer} from \"./buffers/Bar.js\";\nimport {default as CircleBuffer} from \"./buffers/Circle.js\";\nimport {default as RectBuffer} from \"./buffers/Rect.js\";\nimport {default as LineBuffer} from \"./buffers/Line.js\";\n\nfunction defaultSize(d) {\n  return this._sizeScaleD3(this._size ? this._size(d) : null);\n}\n\n/**\n    @class Plot\n    @extends Viz\n    @desc Creates an x/y plot based on an array of data.\n*/\nexport default class Plot extends Viz {\n\n  /**\n      @memberof Plot\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._annotations = [];\n    this._barPadding = 0;\n    this._buffer = {\n      Bar: BarBuffer,\n      Circle: CircleBuffer,\n      Line: LineBuffer,\n      Rect: RectBuffer\n    };\n    this._groupPadding = 5;\n    this._shape = constant(\"Circle\");\n    this._shapeConfig = assign(this._shapeConfig, {\n      Area: {\n        label: (d, i) => this._stacked ? this._drawLabel(d, i) : false,\n        labelConfig: {\n          fontResize: true\n        }\n      },\n      Bar: {\n        labelConfig: {\n          textAnchor: () => this._discrete === \"x\" ? \"middle\" : \"end\",\n          verticalAlign: () => this._discrete === \"x\" ? \"top\" : \"middle\"\n        }\n      },\n      Circle: {\n        r: defaultSize.bind(this)\n      },\n      Line: {\n        fill: constant(\"none\"),\n        label: false,\n        stroke: (d, i) => colorAssign(this._id(d, i)),\n        strokeWidth: constant(1)\n      },\n      Rect: {\n        height: d => defaultSize.bind(this)(d) * 2,\n        width: d => defaultSize.bind(this)(d) * 2\n      }\n    });\n    this._sizeMax = 20;\n    this._sizeMin = 5;\n    this._sizeScale = \"sqrt\";\n    this._stackOffset = d3Shape.stackOffsetDiverging;\n    this._stackOrder = d3Shape.stackOrderNone;\n    this._x = accessor(\"x\");\n    this._xAxis = new AxisBottom().align(\"end\");\n    this._x2Axis = new AxisTop().align(\"start\");\n    this._xTest = new AxisBottom().align(\"end\").gridSize(0);\n    this._xConfig = {\n      title: \"X Axis\"\n    };\n    this._x2Config = {\n      padding: 0\n    };\n    this._y = accessor(\"y\");\n    this._yAxis = new AxisLeft().align(\"start\");\n    this._y2Axis = new AxisRight().align(\"end\");\n    this._yTest = new AxisLeft().align(\"start\").gridSize(0);\n    this._yConfig = {\n      gridConfig: {\n        stroke: d => {\n          const domain = this._yAxis.domain();\n          return domain[domain.length - 1] === d.id ? \"transparent\" : \"#ccc\";\n        }\n      },\n      title: \"Y Axis\"\n    };\n    this._y2Config = {};\n\n  }\n\n  /**\n      Extends the draw behavior of the abstract Viz class.\n      @private\n  */\n  _draw(callback) {\n\n    super._draw(callback);\n\n    if (!this._filteredData.length) return this;\n\n    const stackGroup = (d, i) => this._stacked\n      ? `${this._groupBy.length > 1 ? this._ids(d, i).slice(0, -1).join(\"_\") : \"group\"}`\n      : `${this._ids(d, i).join(\"_\")}`;\n\n    let data = this._filteredData.map((d, i) => ({\n      __d3plus__: true,\n      data: d,\n      group: stackGroup(d, i),\n      i,\n      id: this._ids(d, i).slice(0, this._drawDepth + 1).join(\"_\"),\n      shape: this._shape(d, i),\n      x: this._x(d, i),\n      y: this._y(d, i)\n    }));\n\n    if (this._size) {\n      const rExtent = extent(data, d => this._size(d.data));\n      this._sizeScaleD3 = () => this._sizeMin;\n      this._sizeScaleD3 = scales[`scale${this._sizeScale.charAt(0).toUpperCase()}${this._sizeScale.slice(1)}`]()\n        .domain(rExtent)\n        .range([rExtent[0] === rExtent[1] ? this._sizeMax : min([this._sizeMax / 2, this._sizeMin]), this._sizeMax]);\n    }\n    else {\n      this._sizeScaleD3 = () => this._sizeMin;\n    }\n\n    const height = this._height - this._margin.top - this._margin.bottom,\n          opp = this._discrete ? this._discrete === \"x\" ? \"y\" : \"x\" : undefined,\n          parent = this._select,\n          transition = this._transition,\n          width = this._width - this._margin.left - this._margin.right;\n\n    const xTime = this._time && data[0].x === this._time(data[0].data, data[0].i),\n          yTime = this._time && data[0].y === this._time(data[0].data, data[0].i);\n\n    for (let i = 0; i < data.length; i++) {\n      const d = data[i];\n      if (xTime) d.x = date(d.x);\n      if (yTime) d.y = date(d.y);\n      d.discrete = d.shape === \"Bar\" ? `${d[this._discrete]}_${d.group}` : `${d[this._discrete]}`;\n    }\n\n    let discreteKeys, domains, stackData, stackKeys;\n    if (this._stacked) {\n\n      const groupValues = nest()\n        .key(d => d.group)\n        .entries(data)\n        .reduce((obj, d) => {\n          if (!obj[d.key]) obj[d.key] = 0;\n          obj[d.key] += sum(d.values, dd => dd[opp]);\n          return obj;\n        }, {});\n\n      data = data.sort((a, b) => {\n        const a1 = a[this._discrete], b1 = b[this._discrete];\n        if (a1 - b1 !== 0) return a1 - b1;\n        if (a.group !== b.group) return groupValues[b.group] - groupValues[a.group];\n        return b[opp] - a[opp];\n      });\n\n      discreteKeys = Array.from(new Set(data.map(d => d.discrete)));\n      stackKeys = Array.from(new Set(data.map(d => d.id)));\n\n      stackData = nest()\n        .key(d => d.discrete)\n        .entries(data)\n        .map(d => d.values);\n\n      stackData.forEach(g => {\n        const ids = Array.from(new Set(g.map(d => d.id)));\n        if (ids.length < stackKeys.length) {\n          stackKeys.forEach(k => {\n            if (!ids.includes(k)) {\n              const d = data.filter(d => d.id === k)[0];\n              if (d.shape === \"Area\") {\n                const group = stackGroup(d.data, d.i);\n                const fillerPoint = {\n                  __d3plus__: true,\n                  data: d.data,\n                  discrete: d.shape === \"Bar\" ? `${g[0][this._discrete]}_${group}` : `${g[0][this._discrete]}`,\n                  group,\n                  id: k,\n                  shape: d.shape,\n                  [this._discrete]: g[0][this._discrete],\n                  [opp]: 0\n                };\n                data.push(fillerPoint);\n              }\n            }\n          });\n        }\n      });\n\n      data.sort((a, b) => a[this._discrete] - b[this._discrete]);\n      const order = this._stackOrder;\n\n      if (order instanceof Array) stackKeys.sort((a, b) => order.indexOf(a) - order.indexOf(b));\n      else if (order === d3Shape.stackOrderNone) stackKeys.sort((a, b) => a.localeCompare(b));\n\n      stackData = d3Shape.stack()\n        .keys(stackKeys)\n        .offset(this._stackOffset)\n        .order(order instanceof Array ? d3Shape.stackOrderNone : order)\n        .value((group, key) => {\n          const d = group.filter(g => g.id === key);\n          return d.length ? d[0][opp] : 0;\n        })(stackData);\n\n      domains = {\n        [this._discrete]: extent(data, d => d[this._discrete]),\n        [opp]: [min(stackData.map(g => min(g.map(p => p[0])))), max(stackData.map(g => max(g.map(p => p[1]))))]\n      };\n\n    }\n    else domains = {x: extent(data, d => d.x), y: extent(data, d => d.y)};\n\n    let xDomain = this._xDomain ? this._xDomain.slice() : domains.x,\n        xScale = \"Linear\";\n\n    if (xDomain[0] === void 0) xDomain[0] = domains.x[0];\n    if (xDomain[1] === void 0) xDomain[1] = domains.x[1];\n\n    if (xTime) {\n      xDomain = xDomain.map(date);\n      xScale = \"Time\";\n    }\n    else if (this._discrete === \"x\") {\n      xDomain = Array.from(new Set(data.sort((a, b) => this._xSort ? this._xSort(a.data, b.data) : a.x - b.x).map(d => d.x)));\n      xScale = \"Ordinal\";\n    }\n\n    let yDomain = this._yDomain ? this._yDomain.slice() : domains.y,\n        yScale = \"Linear\";\n\n    if (yDomain[0] === void 0) yDomain[0] = domains.y[0];\n    if (yDomain[1] === void 0) yDomain[1] = domains.y[1];\n\n    if (yTime) {\n      yDomain = yDomain.map(date);\n      yScale = \"Time\";\n    }\n    else if (this._discrete === \"y\") {\n      yDomain = Array.from(new Set(data.sort((a, b) => this._ySort ? this._ySort(a.data, b.data) : a.y - b.y).map(d => d.y)));\n      yScale = \"Ordinal\";\n    }\n\n    domains = {x: xDomain, y: yDomain};\n\n    if (opp && this._baseline !== void 0) {\n      const b = this._baseline;\n      if (domains[opp][0] > b) domains[opp][0] = b;\n      else if (domains[opp][1] < b) domains[opp][1] = b;\n    }\n\n    let x = scales[`scale${xScale}`]().domain(domains.x).range(range(0, width + 1, width / (domains.x.length - 1))),\n        y = scales[`scale${yScale}`]().domain(domains.y.reverse()).range(range(0, height + 1, height / (domains.y.length - 1)));\n\n    const shapeData = nest().key(d => d.shape).entries(data);\n    if (this._xConfig.scale !== \"log\" && this._yConfig.scale !== \"log\") {\n      shapeData.forEach(d => {\n        if (this._buffer[d.key]) {\n          const res = this._buffer[d.key].bind(this)(d.values, x, y, this._shapeConfig[d.key]);\n          if (this._xConfig.scale !== \"log\") x = res[0];\n          if (this._yConfig.scale !== \"log\") y = res[1];\n        }\n      });\n    }\n    xDomain = x.domain();\n    yDomain = y.domain();\n\n    const testGroup = elem(\"g.d3plus-plot-test\", {enter: {opacity: 0}, parent: this._select}),\n          xTicks = this._discrete === \"x\" && !xTime ? domains.x : undefined,\n          yTicks = this._discrete === \"y\" && !yTime ? domains.y : undefined;\n\n    const yC = {\n      gridConfig: {stroke: !this._discrete || this._discrete === \"x\" ? this._yTest.gridConfig().stroke : \"transparent\"}\n    };\n\n    this._yTest\n      .domain(yDomain)\n      .height(height)\n      .scale(yScale.toLowerCase())\n      .select(testGroup.node())\n      .ticks(yTicks)\n      .width(width)\n      .config(yC)\n      .config(this._yConfig)\n      .render();\n\n    const yBounds = this._yTest.outerBounds();\n    const yWidth = yBounds.width ? yBounds.width + this._yTest.padding() : undefined;\n\n    const xC = {\n      gridConfig: {stroke: !this._discrete || this._discrete === \"y\" ? this._xTest.gridConfig().stroke : \"transparent\"}\n    };\n\n    this._xTest\n      .domain(xDomain)\n      .height(height)\n      .range([undefined, undefined])\n      .scale(xScale.toLowerCase())\n      .select(testGroup.node())\n      .ticks(xTicks)\n      .width(width)\n      .config(xC)\n      .config(this._xConfig)\n      .render();\n\n    const xOffset = max([yWidth, this._xTest._getRange()[0]]);\n\n    this._xTest\n      .range([xOffset, undefined])\n      .render();\n\n    const topOffset = this._yTest.shapeConfig().labelConfig.fontSize() / 2;\n    const transform = `translate(${this._margin.left}, ${this._margin.top + topOffset})`;\n\n    const xGroup = elem(\"g.d3plus-plot-x-axis\", {parent, transition, enter: {transform}, update: {transform}});\n\n    const xTrans = xOffset > yWidth ? xOffset - yWidth : 0;\n    const yTransform = `translate(${this._margin.left + xTrans}, ${this._margin.top + topOffset})`;\n    const yGroup = elem(\"g.d3plus-plot-y-axis\", {parent, transition, enter: {transform: yTransform}, update: {transform: yTransform}});\n\n    this._xAxis\n      .domain(xDomain)\n      .height(height)\n      .range([xOffset, undefined])\n      .scale(xScale.toLowerCase())\n      .select(xGroup.node())\n      .ticks(xTicks)\n      .width(width)\n      .config(xC)\n      .config(this._xConfig)\n      .render();\n\n    x = d => {\n      if (this._xConfig.scale === \"log\" && d === 0) d = xDomain[0] < 0 ? -1 : 1;\n      return this._xAxis._getPosition.bind(this._xAxis)(d);\n    };\n    const xRange = this._xAxis._getRange();\n\n    this._x2Axis\n      .config(xC)\n      .domain(xDomain)\n      .gridSize(0)\n      .height(height)\n      .labels([])\n      .range([xOffset, undefined])\n      .scale(xScale.toLowerCase())\n      .select(xGroup.node())\n      .ticks([])\n      .width(xRange[xRange.length - 1])\n      .title(false)\n      .tickSize(0)\n      .barConfig({\"stroke-width\": this._discrete ? 0 : this._xAxis.barConfig()[\"stroke-width\"]})\n      .config(this._x2Config)\n      .render();\n\n    this._yAxis\n      .domain(yDomain)\n      .height(height)\n      .range([this._xAxis.outerBounds().y, this._xTest.outerBounds().y])\n      .scale(yScale.toLowerCase())\n      .select(yGroup.node())\n      .ticks(yTicks)\n      .width(xRange[xRange.length - 1])\n      .config(yC)\n      .config(this._yConfig)\n      .render();\n\n    this._y2Axis\n      .config(yC)\n      .domain(yDomain)\n      .gridSize(0)\n      .height(height)\n      .labels([])\n      .range([this._xAxis.outerBounds().y, this._xTest.outerBounds().y])\n      .scale(yScale.toLowerCase())\n      .select(yGroup.node())\n      .ticks([])\n      .width(xRange[xRange.length - 1] + this._xAxis.padding())\n      .title(false)\n      .tickSize(0)\n      .barConfig({\"stroke-width\": this._discrete ? 0 : this._yAxis.barConfig()[\"stroke-width\"]})\n      .config(this._y2Config)\n      .render();\n\n    y = d => {\n      if (this._yConfig.scale === \"log\" && d === 0) d = yDomain[0] < 0 ? -1 : 1;\n      return this._yAxis._getPosition.bind(this._yAxis)(d);\n    };\n    const yRange = this._yAxis._getRange();\n\n    const annotationGroup = elem(\"g.d3plus-plot-annotations\", {parent, transition, enter: {transform}, update: {transform}}).node();\n    this._annotations.forEach(annotation => {\n      new shapes[annotation.shape]()\n        .config(annotation)\n        .config({\n          x: d => x(d.x),\n          x0: this._discrete === \"x\" ? d => x(d.x) : x(0),\n          x1: this._discrete === \"x\" ? null : d => x(d.x),\n          y: d => y(d.y),\n          y0: this._discrete === \"y\" ? d => y(d.y) : y(0) - yOffset,\n          y1: this._discrete === \"y\" ? null : d => y(d.y) - yOffset\n        })\n        .select(annotationGroup)\n        .render();\n    });\n\n    let yOffset = this._xAxis.barConfig()[\"stroke-width\"];\n    if (yOffset) yOffset /= 2;\n\n    const shapeConfig = {\n      duration: this._duration,\n      label: d => this._drawLabel(d.data, d.i),\n      select: elem(\"g.d3plus-plot-shapes\", {parent, transition, enter: {transform}, update: {transform}}).node(),\n      x: d => x(d.x),\n      x0: this._discrete === \"x\" ? d => x(d.x) : x(0),\n      x1: this._discrete === \"x\" ? null : d => x(d.x),\n      y: d => y(d.y),\n      y0: this._discrete === \"y\" ? d => y(d.y) : y(0) - yOffset,\n      y1: this._discrete === \"y\" ? null : d => y(d.y) - yOffset\n    };\n\n    if (this._stacked) {\n      const scale = opp === \"x\" ? x : y;\n      shapeConfig[`${opp}`] = shapeConfig[`${opp}0`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][0]) : scale(0);\n      };\n      shapeConfig[`${opp}1`] = d => {\n        const dataIndex = stackKeys.indexOf(d.id),\n              discreteIndex = discreteKeys.indexOf(d.discrete);\n        return dataIndex >= 0 ? scale(stackData[dataIndex][discreteIndex][1]) : scale(0);\n      };\n    }\n\n    const events = Object.keys(this._on);\n    shapeData.forEach(d => {\n\n      const s = new shapes[d.key]().config(shapeConfig).data(d.values);\n\n      if (d.key === \"Bar\") {\n\n        let space;\n        const scale = this._discrete === \"x\" ? x : y;\n        const vals = (this._discrete === \"x\" ? xDomain : yDomain).filter(d => typeof d !== \"string\" || d.indexOf(\"d3plus-buffer-\") < 0);\n        const range = this._discrete === \"x\" ? xRange : yRange;\n        if (vals.length > 1) space = scale(vals[1]) - scale(vals[0]);\n        else space = range[range.length - 1] - range[0];\n        space -= this._groupPadding;\n\n        let barSize = space;\n\n        const groups = nest()\n          .key(d => d[this._discrete])\n          .key(d => d.group)\n          .entries(d.values);\n\n        const ids = merge(groups.map(d => d.values.map(v => v.key)));\n        const uniqueIds = Array.from(new Set(ids));\n\n        if (max(groups.map(d => d.values.length)) === 1) {\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i));\n        }\n        else {\n\n          barSize = (barSize - this._barPadding * uniqueIds.length - 1) / uniqueIds.length;\n\n          const offset = space / 2 - barSize / 2;\n\n          const xMod = scales.scaleLinear()\n            .domain([0, uniqueIds.length - 1])\n            .range([-offset, offset]);\n\n          s[this._discrete]((d, i) => shapeConfig[this._discrete](d, i) + xMod(uniqueIds.indexOf(d.group)));\n\n        }\n\n        s.width(barSize);\n        s.height(barSize);\n\n      }\n\n      const classEvents = events.filter(e => e.includes(`.${d.key}`)),\n            globalEvents = events.filter(e => !e.includes(\".\")),\n            shapeEvents = events.filter(e => e.includes(\".shape\"));\n      for (let e = 0; e < globalEvents.length; e++) s.on(globalEvents[e], d => this._on[globalEvents[e]](d.data, d.i));\n      for (let e = 0; e < shapeEvents.length; e++) s.on(shapeEvents[e], d => this._on[shapeEvents[e]](d.data, d.i));\n      for (let e = 0; e < classEvents.length; e++) s.on(classEvents[e], d => this._on[classEvents[e]](d.data, d.i));\n\n      s.config(configPrep.bind(this)(this._shapeConfig, \"shape\", d.key)).render();\n      this._shapes.push(s);\n\n    });\n\n    return this;\n\n  }\n\n  /**\n      @memberof Plot\n      @desc Allows drawing custom shapes to be used as annotations in the provided x/y plot. This method accepts custom config objects for the [Shape](http://d3plus.org/docs/#Shape) class, either a single config object or an array of config objects. Each config object requires an additional parameter, the \"shape\", which denotes which [Shape](http://d3plus.org/docs/#Shape) sub-class to use ([Rect](http://d3plus.org/docs/#Rect), [Line](http://d3plus.org/docs/#Line), etc). Annotations will be drawn underneath the data to be displayed.\n      @param {Array|Object} *annotations* = []\n      @chainable\n  */\n  annotations(_) {\n    return arguments.length ? (this._annotations = _ instanceof Array ? _ : [_], this) : this._annotations;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between each bar in a group of bars.\n      @param {Number} *value* = 0\n      @chainable\n  */\n  barPadding(_) {\n    return arguments.length ? (this._barPadding = _, this) : this._barPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the baseline for the x/y plot. If *value* is not specified, returns the current baseline.\n      @param {Number} *value*\n      @chainable\n  */\n  baseline(_) {\n    return arguments.length ? (this._baseline = _, this) : this._baseline;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the discrete axis to the specified string. If *value* is not specified, returns the current discrete axis.\n      @param {String} *value*\n      @chainable\n  */\n  discrete(_) {\n    return arguments.length ? (this._discrete = _, this) : this._discrete;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the pixel space between groups of bars.\n      @param {Number} [*value* = 5]\n      @chainable\n  */\n  groupPadding(_) {\n    return arguments.length ? (this._groupPadding = _, this) : this._groupPadding;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size of bubbles to the given Number, data key, or function.\n      @param {Function|Number|String} *value* = 10\n      @chainable\n  */\n  size(_) {\n    return arguments.length ? (this._size = typeof _ === \"function\" || !_ ? _ : accessor(_), this) : this._size;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale maximum to the specified number.\n      @param {Number} *value* = 20\n      @chainable\n  */\n  sizeMax(_) {\n    return arguments.length ? (this._sizeMax = _, this) : this._sizeMax;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale minimum to the specified number.\n      @param {Number} *value* = 5\n      @chainable\n  */\n  sizeMin(_) {\n    return arguments.length ? (this._sizeMin = _, this) : this._sizeMin;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the size scale to the specified string.\n      @param {String} *value* = \"sqrt\"\n      @chainable\n  */\n  sizeScale(_) {\n    return arguments.length ? (this._sizeScale = _, this) : this._sizeScale;\n  }\n\n  /**\n      @memberof Plot\n      @desc If *value* is specified, toggles shape stacking. If *value* is not specified, returns the current stack value.\n      @param {Boolean} *value* = false\n      @chainable\n  */\n  stacked(_) {\n    return arguments.length ? (this._stacked = _, this) : this._stacked;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack offset. If *value* is not specified, returns the current stack offset function.\n      @param {Function|String} *value* = \"descending\"\n      @chainable\n  */\n  stackOffset(_) {\n    return arguments.length ? (this._stackOffset = typeof _ === \"function\" ? _ : d3Shape[`stackOffset${_.charAt(0).toUpperCase() + _.slice(1)}`], this) : this._stackOffset;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the stack order. If *value* is not specified, returns the current stack order function.\n      @param {Function|String|Array} *value* = \"none\"\n      @chainable\n  */\n  stackOrder(_) {\n    return arguments.length ? (this._stackOrder = typeof _ === \"string\" ? d3Shape[`stackOrder${_.charAt(0).toUpperCase() + _.slice(1)}`] : _, this) : this._stackOrder;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x accessor to the specified function or number. If *value* is not specified, returns the current x accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  x(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._x = _;\n      else {\n        this._x = accessor(_);\n        if (!this._aggs[_] && this._discrete === \"x\") {\n          this._aggs[_] = a => {\n            const v = Array.from(new Set(a));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n      }\n      return this;\n    }\n    else return this._x;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the x-axis. If *value* is not specified, returns the current x-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  xConfig(_) {\n    return arguments.length ? (this._xConfig = assign(this._xConfig, _), this) : this._xConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the secondary x-axis. If *value* is not specified, returns the current secondary x-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  x2Config(_) {\n    return arguments.length ? (this._x2Config = assign(this._x2Config, _), this) : this._x2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the x domain to the specified array. If *value* is not specified, returns the current x domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  xDomain(_) {\n    return arguments.length ? (this._xDomain = _, this) : this._xDomain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete x axes.\n      @param {Function} *value*\n      @chainable\n  */\n  xSort(_) {\n    return arguments.length ? (this._xSort = _, this) : this._xSort;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y accessor to the specified function or number. If *value* is not specified, returns the current y accessor.\n      @param {Function|Number} *value*\n      @chainable\n  */\n  y(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._y = _;\n      else {\n        this._y = accessor(_);\n        if (!this._aggs[_] && this._discrete === \"y\") {\n          this._aggs[_] = a => {\n            const v = Array.from(new Set(a));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n      }\n      return this;\n    }\n    else return this._y;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the y-axis. If *value* is not specified, returns the current y-axis configuration.\n\n*Note:* If a \"domain\" array is passed to the y-axis config, it will be reversed.\n      @param {Object} *value*\n      @chainable\n  */\n  yConfig(_) {\n    if (arguments.length) {\n      if (_.domain) _.domain = _.domain.slice().reverse();\n      this._yConfig = assign(this._yConfig, _);\n      return this;\n    }\n    return this._yConfig;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the config method for the secondary y-axis. If *value* is not specified, returns the current secondary y-axis configuration.\n      @param {Object} *value*\n      @chainable\n  */\n  y2Config(_) {\n    return arguments.length ? (this._y2Config = assign(this._y2Config, _), this) : this._y2Config;\n  }\n\n  /**\n      @memberof Plot\n      @desc Sets the y domain to the specified array. If *value* is not specified, returns the current y domain. Additionally, if either value of the array is undefined, it will be calculated from the data.\n      @param {Array} *value*\n      @chainable\n  */\n  yDomain(_) {\n    return arguments.length ? (this._yDomain = _, this) : this._yDomain;\n  }\n\n  /**\n      @memberof Plot\n      @desc Defines a custom sorting comparitor function to be used for discrete y axes.\n      @param {Function} *value*\n      @chainable\n  */\n  ySort(_) {\n    return arguments.length ? (this._ySort = _, this) : this._ySort;\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class AreaPlot\n    @extends Plot\n    @desc Creates an area plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .baseline(0)\n  .discrete(\"x\")\n  .shape(\"Area\")\n*/\nexport default class AreaPlot extends Plot {\n\n  /**\n      @memberof AreaPlot\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._baseline = 0;\n    this._discrete = \"x\";\n    this._shape = constant(\"Area\");\n    this.x(\"x\");\n\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class BarChart\n    @extends Plot\n    @desc Creates a line plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Line\")\n*/\nexport default class BarChart extends Plot {\n\n  /**\n      @memberof BarChart\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._baseline = 0;\n    this._discrete = \"x\";\n    this._shape = constant(\"Bar\");\n    this.x(\"x\");\n\n  }\n\n}\n","import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class LinePlot\n    @extends Plot\n    @desc Creates a line plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Line\")\n*/\nexport default class LinePlot extends Plot {\n\n  /**\n      @memberof LinePlot\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._discrete = \"x\";\n    this._shape = constant(\"Line\");\n    this.x(\"x\");\n\n  }\n\n}\n","import {default as AreaPlot} from \"./AreaPlot\";\n\n/**\n    @class StackedArea\n    @extends Area\n    @desc Creates a stacked area plot based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Area()\n  .stacked(true)\n*/\nexport default class StackedArea extends AreaPlot {\n\n  /**\n      @memberof StackedArea\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._stacked = true;\n\n  }\n\n}\n"],"names":["const","let","nest","this","sum","max","min","v","super","constant","assign","colorAssign","d3Shape.stackOffsetDiverging","d3Shape.stackOrderNone","accessor","AxisBottom","AxisTop","AxisLeft","AxisRight","extent","date","d3Shape.stack","range","elem","merge","scales.scaleLinear","e","configPrep","Viz"],"mappings":"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"}